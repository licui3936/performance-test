// Preload script to expose IPC to renderer process
console.log('ok');
const { contextBridge, ipcRenderer } = require('electron');

contextBridge.exposeInMainWorld('electronAPI', {
    sendCommand: (action, value) => ipcRenderer.send('command', action, value),
    getPerformanceData: () => ipcRenderer.invoke('get-performance-data'),
    onStatusUpdate: (callback) => ipcRenderer.on('status-update', (event, status) => callback(status))
});

/*! For license information please see main.js.LICENSE.txt */
(()=>{var e,t,n,i,o={"./assets/standard-frame.html":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});const i='<!DOCTYPE html>\n<html>\n\n    <head>\n        <meta charset="utf-8">\n        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n        <meta name="description" content="">\n        <meta name="viewport" content="width=device-width, initial-scale=1">\n    </head>\n\n    <body>\n        <div id="of-frame-main">\n            <div id="title-bar">\n                <div class="title-bar-draggable">\n                    <div id="title"></div>\n                </div>\n                <div id="buttons-wrapper">\n                    <div class="button" title="Minimize Window" id="minimize-button"></div>\n                    <div class="button" title="Maximize Window" id="expand-button"></div>\n                    <div class="button" title="Close Window" id="close-button"></div>\n                </div>\n            </div>\n            <div id="body-container">\n                <div id="layout-container"></div>\n            </div>\n            <script>\n                window.addEventListener(\'DOMContentLoaded\', () => {\n                    fin.Platform.Layout.init();\n                });\n                ///////////////////////\n                // UI initialization //\n                ///////////////////////\n                const setupFrameButtons = () => {\n                    const win = fin.Window.getCurrentSync();\n\n                    const onClose = () => win.close();\n                    const onMinimize = () => win.minimize();\n                    const onMaximize = async () => win.getState().then(state => state === \'maximized\' ? win.restore() : win.maximize());\n\n                    const closeButton = document.getElementById(\'close-button\');\n                    const minimizeButton = document.getElementById(\'minimize-button\');\n                    const expandButton = document.getElementById(\'expand-button\');\n\n                    closeButton.addEventListener(\'click\', onClose);\n                    minimizeButton.addEventListener(\'click\', onMinimize);\n                    expandButton.addEventListener(\'click\', onMaximize);\n                };\n\n                ////////////////////////\n                // Custom CSS support //\n                ////////////////////////\n                const injectCustomStyles = () => {\n                    const {stylesheetUrl} = fin.__internal_.initialOptions;\n                    if(stylesheetUrl) {\n                        injectCssToBody(stylesheetUrl);\n                    }\n                }\n                const injectCssToBody = url => {\n                    const css = document.createElement(\'link\');\n                    css.rel = \'stylesheet\';\n                    css.type = \'text/css\';\n                    css.href= url;\n\n                    document.head.appendChild(css);\n                }\n\n                //////////\n                // Init //\n                //////////\n                setupFrameButtons();                \n                injectCustomStyles();\n            <\/script>\n        </div>\n    </body>\n</html>\n'},"../../node_modules/lodash/_DataView.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getNative.js")(n("../../node_modules/lodash/_root.js"),"DataView");e.exports=i},"../../node_modules/lodash/_Hash.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_hashClear.js"),o=n("../../node_modules/lodash/_hashDelete.js"),r=n("../../node_modules/lodash/_hashGet.js"),s=n("../../node_modules/lodash/_hashHas.js"),a=n("../../node_modules/lodash/_hashSet.js");function Hash(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Hash.prototype.clear=i,Hash.prototype.delete=o,Hash.prototype.get=r,Hash.prototype.has=s,Hash.prototype.set=a,e.exports=Hash},"../../node_modules/lodash/_ListCache.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_listCacheClear.js"),o=n("../../node_modules/lodash/_listCacheDelete.js"),r=n("../../node_modules/lodash/_listCacheGet.js"),s=n("../../node_modules/lodash/_listCacheHas.js"),a=n("../../node_modules/lodash/_listCacheSet.js");function ListCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}ListCache.prototype.clear=i,ListCache.prototype.delete=o,ListCache.prototype.get=r,ListCache.prototype.has=s,ListCache.prototype.set=a,e.exports=ListCache},"../../node_modules/lodash/_Map.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getNative.js")(n("../../node_modules/lodash/_root.js"),"Map");e.exports=i},"../../node_modules/lodash/_MapCache.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_mapCacheClear.js"),o=n("../../node_modules/lodash/_mapCacheDelete.js"),r=n("../../node_modules/lodash/_mapCacheGet.js"),s=n("../../node_modules/lodash/_mapCacheHas.js"),a=n("../../node_modules/lodash/_mapCacheSet.js");function MapCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}MapCache.prototype.clear=i,MapCache.prototype.delete=o,MapCache.prototype.get=r,MapCache.prototype.has=s,MapCache.prototype.set=a,e.exports=MapCache},"../../node_modules/lodash/_Promise.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getNative.js")(n("../../node_modules/lodash/_root.js"),"Promise");e.exports=i},"../../node_modules/lodash/_Set.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getNative.js")(n("../../node_modules/lodash/_root.js"),"Set");e.exports=i},"../../node_modules/lodash/_SetCache.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_MapCache.js"),o=n("../../node_modules/lodash/_setCacheAdd.js"),r=n("../../node_modules/lodash/_setCacheHas.js");function SetCache(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i;++t<n;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=o,SetCache.prototype.has=r,e.exports=SetCache},"../../node_modules/lodash/_Stack.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_ListCache.js"),o=n("../../node_modules/lodash/_stackClear.js"),r=n("../../node_modules/lodash/_stackDelete.js"),s=n("../../node_modules/lodash/_stackGet.js"),a=n("../../node_modules/lodash/_stackHas.js"),c=n("../../node_modules/lodash/_stackSet.js");function Stack(e){var t=this.__data__=new i(e);this.size=t.size}Stack.prototype.clear=o,Stack.prototype.delete=r,Stack.prototype.get=s,Stack.prototype.has=a,Stack.prototype.set=c,e.exports=Stack},"../../node_modules/lodash/_Symbol.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_root.js").Symbol;e.exports=i},"../../node_modules/lodash/_Uint8Array.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_root.js").Uint8Array;e.exports=i},"../../node_modules/lodash/_WeakMap.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getNative.js")(n("../../node_modules/lodash/_root.js"),"WeakMap");e.exports=i},"../../node_modules/lodash/_apply.js":e=>{e.exports=function apply(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},"../../node_modules/lodash/_arrayEach.js":e=>{e.exports=function arrayEach(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}},"../../node_modules/lodash/_arrayFilter.js":e=>{e.exports=function arrayFilter(e,t){for(var n=-1,i=null==e?0:e.length,o=0,r=[];++n<i;){var s=e[n];t(s,n,e)&&(r[o++]=s)}return r}},"../../node_modules/lodash/_arrayLikeKeys.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseTimes.js"),o=n("../../node_modules/lodash/isArguments.js"),r=n("../../node_modules/lodash/isArray.js"),s=n("../../node_modules/lodash/isBuffer.js"),a=n("../../node_modules/lodash/_isIndex.js"),c=n("../../node_modules/lodash/isTypedArray.js"),d=Object.prototype.hasOwnProperty;e.exports=function arrayLikeKeys(e,t){var n=r(e),l=!n&&o(e),u=!n&&!l&&s(e),p=!n&&!l&&!u&&c(e),h=n||l||u||p,f=h?i(e.length,String):[],w=f.length;for(var y in e)!t&&!d.call(e,y)||h&&("length"==y||u&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,w))||f.push(y);return f}},"../../node_modules/lodash/_arrayMap.js":e=>{e.exports=function arrayMap(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}},"../../node_modules/lodash/_arrayPush.js":e=>{e.exports=function arrayPush(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}},"../../node_modules/lodash/_arraySome.js":e=>{e.exports=function arraySome(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}},"../../node_modules/lodash/_assignValue.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseAssignValue.js"),o=n("../../node_modules/lodash/eq.js"),r=Object.prototype.hasOwnProperty;e.exports=function assignValue(e,t,n){var s=e[t];r.call(e,t)&&o(s,n)&&(void 0!==n||t in e)||i(e,t,n)}},"../../node_modules/lodash/_assocIndexOf.js":(e,t,n)=>{var i=n("../../node_modules/lodash/eq.js");e.exports=function assocIndexOf(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}},"../../node_modules/lodash/_baseAssign.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_copyObject.js"),o=n("../../node_modules/lodash/keys.js");e.exports=function baseAssign(e,t){return e&&i(t,o(t),e)}},"../../node_modules/lodash/_baseAssignIn.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_copyObject.js"),o=n("../../node_modules/lodash/keysIn.js");e.exports=function baseAssignIn(e,t){return e&&i(t,o(t),e)}},"../../node_modules/lodash/_baseAssignValue.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_defineProperty.js");e.exports=function baseAssignValue(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},"../../node_modules/lodash/_baseClone.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_Stack.js"),o=n("../../node_modules/lodash/_arrayEach.js"),r=n("../../node_modules/lodash/_assignValue.js"),s=n("../../node_modules/lodash/_baseAssign.js"),a=n("../../node_modules/lodash/_baseAssignIn.js"),c=n("../../node_modules/lodash/_cloneBuffer.js"),d=n("../../node_modules/lodash/_copyArray.js"),l=n("../../node_modules/lodash/_copySymbols.js"),u=n("../../node_modules/lodash/_copySymbolsIn.js"),p=n("../../node_modules/lodash/_getAllKeys.js"),h=n("../../node_modules/lodash/_getAllKeysIn.js"),f=n("../../node_modules/lodash/_getTag.js"),w=n("../../node_modules/lodash/_initCloneArray.js"),y=n("../../node_modules/lodash/_initCloneByTag.js"),m=n("../../node_modules/lodash/_initCloneObject.js"),g=n("../../node_modules/lodash/isArray.js"),v=n("../../node_modules/lodash/isBuffer.js"),b=n("../../node_modules/lodash/isMap.js"),_=n("../../node_modules/lodash/isObject.js"),j=n("../../node_modules/lodash/isSet.js"),C=n("../../node_modules/lodash/keys.js"),I=n("../../node_modules/lodash/keysIn.js"),x="[object Arguments]",E="[object Function]",A="[object Object]",P={};P[x]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[A]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[E]=P["[object WeakMap]"]=!1,e.exports=function baseClone(e,t,n,k,M,S){var O,T=1&t,R=2&t,F=4&t;if(n&&(O=M?n(e,k,M,S):n(e)),void 0!==O)return O;if(!_(e))return e;var L=g(e);if(L){if(O=w(e),!T)return d(e,O)}else{var B=f(e),W=B==E||"[object GeneratorFunction]"==B;if(v(e))return c(e,T);if(B==A||B==x||W&&!M){if(O=R||W?{}:m(e),!T)return R?u(e,a(O,e)):l(e,s(O,e))}else{if(!P[B])return M?e:{};O=y(e,B,T)}}S||(S=new i);var D=S.get(e);if(D)return D;S.set(e,O),j(e)?e.forEach((function(i){O.add(baseClone(i,t,n,i,e,S))})):b(e)&&e.forEach((function(i,o){O.set(o,baseClone(i,t,n,o,e,S))}));var N=L?void 0:(F?R?h:p:R?I:C)(e);return o(N||e,(function(i,o){N&&(i=e[o=i]),r(O,o,baseClone(i,t,n,o,e,S))})),O}},"../../node_modules/lodash/_baseCreate.js":(e,t,n)=>{var i=n("../../node_modules/lodash/isObject.js"),o=Object.create,r=function(){function object(){}return function(e){if(!i(e))return{};if(o)return o(e);object.prototype=e;var t=new object;return object.prototype=void 0,t}}();e.exports=r},"../../node_modules/lodash/_baseFindIndex.js":e=>{e.exports=function baseFindIndex(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}},"../../node_modules/lodash/_baseFlatten.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_arrayPush.js"),o=n("../../node_modules/lodash/_isFlattenable.js");e.exports=function baseFlatten(e,t,n,r,s){var a=-1,c=e.length;for(n||(n=o),s||(s=[]);++a<c;){var d=e[a];t>0&&n(d)?t>1?baseFlatten(d,t-1,n,r,s):i(s,d):r||(s[s.length]=d)}return s}},"../../node_modules/lodash/_baseGet.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_castPath.js"),o=n("../../node_modules/lodash/_toKey.js");e.exports=function baseGet(e,t){for(var n=0,r=(t=i(t,e)).length;null!=e&&n<r;)e=e[o(t[n++])];return n&&n==r?e:void 0}},"../../node_modules/lodash/_baseGetAllKeys.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_arrayPush.js"),o=n("../../node_modules/lodash/isArray.js");e.exports=function baseGetAllKeys(e,t,n){var r=t(e);return o(e)?r:i(r,n(e))}},"../../node_modules/lodash/_baseGetTag.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_Symbol.js"),o=n("../../node_modules/lodash/_getRawTag.js"),r=n("../../node_modules/lodash/_objectToString.js"),s=i?i.toStringTag:void 0;e.exports=function baseGetTag(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?o(e):r(e)}},"../../node_modules/lodash/_baseHasIn.js":e=>{e.exports=function baseHasIn(e,t){return null!=e&&t in Object(e)}},"../../node_modules/lodash/_baseIsArguments.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseGetTag.js"),o=n("../../node_modules/lodash/isObjectLike.js");e.exports=function baseIsArguments(e){return o(e)&&"[object Arguments]"==i(e)}},"../../node_modules/lodash/_baseIsEqual.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseIsEqualDeep.js"),o=n("../../node_modules/lodash/isObjectLike.js");e.exports=function baseIsEqual(e,t,n,r,s){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!=e&&t!=t:i(e,t,n,r,baseIsEqual,s))}},"../../node_modules/lodash/_baseIsEqualDeep.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_Stack.js"),o=n("../../node_modules/lodash/_equalArrays.js"),r=n("../../node_modules/lodash/_equalByTag.js"),s=n("../../node_modules/lodash/_equalObjects.js"),a=n("../../node_modules/lodash/_getTag.js"),c=n("../../node_modules/lodash/isArray.js"),d=n("../../node_modules/lodash/isBuffer.js"),l=n("../../node_modules/lodash/isTypedArray.js"),u="[object Arguments]",p="[object Array]",h="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function baseIsEqualDeep(e,t,n,w,y,m){var g=c(e),v=c(t),b=g?p:a(e),_=v?p:a(t),j=(b=b==u?h:b)==h,C=(_=_==u?h:_)==h,I=b==_;if(I&&d(e)){if(!d(t))return!1;g=!0,j=!1}if(I&&!j)return m||(m=new i),g||l(e)?o(e,t,n,w,y,m):r(e,t,b,n,w,y,m);if(!(1&n)){var x=j&&f.call(e,"__wrapped__"),E=C&&f.call(t,"__wrapped__");if(x||E){var A=x?e.value():e,P=E?t.value():t;return m||(m=new i),y(A,P,n,w,m)}}return!!I&&(m||(m=new i),s(e,t,n,w,y,m))}},"../../node_modules/lodash/_baseIsMap.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getTag.js"),o=n("../../node_modules/lodash/isObjectLike.js");e.exports=function baseIsMap(e){return o(e)&&"[object Map]"==i(e)}},"../../node_modules/lodash/_baseIsMatch.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_Stack.js"),o=n("../../node_modules/lodash/_baseIsEqual.js");e.exports=function baseIsMatch(e,t,n,r){var s=n.length,a=s,c=!r;if(null==e)return!a;for(e=Object(e);s--;){var d=n[s];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++s<a;){var l=(d=n[s])[0],u=e[l],p=d[1];if(c&&d[2]){if(void 0===u&&!(l in e))return!1}else{var h=new i;if(r)var f=r(u,p,l,e,t,h);if(!(void 0===f?o(p,u,3,r,h):f))return!1}}return!0}},"../../node_modules/lodash/_baseIsNative.js":(e,t,n)=>{var i=n("../../node_modules/lodash/isFunction.js"),o=n("../../node_modules/lodash/_isMasked.js"),r=n("../../node_modules/lodash/isObject.js"),s=n("../../node_modules/lodash/_toSource.js"),a=/^\[object .+?Constructor\]$/,c=Function.prototype,d=Object.prototype,l=c.toString,u=d.hasOwnProperty,p=RegExp("^"+l.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function baseIsNative(e){return!(!r(e)||o(e))&&(i(e)?p:a).test(s(e))}},"../../node_modules/lodash/_baseIsSet.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getTag.js"),o=n("../../node_modules/lodash/isObjectLike.js");e.exports=function baseIsSet(e){return o(e)&&"[object Set]"==i(e)}},"../../node_modules/lodash/_baseIsTypedArray.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseGetTag.js"),o=n("../../node_modules/lodash/isLength.js"),r=n("../../node_modules/lodash/isObjectLike.js"),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function baseIsTypedArray(e){return r(e)&&o(e.length)&&!!s[i(e)]}},"../../node_modules/lodash/_baseIteratee.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseMatches.js"),o=n("../../node_modules/lodash/_baseMatchesProperty.js"),r=n("../../node_modules/lodash/identity.js"),s=n("../../node_modules/lodash/isArray.js"),a=n("../../node_modules/lodash/property.js");e.exports=function baseIteratee(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?s(e)?o(e[0],e[1]):i(e):a(e)}},"../../node_modules/lodash/_baseKeys.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_isPrototype.js"),o=n("../../node_modules/lodash/_nativeKeys.js"),r=Object.prototype.hasOwnProperty;e.exports=function baseKeys(e){if(!i(e))return o(e);var t=[];for(var n in Object(e))r.call(e,n)&&"constructor"!=n&&t.push(n);return t}},"../../node_modules/lodash/_baseKeysIn.js":(e,t,n)=>{var i=n("../../node_modules/lodash/isObject.js"),o=n("../../node_modules/lodash/_isPrototype.js"),r=n("../../node_modules/lodash/_nativeKeysIn.js"),s=Object.prototype.hasOwnProperty;e.exports=function baseKeysIn(e){if(!i(e))return r(e);var t=o(e),n=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&n.push(a);return n}},"../../node_modules/lodash/_baseMatches.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseIsMatch.js"),o=n("../../node_modules/lodash/_getMatchData.js"),r=n("../../node_modules/lodash/_matchesStrictComparable.js");e.exports=function baseMatches(e){var t=o(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}},"../../node_modules/lodash/_baseMatchesProperty.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseIsEqual.js"),o=n("../../node_modules/lodash/get.js"),r=n("../../node_modules/lodash/hasIn.js"),s=n("../../node_modules/lodash/_isKey.js"),a=n("../../node_modules/lodash/_isStrictComparable.js"),c=n("../../node_modules/lodash/_matchesStrictComparable.js"),d=n("../../node_modules/lodash/_toKey.js");e.exports=function baseMatchesProperty(e,t){return s(e)&&a(t)?c(d(e),t):function(n){var s=o(n,e);return void 0===s&&s===t?r(n,e):i(t,s,3)}}},"../../node_modules/lodash/_basePick.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_basePickBy.js"),o=n("../../node_modules/lodash/hasIn.js");e.exports=function basePick(e,t){return i(e,t,(function(t,n){return o(e,n)}))}},"../../node_modules/lodash/_basePickBy.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseGet.js"),o=n("../../node_modules/lodash/_baseSet.js"),r=n("../../node_modules/lodash/_castPath.js");e.exports=function basePickBy(e,t,n){for(var s=-1,a=t.length,c={};++s<a;){var d=t[s],l=i(e,d);n(l,d)&&o(c,r(d,e),l)}return c}},"../../node_modules/lodash/_baseProperty.js":e=>{e.exports=function baseProperty(e){return function(t){return null==t?void 0:t[e]}}},"../../node_modules/lodash/_basePropertyDeep.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseGet.js");e.exports=function basePropertyDeep(e){return function(t){return i(t,e)}}},"../../node_modules/lodash/_baseSet.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_assignValue.js"),o=n("../../node_modules/lodash/_castPath.js"),r=n("../../node_modules/lodash/_isIndex.js"),s=n("../../node_modules/lodash/isObject.js"),a=n("../../node_modules/lodash/_toKey.js");e.exports=function baseSet(e,t,n,c){if(!s(e))return e;for(var d=-1,l=(t=o(t,e)).length,u=l-1,p=e;null!=p&&++d<l;){var h=a(t[d]),f=n;if("__proto__"===h||"constructor"===h||"prototype"===h)return e;if(d!=u){var w=p[h];void 0===(f=c?c(w,h,p):void 0)&&(f=s(w)?w:r(t[d+1])?[]:{})}i(p,h,f),p=p[h]}return e}},"../../node_modules/lodash/_baseSetToString.js":(e,t,n)=>{var i=n("../../node_modules/lodash/constant.js"),o=n("../../node_modules/lodash/_defineProperty.js"),r=n("../../node_modules/lodash/identity.js"),s=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:r;e.exports=s},"../../node_modules/lodash/_baseTimes.js":e=>{e.exports=function baseTimes(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}},"../../node_modules/lodash/_baseToString.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_Symbol.js"),o=n("../../node_modules/lodash/_arrayMap.js"),r=n("../../node_modules/lodash/isArray.js"),s=n("../../node_modules/lodash/isSymbol.js"),a=i?i.prototype:void 0,c=a?a.toString:void 0;e.exports=function baseToString(e){if("string"==typeof e)return e;if(r(e))return o(e,baseToString)+"";if(s(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},"../../node_modules/lodash/_baseTrim.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_trimmedEndIndex.js"),o=/^\s+/;e.exports=function baseTrim(e){return e?e.slice(0,i(e)+1).replace(o,""):e}},"../../node_modules/lodash/_baseUnary.js":e=>{e.exports=function baseUnary(e){return function(t){return e(t)}}},"../../node_modules/lodash/_cacheHas.js":e=>{e.exports=function cacheHas(e,t){return e.has(t)}},"../../node_modules/lodash/_castPath.js":(e,t,n)=>{var i=n("../../node_modules/lodash/isArray.js"),o=n("../../node_modules/lodash/_isKey.js"),r=n("../../node_modules/lodash/_stringToPath.js"),s=n("../../node_modules/lodash/toString.js");e.exports=function castPath(e,t){return i(e)?e:o(e,t)?[e]:r(s(e))}},"../../node_modules/lodash/_cloneArrayBuffer.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_Uint8Array.js");e.exports=function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}},"../../node_modules/lodash/_cloneBuffer.js":(e,t,n)=>{e=n.nmd(e);var i=n("../../node_modules/lodash/_root.js"),o=t&&!t.nodeType&&t,r=o&&e&&!e.nodeType&&e,s=r&&r.exports===o?i.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function cloneBuffer(e,t){if(t)return e.slice();var n=e.length,i=a?a(n):new e.constructor(n);return e.copy(i),i}},"../../node_modules/lodash/_cloneDataView.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_cloneArrayBuffer.js");e.exports=function cloneDataView(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},"../../node_modules/lodash/_cloneRegExp.js":e=>{var t=/\w*$/;e.exports=function cloneRegExp(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},"../../node_modules/lodash/_cloneSymbol.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_Symbol.js"),o=i?i.prototype:void 0,r=o?o.valueOf:void 0;e.exports=function cloneSymbol(e){return r?Object(r.call(e)):{}}},"../../node_modules/lodash/_cloneTypedArray.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_cloneArrayBuffer.js");e.exports=function cloneTypedArray(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},"../../node_modules/lodash/_copyArray.js":e=>{e.exports=function copyArray(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}},"../../node_modules/lodash/_copyObject.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_assignValue.js"),o=n("../../node_modules/lodash/_baseAssignValue.js");e.exports=function copyObject(e,t,n,r){var s=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var d=t[a],l=r?r(n[d],e[d],d,n,e):void 0;void 0===l&&(l=e[d]),s?o(n,d,l):i(n,d,l)}return n}},"../../node_modules/lodash/_copySymbols.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_copyObject.js"),o=n("../../node_modules/lodash/_getSymbols.js");e.exports=function copySymbols(e,t){return i(e,o(e),t)}},"../../node_modules/lodash/_copySymbolsIn.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_copyObject.js"),o=n("../../node_modules/lodash/_getSymbolsIn.js");e.exports=function copySymbolsIn(e,t){return i(e,o(e),t)}},"../../node_modules/lodash/_coreJsData.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_root.js")["__core-js_shared__"];e.exports=i},"../../node_modules/lodash/_createFind.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseIteratee.js"),o=n("../../node_modules/lodash/isArrayLike.js"),r=n("../../node_modules/lodash/keys.js");e.exports=function createFind(e){return function(t,n,s){var a=Object(t);if(!o(t)){var c=i(n,3);t=r(t),n=function(e){return c(a[e],e,a)}}var d=e(t,n,s);return d>-1?a[c?t[d]:d]:void 0}}},"../../node_modules/lodash/_defineProperty.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getNative.js"),o=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},"../../node_modules/lodash/_equalArrays.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_SetCache.js"),o=n("../../node_modules/lodash/_arraySome.js"),r=n("../../node_modules/lodash/_cacheHas.js");e.exports=function equalArrays(e,t,n,s,a,c){var d=1&n,l=e.length,u=t.length;if(l!=u&&!(d&&u>l))return!1;var p=c.get(e),h=c.get(t);if(p&&h)return p==t&&h==e;var f=-1,w=!0,y=2&n?new i:void 0;for(c.set(e,t),c.set(t,e);++f<l;){var m=e[f],g=t[f];if(s)var v=d?s(g,m,f,t,e,c):s(m,g,f,e,t,c);if(void 0!==v){if(v)continue;w=!1;break}if(y){if(!o(t,(function(e,t){if(!r(y,t)&&(m===e||a(m,e,n,s,c)))return y.push(t)}))){w=!1;break}}else if(m!==g&&!a(m,g,n,s,c)){w=!1;break}}return c.delete(e),c.delete(t),w}},"../../node_modules/lodash/_equalByTag.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_Symbol.js"),o=n("../../node_modules/lodash/_Uint8Array.js"),r=n("../../node_modules/lodash/eq.js"),s=n("../../node_modules/lodash/_equalArrays.js"),a=n("../../node_modules/lodash/_mapToArray.js"),c=n("../../node_modules/lodash/_setToArray.js"),d=i?i.prototype:void 0,l=d?d.valueOf:void 0;e.exports=function equalByTag(e,t,n,i,d,u,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=a;case"[object Set]":var f=1&i;if(h||(h=c),e.size!=t.size&&!f)return!1;var w=p.get(e);if(w)return w==t;i|=2,p.set(e,t);var y=s(h(e),h(t),i,d,u,p);return p.delete(e),y;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},"../../node_modules/lodash/_equalObjects.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getAllKeys.js"),o=Object.prototype.hasOwnProperty;e.exports=function equalObjects(e,t,n,r,s,a){var c=1&n,d=i(e),l=d.length;if(l!=i(t).length&&!c)return!1;for(var u=l;u--;){var p=d[u];if(!(c?p in t:o.call(t,p)))return!1}var h=a.get(e),f=a.get(t);if(h&&f)return h==t&&f==e;var w=!0;a.set(e,t),a.set(t,e);for(var y=c;++u<l;){var m=e[p=d[u]],g=t[p];if(r)var v=c?r(g,m,p,t,e,a):r(m,g,p,e,t,a);if(!(void 0===v?m===g||s(m,g,n,r,a):v)){w=!1;break}y||(y="constructor"==p)}if(w&&!y){var b=e.constructor,_=t.constructor;b==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(w=!1)}return a.delete(e),a.delete(t),w}},"../../node_modules/lodash/_flatRest.js":(e,t,n)=>{var i=n("../../node_modules/lodash/flatten.js"),o=n("../../node_modules/lodash/_overRest.js"),r=n("../../node_modules/lodash/_setToString.js");e.exports=function flatRest(e){return r(o(e,void 0,i),e+"")}},"../../node_modules/lodash/_freeGlobal.js":e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},"../../node_modules/lodash/_getAllKeys.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseGetAllKeys.js"),o=n("../../node_modules/lodash/_getSymbols.js"),r=n("../../node_modules/lodash/keys.js");e.exports=function getAllKeys(e){return i(e,r,o)}},"../../node_modules/lodash/_getAllKeysIn.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseGetAllKeys.js"),o=n("../../node_modules/lodash/_getSymbolsIn.js"),r=n("../../node_modules/lodash/keysIn.js");e.exports=function getAllKeysIn(e){return i(e,r,o)}},"../../node_modules/lodash/_getMapData.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_isKeyable.js");e.exports=function getMapData(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}},"../../node_modules/lodash/_getMatchData.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_isStrictComparable.js"),o=n("../../node_modules/lodash/keys.js");e.exports=function getMatchData(e){for(var t=o(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,i(s)]}return t}},"../../node_modules/lodash/_getNative.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseIsNative.js"),o=n("../../node_modules/lodash/_getValue.js");e.exports=function getNative(e,t){var n=o(e,t);return i(n)?n:void 0}},"../../node_modules/lodash/_getPrototype.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_overArg.js")(Object.getPrototypeOf,Object);e.exports=i},"../../node_modules/lodash/_getRawTag.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_Symbol.js"),o=Object.prototype,r=o.hasOwnProperty,s=o.toString,a=i?i.toStringTag:void 0;e.exports=function getRawTag(e){var t=r.call(e,a),n=e[a];try{e[a]=void 0;var i=!0}catch(e){}var o=s.call(e);return i&&(t?e[a]=n:delete e[a]),o}},"../../node_modules/lodash/_getSymbols.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_arrayFilter.js"),o=n("../../node_modules/lodash/stubArray.js"),r=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),i(s(e),(function(t){return r.call(e,t)})))}:o;e.exports=a},"../../node_modules/lodash/_getSymbolsIn.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_arrayPush.js"),o=n("../../node_modules/lodash/_getPrototype.js"),r=n("../../node_modules/lodash/_getSymbols.js"),s=n("../../node_modules/lodash/stubArray.js"),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)i(t,r(e)),e=o(e);return t}:s;e.exports=a},"../../node_modules/lodash/_getTag.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_DataView.js"),o=n("../../node_modules/lodash/_Map.js"),r=n("../../node_modules/lodash/_Promise.js"),s=n("../../node_modules/lodash/_Set.js"),a=n("../../node_modules/lodash/_WeakMap.js"),c=n("../../node_modules/lodash/_baseGetTag.js"),d=n("../../node_modules/lodash/_toSource.js"),l="[object Map]",u="[object Promise]",p="[object Set]",h="[object WeakMap]",f="[object DataView]",w=d(i),y=d(o),m=d(r),g=d(s),v=d(a),b=c;(i&&b(new i(new ArrayBuffer(1)))!=f||o&&b(new o)!=l||r&&b(r.resolve())!=u||s&&b(new s)!=p||a&&b(new a)!=h)&&(b=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,i=n?d(n):"";if(i)switch(i){case w:return f;case y:return l;case m:return u;case g:return p;case v:return h}return t}),e.exports=b},"../../node_modules/lodash/_getValue.js":e=>{e.exports=function getValue(e,t){return null==e?void 0:e[t]}},"../../node_modules/lodash/_hasPath.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_castPath.js"),o=n("../../node_modules/lodash/isArguments.js"),r=n("../../node_modules/lodash/isArray.js"),s=n("../../node_modules/lodash/_isIndex.js"),a=n("../../node_modules/lodash/isLength.js"),c=n("../../node_modules/lodash/_toKey.js");e.exports=function hasPath(e,t,n){for(var d=-1,l=(t=i(t,e)).length,u=!1;++d<l;){var p=c(t[d]);if(!(u=null!=e&&n(e,p)))break;e=e[p]}return u||++d!=l?u:!!(l=null==e?0:e.length)&&a(l)&&s(p,l)&&(r(e)||o(e))}},"../../node_modules/lodash/_hashClear.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_nativeCreate.js");e.exports=function hashClear(){this.__data__=i?i(null):{},this.size=0}},"../../node_modules/lodash/_hashDelete.js":e=>{e.exports=function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},"../../node_modules/lodash/_hashGet.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_nativeCreate.js"),o=Object.prototype.hasOwnProperty;e.exports=function hashGet(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},"../../node_modules/lodash/_hashHas.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_nativeCreate.js"),o=Object.prototype.hasOwnProperty;e.exports=function hashHas(e){var t=this.__data__;return i?void 0!==t[e]:o.call(t,e)}},"../../node_modules/lodash/_hashSet.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_nativeCreate.js");e.exports=function hashSet(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this}},"../../node_modules/lodash/_initCloneArray.js":e=>{var t=Object.prototype.hasOwnProperty;e.exports=function initCloneArray(e){var n=e.length,i=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(i.index=e.index,i.input=e.input),i}},"../../node_modules/lodash/_initCloneByTag.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_cloneArrayBuffer.js"),o=n("../../node_modules/lodash/_cloneDataView.js"),r=n("../../node_modules/lodash/_cloneRegExp.js"),s=n("../../node_modules/lodash/_cloneSymbol.js"),a=n("../../node_modules/lodash/_cloneTypedArray.js");e.exports=function initCloneByTag(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return i(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return r(e);case"[object Symbol]":return s(e)}}},"../../node_modules/lodash/_initCloneObject.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseCreate.js"),o=n("../../node_modules/lodash/_getPrototype.js"),r=n("../../node_modules/lodash/_isPrototype.js");e.exports=function initCloneObject(e){return"function"!=typeof e.constructor||r(e)?{}:i(o(e))}},"../../node_modules/lodash/_isFlattenable.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_Symbol.js"),o=n("../../node_modules/lodash/isArguments.js"),r=n("../../node_modules/lodash/isArray.js"),s=i?i.isConcatSpreadable:void 0;e.exports=function isFlattenable(e){return r(e)||o(e)||!!(s&&e&&e[s])}},"../../node_modules/lodash/_isIndex.js":e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function isIndex(e,n){var i=typeof e;return!!(n=n??9007199254740991)&&("number"==i||"symbol"!=i&&t.test(e))&&e>-1&&e%1==0&&e<n}},"../../node_modules/lodash/_isKey.js":(e,t,n)=>{var i=n("../../node_modules/lodash/isArray.js"),o=n("../../node_modules/lodash/isSymbol.js"),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function isKey(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||(s.test(e)||!r.test(e)||null!=t&&e in Object(t))}},"../../node_modules/lodash/_isKeyable.js":e=>{e.exports=function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},"../../node_modules/lodash/_isMasked.js":(e,t,n)=>{var i,o=n("../../node_modules/lodash/_coreJsData.js"),r=(i=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function isMasked(e){return!!r&&r in e}},"../../node_modules/lodash/_isPrototype.js":e=>{var t=Object.prototype;e.exports=function isPrototype(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},"../../node_modules/lodash/_isStrictComparable.js":(e,t,n)=>{var i=n("../../node_modules/lodash/isObject.js");e.exports=function isStrictComparable(e){return e==e&&!i(e)}},"../../node_modules/lodash/_listCacheClear.js":e=>{e.exports=function listCacheClear(){this.__data__=[],this.size=0}},"../../node_modules/lodash/_listCacheDelete.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_assocIndexOf.js"),o=Array.prototype.splice;e.exports=function listCacheDelete(e){var t=this.__data__,n=i(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},"../../node_modules/lodash/_listCacheGet.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_assocIndexOf.js");e.exports=function listCacheGet(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}},"../../node_modules/lodash/_listCacheHas.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_assocIndexOf.js");e.exports=function listCacheHas(e){return i(this.__data__,e)>-1}},"../../node_modules/lodash/_listCacheSet.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_assocIndexOf.js");e.exports=function listCacheSet(e,t){var n=this.__data__,o=i(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},"../../node_modules/lodash/_mapCacheClear.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_Hash.js"),o=n("../../node_modules/lodash/_ListCache.js"),r=n("../../node_modules/lodash/_Map.js");e.exports=function mapCacheClear(){this.size=0,this.__data__={hash:new i,map:new(r||o),string:new i}}},"../../node_modules/lodash/_mapCacheDelete.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getMapData.js");e.exports=function mapCacheDelete(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}},"../../node_modules/lodash/_mapCacheGet.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getMapData.js");e.exports=function mapCacheGet(e){return i(this,e).get(e)}},"../../node_modules/lodash/_mapCacheHas.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getMapData.js");e.exports=function mapCacheHas(e){return i(this,e).has(e)}},"../../node_modules/lodash/_mapCacheSet.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getMapData.js");e.exports=function mapCacheSet(e,t){var n=i(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},"../../node_modules/lodash/_mapToArray.js":e=>{e.exports=function mapToArray(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}},"../../node_modules/lodash/_matchesStrictComparable.js":e=>{e.exports=function matchesStrictComparable(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},"../../node_modules/lodash/_memoizeCapped.js":(e,t,n)=>{var i=n("../../node_modules/lodash/memoize.js");e.exports=function memoizeCapped(e){var t=i(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},"../../node_modules/lodash/_nativeCreate.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_getNative.js")(Object,"create");e.exports=i},"../../node_modules/lodash/_nativeKeys.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_overArg.js")(Object.keys,Object);e.exports=i},"../../node_modules/lodash/_nativeKeysIn.js":e=>{e.exports=function nativeKeysIn(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},"../../node_modules/lodash/_nodeUtil.js":(e,t,n)=>{e=n.nmd(e);var i=n("../../node_modules/lodash/_freeGlobal.js"),o=t&&!t.nodeType&&t,r=o&&e&&!e.nodeType&&e,s=r&&r.exports===o&&i.process,a=function(){try{var e=r&&r.require&&r.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a},"../../node_modules/lodash/_objectToString.js":e=>{var t=Object.prototype.toString;e.exports=function objectToString(e){return t.call(e)}},"../../node_modules/lodash/_overArg.js":e=>{e.exports=function overArg(e,t){return function(n){return e(t(n))}}},"../../node_modules/lodash/_overRest.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_apply.js"),o=Math.max;e.exports=function overRest(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,s=-1,a=o(r.length-t,0),c=Array(a);++s<a;)c[s]=r[t+s];s=-1;for(var d=Array(t+1);++s<t;)d[s]=r[s];return d[t]=n(c),i(e,this,d)}}},"../../node_modules/lodash/_root.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_freeGlobal.js"),o="object"==typeof self&&self&&self.Object===Object&&self,r=i||o||Function("return this")();e.exports=r},"../../node_modules/lodash/_setCacheAdd.js":e=>{e.exports=function setCacheAdd(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},"../../node_modules/lodash/_setCacheHas.js":e=>{e.exports=function setCacheHas(e){return this.__data__.has(e)}},"../../node_modules/lodash/_setToArray.js":e=>{e.exports=function setToArray(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},"../../node_modules/lodash/_setToString.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseSetToString.js"),o=n("../../node_modules/lodash/_shortOut.js")(i);e.exports=o},"../../node_modules/lodash/_shortOut.js":e=>{var t=Date.now;e.exports=function shortOut(e){var n=0,i=0;return function(){var o=t(),r=16-(o-i);if(i=o,r>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},"../../node_modules/lodash/_stackClear.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_ListCache.js");e.exports=function stackClear(){this.__data__=new i,this.size=0}},"../../node_modules/lodash/_stackDelete.js":e=>{e.exports=function stackDelete(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},"../../node_modules/lodash/_stackGet.js":e=>{e.exports=function stackGet(e){return this.__data__.get(e)}},"../../node_modules/lodash/_stackHas.js":e=>{e.exports=function stackHas(e){return this.__data__.has(e)}},"../../node_modules/lodash/_stackSet.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_ListCache.js"),o=n("../../node_modules/lodash/_Map.js"),r=n("../../node_modules/lodash/_MapCache.js");e.exports=function stackSet(e,t){var n=this.__data__;if(n instanceof i){var s=n.__data__;if(!o||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new r(s)}return n.set(e,t),this.size=n.size,this}},"../../node_modules/lodash/_stringToPath.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_memoizeCapped.js"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,s=i((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,i,o){t.push(i?o.replace(r,"$1"):n||e)})),t}));e.exports=s},"../../node_modules/lodash/_toKey.js":(e,t,n)=>{var i=n("../../node_modules/lodash/isSymbol.js");e.exports=function toKey(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},"../../node_modules/lodash/_toSource.js":e=>{var t=Function.prototype.toString;e.exports=function toSource(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},"../../node_modules/lodash/_trimmedEndIndex.js":e=>{var t=/\s/;e.exports=function trimmedEndIndex(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},"../../node_modules/lodash/cloneDeep.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseClone.js");e.exports=function cloneDeep(e){return i(e,5)}},"../../node_modules/lodash/constant.js":e=>{e.exports=function constant(e){return function(){return e}}},"../../node_modules/lodash/eq.js":e=>{e.exports=function eq(e,t){return e===t||e!=e&&t!=t}},"../../node_modules/lodash/find.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_createFind.js")(n("../../node_modules/lodash/findIndex.js"));e.exports=i},"../../node_modules/lodash/findIndex.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseFindIndex.js"),o=n("../../node_modules/lodash/_baseIteratee.js"),r=n("../../node_modules/lodash/toInteger.js"),s=Math.max;e.exports=function findIndex(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var c=null==n?0:r(n);return c<0&&(c=s(a+c,0)),i(e,o(t,3),c)}},"../../node_modules/lodash/flatten.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseFlatten.js");e.exports=function flatten(e){return(null==e?0:e.length)?i(e,1):[]}},"../../node_modules/lodash/get.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseGet.js");e.exports=function get(e,t,n){var o=null==e?void 0:i(e,t);return void 0===o?n:o}},"../../node_modules/lodash/hasIn.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseHasIn.js"),o=n("../../node_modules/lodash/_hasPath.js");e.exports=function hasIn(e,t){return null!=e&&o(e,t,i)}},"../../node_modules/lodash/identity.js":e=>{e.exports=function identity(e){return e}},"../../node_modules/lodash/isArguments.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseIsArguments.js"),o=n("../../node_modules/lodash/isObjectLike.js"),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable,c=i(function(){return arguments}())?i:function(e){return o(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},"../../node_modules/lodash/isArray.js":e=>{var t=Array.isArray;e.exports=t},"../../node_modules/lodash/isArrayLike.js":(e,t,n)=>{var i=n("../../node_modules/lodash/isFunction.js"),o=n("../../node_modules/lodash/isLength.js");e.exports=function isArrayLike(e){return null!=e&&o(e.length)&&!i(e)}},"../../node_modules/lodash/isBuffer.js":(e,t,n)=>{e=n.nmd(e);var i=n("../../node_modules/lodash/_root.js"),o=n("../../node_modules/lodash/stubFalse.js"),r=t&&!t.nodeType&&t,s=r&&e&&!e.nodeType&&e,a=s&&s.exports===r?i.Buffer:void 0,c=(a?a.isBuffer:void 0)||o;e.exports=c},"../../node_modules/lodash/isEqual.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseIsEqual.js");e.exports=function isEqual(e,t){return i(e,t)}},"../../node_modules/lodash/isFunction.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseGetTag.js"),o=n("../../node_modules/lodash/isObject.js");e.exports=function isFunction(e){if(!o(e))return!1;var t=i(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},"../../node_modules/lodash/isLength.js":e=>{e.exports=function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},"../../node_modules/lodash/isMap.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseIsMap.js"),o=n("../../node_modules/lodash/_baseUnary.js"),r=n("../../node_modules/lodash/_nodeUtil.js"),s=r&&r.isMap,a=s?o(s):i;e.exports=a},"../../node_modules/lodash/isObject.js":e=>{e.exports=function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},"../../node_modules/lodash/isObjectLike.js":e=>{e.exports=function isObjectLike(e){return null!=e&&"object"==typeof e}},"../../node_modules/lodash/isSet.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseIsSet.js"),o=n("../../node_modules/lodash/_baseUnary.js"),r=n("../../node_modules/lodash/_nodeUtil.js"),s=r&&r.isSet,a=s?o(s):i;e.exports=a},"../../node_modules/lodash/isSymbol.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseGetTag.js"),o=n("../../node_modules/lodash/isObjectLike.js");e.exports=function isSymbol(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==i(e)}},"../../node_modules/lodash/isTypedArray.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseIsTypedArray.js"),o=n("../../node_modules/lodash/_baseUnary.js"),r=n("../../node_modules/lodash/_nodeUtil.js"),s=r&&r.isTypedArray,a=s?o(s):i;e.exports=a},"../../node_modules/lodash/keys.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_arrayLikeKeys.js"),o=n("../../node_modules/lodash/_baseKeys.js"),r=n("../../node_modules/lodash/isArrayLike.js");e.exports=function keys(e){return r(e)?i(e):o(e)}},"../../node_modules/lodash/keysIn.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_arrayLikeKeys.js"),o=n("../../node_modules/lodash/_baseKeysIn.js"),r=n("../../node_modules/lodash/isArrayLike.js");e.exports=function keysIn(e){return r(e)?i(e,!0):o(e)}},"../../node_modules/lodash/memoize.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_MapCache.js");function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var memoized=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=memoized.cache;if(o.has(i))return o.get(i);var r=e.apply(this,n);return memoized.cache=o.set(i,r)||o,r};return memoized.cache=new(memoize.Cache||i),memoized}memoize.Cache=i,e.exports=memoize},"../../node_modules/lodash/pick.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_basePick.js"),o=n("../../node_modules/lodash/_flatRest.js")((function(e,t){return null==e?{}:i(e,t)}));e.exports=o},"../../node_modules/lodash/property.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseProperty.js"),o=n("../../node_modules/lodash/_basePropertyDeep.js"),r=n("../../node_modules/lodash/_isKey.js"),s=n("../../node_modules/lodash/_toKey.js");e.exports=function property(e){return r(e)?i(s(e)):o(e)}},"../../node_modules/lodash/stubArray.js":e=>{e.exports=function stubArray(){return[]}},"../../node_modules/lodash/stubFalse.js":e=>{e.exports=function stubFalse(){return!1}},"../../node_modules/lodash/toFinite.js":(e,t,n)=>{var i=n("../../node_modules/lodash/toNumber.js"),o=1/0;e.exports=function toFinite(e){return e?(e=i(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},"../../node_modules/lodash/toInteger.js":(e,t,n)=>{var i=n("../../node_modules/lodash/toFinite.js");e.exports=function toInteger(e){var t=i(e),n=t%1;return t==t?n?t-n:t:0}},"../../node_modules/lodash/toNumber.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseTrim.js"),o=n("../../node_modules/lodash/isObject.js"),r=n("../../node_modules/lodash/isSymbol.js"),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=function toNumber(e){if("number"==typeof e)return e;if(r(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=a.test(e);return n||c.test(e)?d(e.slice(2),n?2:8):s.test(e)?NaN:+e}},"../../node_modules/lodash/toString.js":(e,t,n)=>{var i=n("../../node_modules/lodash/_baseToString.js");e.exports=function toString(e){return null==e?"":i(e)}},"../../js-adapter/out/src/api/api-exposer/api-consumer.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiConsumer=void 0;t.ApiConsumer=class ApiConsumer{constructor(e){this.strategy=e,this.consume=async e=>(await this.strategy.getExposedFunctions(e)).reduce(((t,n)=>({...t,[n.key]:this.strategy.createFunction(n,e)})),{})}}},"../../js-adapter/out/src/api/api-exposer/api-exposer.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiExposer=void 0;const i=n("../../js-adapter/out/src/api/api-exposer/decorators.js");t.ApiExposer=class ApiExposer{constructor(e){this.strategy=e,this.exposeInstance=async(e,t)=>{const n=(0,i.getExposedProperties)(e),o=await Promise.all(n.map((async({key:n,options:i})=>({key:n,options:await this.strategy.exposeFunction(e[n].bind(e),{key:n,options:i,meta:t})}))));await this.strategy.exposeMeta(t,o)}}}},"../../js-adapter/out/src/api/api-exposer/decorators.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expose=t.getExposedProperties=void 0;const n=Symbol("exposedProperties");t.getExposedProperties=e=>e[n]||e.prototype[n]||[];t.expose=e=>(t,i,o)=>{t[n]=t[n]||[],t[n].push({key:i,descriptor:o,options:e})}},"../../js-adapter/out/src/api/api-exposer/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/api-exposer/api-consumer.js"),t),o(n("../../js-adapter/out/src/api/api-exposer/api-exposer.js"),t),o(n("../../js-adapter/out/src/api/api-exposer/strategies/index.js"),t),o(n("../../js-adapter/out/src/api/api-exposer/decorators.js"),t)},"../../js-adapter/out/src/api/api-exposer/strategies/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/api-exposer/strategies/openfin-channels/index.js"),t)},"../../js-adapter/out/src/api/api-exposer/strategies/openfin-channels/channels-consumer.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelsConsumer=void 0;t.ChannelsConsumer=class ChannelsConsumer{constructor(e){this.channel=e,this.getExposedFunctions=async e=>{const{id:t}=e,{props:n}=await this.channel.dispatch(`api-meta:${t}`);return n},this.createFunction=e=>(...t)=>{const{action:n}=e.options;return this.channel.dispatch(n,{args:t})}}}},"../../js-adapter/out/src/api/api-exposer/strategies/openfin-channels/channels-exposer.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelsExposer=void 0;t.ChannelsExposer=class ChannelsExposer{constructor(e){this.channelProviderOrClient=e,this.exposeFunction=async(e,t)=>{const{key:n,options:i,meta:o}=t,{id:r}=o,s=`${r}.${i?.action||n}`;return await this.channelProviderOrClient.register(s,(async({args:t})=>e(...t))),{action:s}},this.exposeMeta=async({id:e},t)=>{const n=`api-meta:${e}`;await this.channelProviderOrClient.register(n,(()=>({props:t})))}}}},"../../js-adapter/out/src/api/api-exposer/strategies/openfin-channels/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/api-exposer/strategies/openfin-channels/channels-consumer.js"),t),o(n("../../js-adapter/out/src/api/api-exposer/strategies/openfin-channels/channels-exposer.js"),t)},"../../js-adapter/out/src/api/application/Factory.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationModule=void 0;const i=n("../../js-adapter/out/src/api/base.js"),o=n("../../js-adapter/out/src/util/validate.js"),r=n("../../js-adapter/out/src/api/application/Instance.js");class ApplicationModule extends i.Base{async wrap(e){this.wire.sendAction("wrap-application").catch((e=>{}));const t=(0,o.validateIdentity)(e);if(t)throw new Error(t);return new r.Application(this.wire,e)}wrapSync(e){this.wire.sendAction("wrap-application-sync").catch((e=>{}));const t=(0,o.validateIdentity)(e);if(t)throw new Error(t);return new r.Application(this.wire,e)}async _create(e){return void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&void 0===e.isPlatformController&&(e.autoShow=!0),await this.wire.sendAction("create-application",e),this.wrap({uuid:e.uuid})}create(e){return console.warn("Deprecation Warning: fin.Application.create is deprecated. Please use fin.Application.start"),this.wire.sendAction("application-create").catch((e=>{})),this._create(e)}async start(e){this.wire.sendAction("start-application").catch((e=>{}));const t=await this._create(e);return await this.wire.sendAction("run-application",{uuid:e.uuid}),t}async startManyManifests(e,t){return this.wire.sendAction("run-applications",{applications:e,opts:t}).then((()=>{}))}getCurrent(){return this.wire.sendAction("get-current-application").catch((e=>{})),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("get-current-application-sync").catch((e=>{})),this.wrapSync({uuid:this.wire.me.uuid})}async startFromManifest(e,t){this.wire.sendAction("application-start-from-manifest").catch((e=>{}));const n=await this._createFromManifest(e);return await n._run(t),n}createFromManifest(e){return console.warn("Deprecation Warning: fin.Application.createFromManifest is deprecated. Please use fin.Application.startFromManifest"),this.wire.sendAction("application-create-from-manifest").catch((e=>{})),this._createFromManifest(e)}_createFromManifest(e){return this.wire.sendAction("get-application-manifest",{manifestUrl:e}).then((({payload:e})=>{const t=e.data.platform?e.data.platform.uuid:e.data.startup_app.uuid;return this.wrap({uuid:t})})).then((t=>(t._manifestUrl=e,t)))}}t.ApplicationModule=ApplicationModule},"../../js-adapter/out/src/api/application/Instance.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Application=void 0;const i=n("../../js-adapter/out/src/api/base.js"),o=n("../../js-adapter/out/src/api/window/index.js"),r=n("../../js-adapter/out/src/api/view/index.js");class Application extends i.EmitterBase{constructor(e,t){super(e,"application",t.uuid),this.identity=t,this.window=new o._Window(this.wire,{uuid:this.identity.uuid,name:this.identity.uuid})}windowListFromIdentityList(e){const t=[];return e.forEach((e=>{t.push(new o._Window(this.wire,{uuid:e.uuid,name:e.name}))})),t}isRunning(){return this.wire.sendAction("is-application-running",this.identity).then((({payload:e})=>e.data))}async quit(e=!1){try{await this._close(e),await this.wire.sendAction("destroy-application",{force:e,...this.identity})}catch(e){if(!["Remote connection has closed","Could not locate the requested application"].some((t=>e.message.includes(t))))throw e}}async _close(e=!1){try{await this.wire.sendAction("close-application",{force:e,...this.identity})}catch(e){if(!e.message.includes("Remote connection has closed"))throw e}}close(e=!1){return console.warn("Deprecation Warning: Application.close is deprecated Please use Application.quit"),this.wire.sendAction("application-close",this.identity).catch((e=>{})),this._close(e)}getChildWindows(){return this.wire.sendAction("get-child-windows",this.identity).then((({payload:e})=>{const t=[];return e.data.forEach((e=>{t.push({uuid:this.identity.uuid,name:e})})),this.windowListFromIdentityList(t)}))}getManifest(){return this.wire.sendAction("get-application-manifest",this.identity).then((({payload:e})=>e.data))}getParentUuid(){return this.wire.sendAction("get-parent-application",this.identity).then((({payload:e})=>e.data))}getShortcuts(){return this.wire.sendAction("get-shortcuts",this.identity).then((({payload:e})=>e.data))}async getViews(){const{payload:e}=await this.wire.sendAction("application-get-views",this.identity);return e.data.map((e=>new r.View(this.wire,e)))}getZoomLevel(){return this.wire.sendAction("get-application-zoom-level",this.identity).then((({payload:e})=>e.data))}getWindow(){return this.wire.sendAction("application-get-window",this.identity).catch((e=>{})),Promise.resolve(this.window)}registerUser(e,t){return this.wire.sendAction("register-user",{userName:e,appName:t,...this.identity}).then((()=>{}))}removeTrayIcon(){return this.wire.sendAction("remove-tray-icon",this.identity).then((()=>{}))}restart(){return this.wire.sendAction("restart-application",this.identity).then((()=>{}))}run(){return console.warn("Deprecation Warning: Application.run is deprecated Please use fin.Application.start"),this.wire.sendAction("application-run",this.identity).catch((e=>{})),this._run()}_run(e={}){return this.wire.sendAction("run-application",{manifestUrl:this._manifestUrl,opts:e,...this.identity}).then((()=>{}))}scheduleRestart(){return this.wire.sendAction("relaunch-on-close",this.identity).then((()=>{}))}async sendApplicationLog(){const{payload:e}=await this.wire.sendAction("send-application-log",this.identity);return e.data}async setJumpList(e){await this.wire.sendAction("set-jump-list",{config:e,...this.identity})}setTrayIcon(e){return this.wire.sendAction("set-tray-icon",{enabledIcon:e,...this.identity}).then((()=>{}))}async setTrayIconToolTip(e){await this.wire.sendAction("set-tray-icon-tooltip",{...this.identity,toolTip:e})}setShortcuts(e){return this.wire.sendAction("set-shortcuts",{data:e,...this.identity}).then((()=>{}))}async setShortcutQueryParams(e){await this.wire.sendAction("set-shortcut-query-args",{data:e,...this.identity})}setZoomLevel(e){return this.wire.sendAction("set-application-zoom-level",{level:e,...this.identity}).then((()=>{}))}async setAppLogUsername(e){await this.wire.sendAction("set-app-log-username",{data:e,...this.identity})}getTrayIconInfo(){return this.wire.sendAction("get-tray-icon-info",this.identity).then((({payload:e})=>e.data))}hasTrayIcon(){return this.wire.sendAction("has-tray-icon",this.identity).then((({payload:e})=>e.data))}terminate(){return this.wire.sendAction("terminate-application",this.identity).then((()=>{}))}wait(){return this.wire.sendAction("wait-for-hung-application",this.identity).then((()=>{}))}getInfo(){return this.wire.sendAction("get-info",this.identity).then((({payload:e})=>e.data))}async getProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("application-get-process-info",this.identity);return e}async setFileDownloadLocation(e){const{name:t}=this.wire.me,n={uuid:this.identity.uuid,name:t};await this.wire.sendAction("set-file-download-location",{...n,downloadLocation:e})}async getFileDownloadLocation(){const{payload:{data:e}}=await this.wire.sendAction("get-file-download-location",this.identity);return e}async showTrayIconPopupMenu(e){const{name:t}=this.wire.me,n={uuid:this.identity.uuid,name:t},{payload:i}=await this.wire.sendAction("show-tray-icon-popup-menu",{...n,options:e});return i.data}async closeTrayIconPopupMenu(){const{name:e}=this.wire.me,t={uuid:this.identity.uuid,name:e};await this.wire.sendAction("close-tray-icon-popup-menu",{...t})}}t.Application=Application},"../../js-adapter/out/src/api/application/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/application/Factory.js"),t),o(n("../../js-adapter/out/src/api/application/Instance.js"),t)},"../../js-adapter/out/src/api/base.js":function(e,t){"use strict";var n,i,o=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},r=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Reply=t.EmitterBase=t.Base=void 0;class Base{constructor(e){this.isNodeEnvironment=()=>"node"===this.wire.environment.type,this.isOpenFinEnvironment=()=>"openfin"===this.wire.environment.type,this.isBrowserEnvironment=()=>"other"===this.wire.environment.type,this.wire=e}get fin(){return this.wire.getFin()}get me(){return this.wire.me}}t.Base=Base;t.EmitterBase=class EmitterBase extends Base{constructor(e,t,...s){super(e),this.topic=t,n.set(this,void 0),i.set(this,void 0),this.eventNames=()=>this.hasEmitter()?this.getOrCreateEmitter().eventNames():[],this.emit=(e,t,...n)=>!!this.hasEmitter()&&this.getOrCreateEmitter().emit(e,t,...n),this.hasEmitter=()=>this.wire.eventAggregator.has(r(this,n,"f")),this.getOrCreateEmitter=()=>this.wire.eventAggregator.getOrCreate(r(this,n,"f")),this.listeners=e=>this.hasEmitter()?this.getOrCreateEmitter().listeners(e):[],this.listenerCount=e=>this.hasEmitter()?this.getOrCreateEmitter().listenerCount(e):0,this.registerEventListener=async(e,t={},n,i)=>{const o={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e},r=this.getOrCreateEmitter();n(r);try{await this.wire.sendAction("subscribe-to-desktop-event",o)}catch(e){throw i(r),this.deleteEmitterIfNothingRegistered(r),e}},this.deregisterEventListener=async(e,t={})=>{if(this.hasEmitter()){const n={...this.identity,timestamp:t.timestamp||Date.now(),topic:this.topic,type:e};return await this.wire.sendAction("unsubscribe-to-desktop-event",n).catch((()=>null)),this.getOrCreateEmitter()}return Promise.resolve()},o(this,n,[t,...s],"f"),o(this,i,new WeakMap,"f")}async on(e,t,n){return await this.registerEventListener(e,n,(n=>{n.on(e,t)}),(n=>{n.removeListener(e,t)})),this}async addListener(e,t,n){return this.on(e,t,n)}async once(e,t,n){const deregister=()=>this.deregisterEventListener(e);return r(this,i,"f").set(t,deregister),await this.registerEventListener(e,n,(n=>{n.once(e,deregister),n.once(e,t)}),(n=>{n.removeListener(e,deregister),n.removeListener(e,t)})),this}async prependListener(e,t,n){return await this.registerEventListener(e,n,(n=>{n.prependListener(e,t)}),(n=>{n.removeListener(e,t)})),this}async prependOnceListener(e,t,n){const deregister=()=>this.deregisterEventListener(e);return r(this,i,"f").set(t,deregister),await this.registerEventListener(e,n,(n=>{n.prependOnceListener(e,t),n.once(e,deregister)}),(n=>{n.removeListener(e,t),n.removeListener(e,deregister)})),this}async removeListener(e,t,n){const o=await this.deregisterEventListener(e,n);if(o){o.removeListener(e,t);const n=r(this,i,"f").get(t);n&&o.removeListener(e,n),this.deleteEmitterIfNothingRegistered(o)}return this}async deregisterAllListeners(e){const t={...this.identity,type:e,topic:this.topic};if(this.hasEmitter()){const e=this.getOrCreateEmitter(),n=e.listenerCount(t.type),i=[];for(let e=0;e<n;e++)i.push(this.wire.sendAction("unsubscribe-to-desktop-event",t).catch((()=>null)));return await Promise.all(i),e}}async removeAllListeners(e){const removeByEvent=async e=>{const t=await this.deregisterAllListeners(e);t&&(t.removeAllListeners(e),this.deleteEmitterIfNothingRegistered(t))};if(e)await removeByEvent(e);else if(this.hasEmitter()){const e=this.getOrCreateEmitter().eventNames();await Promise.all(e.map(removeByEvent))}return this}deleteEmitterIfNothingRegistered(e){0===e.eventNames().length&&this.wire.eventAggregator.delete(r(this,n,"f"))}},n=new WeakMap,i=new WeakMap;t.Reply=class Reply{}},"../../js-adapter/out/src/api/clipboard/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Clipboard=void 0;const i=n("../../js-adapter/out/src/api/base.js");class Clipboard extends i.Base{async writeText(e){await this.wire.sendAction("clipboard-write-text",e)}async readText(e){const{payload:t}=await this.wire.sendAction("clipboard-read-text",{type:e});return t.data}async writeImage(e){await this.wire.sendAction("clipboard-write-image",e)}async readImage(e={format:"dataURL"}){const{payload:t}=await this.wire.sendAction("clipboard-read-image",e);return t.data}async writeHtml(e){await this.wire.sendAction("clipboard-write-html",e)}async readHtml(e){const{payload:t}=await this.wire.sendAction("clipboard-read-html",{type:e});return t.data}async writeRtf(e){await this.wire.sendAction("clipboard-write-rtf",e)}async readRtf(e){const{payload:t}=await this.wire.sendAction("clipboard-read-rtf",{type:e});return t.data}async write(e){await this.wire.sendAction("clipboard-write",e)}async getAvailableFormats(e){const{payload:t}=await this.wire.sendAction("clipboard-read-formats",{type:e});return t.data}}t.Clipboard=Clipboard},"../../js-adapter/out/src/api/events/emitterMap.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmitterMap=void 0;const i=n("events");function normalizeString(e){return Buffer.from(e).toString("base64")}t.EmitterMap=class EmitterMap{constructor(){this.storage=new Map}hashKeys(e){return e.map(normalizeString).join("/")}getOrCreate(e){const t=this.hashKeys(e);return this.storage.has(t)||this.storage.set(t,new i.EventEmitter),this.storage.get(t)}has(e){return this.storage.has(this.hashKeys(e))}delete(e){const t=this.hashKeys(e);return this.storage.delete(t)}}},"../../js-adapter/out/src/api/events/eventAggregator.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n("../../js-adapter/out/src/api/events/emitterMap.js");class EventAggregator extends i.EmitterMap{constructor(){super(...arguments),this.dispatchEvent=e=>{if(function isEventMessage(e){return"process-desktop-event"===e.action}(e)){const{payload:t}=e,n=function mapKeyFromEvent(e){const{topic:t}=e;if("frame"===t||"window"===t||"view"===t){const{uuid:n,name:i}=e;return[t,n,i]}if("application"===t){const{uuid:n}=e;return[t,n]}return[t]}(t);if(this.has(n))return this.getOrCreate(n).emit(t.type,t),!0}return!1}}}t.default=EventAggregator},"../../js-adapter/out/src/api/external-application/Factory.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalApplicationModule=void 0;const i=n("../../js-adapter/out/src/api/base.js"),o=n("../../js-adapter/out/src/api/external-application/Instance.js");class ExternalApplicationModule extends i.Base{wrap(e){return this.wire.sendAction("external-application-wrap").catch((e=>{})),Promise.resolve(new o.ExternalApplication(this.wire,{uuid:e}))}wrapSync(e){return this.wire.sendAction("external-application-wrap-sync").catch((e=>{})),new o.ExternalApplication(this.wire,{uuid:e})}}t.ExternalApplicationModule=ExternalApplicationModule},"../../js-adapter/out/src/api/external-application/Instance.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalApplication=void 0;const i=n("../../js-adapter/out/src/api/base.js");class ExternalApplication extends i.EmitterBase{constructor(e,t){super(e,"external-application",t.uuid),this.identity=t}getInfo(){return this.wire.sendAction("get-external-application-info",this.identity).then((({payload:e})=>e.data))}}t.ExternalApplication=ExternalApplication},"../../js-adapter/out/src/api/external-application/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/external-application/Factory.js"),t),o(n("../../js-adapter/out/src/api/external-application/Instance.js"),t)},"../../js-adapter/out/src/api/fin.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fin=void 0;const i=n("events"),o=n("../../js-adapter/out/src/api/system/index.js"),r=n("../../js-adapter/out/src/api/window/index.js"),s=n("../../js-adapter/out/src/api/application/index.js"),a=n("../../js-adapter/out/src/api/interappbus/index.js"),c=n("../../js-adapter/out/src/api/clipboard/index.js"),d=n("../../js-adapter/out/src/api/external-application/index.js"),l=n("../../js-adapter/out/src/api/frame/index.js"),u=n("../../js-adapter/out/src/api/global-hotkey/index.js"),p=n("../../js-adapter/out/src/api/view/index.js"),h=n("../../js-adapter/out/src/api/platform/index.js"),f=n("../../js-adapter/out/src/api/me.js"),w=n("../../js-adapter/out/src/api/interop/index.js"),y=n("../../js-adapter/out/src/api/snapshot-source/index.js"),m=n("../../js-adapter/out/src/api/notification-manager/index.js");class Fin extends i.EventEmitter{constructor(e){super(),this.wire=e,this.System=new o.System(e),this.Window=new r._WindowModule(e),this.Application=new s.ApplicationModule(e),this.InterApplicationBus=new a.InterApplicationBus(e),this.Clipboard=new c.Clipboard(e),this.ExternalApplication=new d.ExternalApplicationModule(e),this.Frame=new l._FrameModule(e),this.GlobalHotkey=new u.GlobalHotkey(e),this.Platform=new h.PlatformModule(e,this.InterApplicationBus.Channel),this.View=new p.ViewModule(e),this.Interop=new w.InteropModule(e),this.SnapshotSource=new y.SnapshotSourceModule(e),this.NotificationManager=new m.NotificationManagerModule(e),e.registerFin(this),this.me=(0,f.getMe)(e),e.on("disconnected",(()=>{this.emit("disconnected")}))}}t.Fin=Fin},"../../js-adapter/out/src/api/frame/Factory.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._FrameModule=void 0;const i=n("../../js-adapter/out/src/api/base.js"),o=n("../../js-adapter/out/src/util/validate.js"),r=n("../../js-adapter/out/src/api/frame/Instance.js");class _FrameModule extends i.Base{async wrap(e){this.wire.sendAction("frame-wrap").catch((e=>{}));const t=(0,o.validateIdentity)(e);if(t)throw new Error(t);return new r._Frame(this.wire,e)}wrapSync(e){this.wire.sendAction("frame-wrap-sync").catch((e=>{}));const t=(0,o.validateIdentity)(e);if(t)throw new Error(t);return new r._Frame(this.wire,e)}getCurrent(){return this.wire.sendAction("frame-get-current").catch((e=>{})),Promise.resolve(new r._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity()))}getCurrentSync(){return this.wire.sendAction("frame-get-current-sync").catch((e=>{})),new r._Frame(this.wire,this.wire.environment.getCurrentEntityIdentity())}}t._FrameModule=_FrameModule},"../../js-adapter/out/src/api/frame/Instance.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._Frame=void 0;const i=n("../../js-adapter/out/src/api/base.js");class _Frame extends i.EmitterBase{constructor(e,t){super(e,"frame",t.uuid,t.name),this.identity=t}getInfo(){return this.wire.sendAction("get-frame-info",this.identity).then((({payload:e})=>e.data))}getParentWindow(){return this.wire.sendAction("get-parent-window",this.identity).then((({payload:e})=>e.data))}}t._Frame=_Frame},"../../js-adapter/out/src/api/frame/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/frame/Factory.js"),t),o(n("../../js-adapter/out/src/api/frame/Instance.js"),t)},"../../js-adapter/out/src/api/global-hotkey/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalHotkey=void 0;const i=n("../../js-adapter/out/src/api/base.js");class GlobalHotkey extends i.EmitterBase{constructor(e){super(e,"global-hotkey")}async register(e,t){await this.on(e,t),await this.wire.sendAction("global-hotkey-register",{hotkey:e})}async unregister(e){await this.removeAllListeners(e),await this.wire.sendAction("global-hotkey-unregister",{hotkey:e})}async unregisterAll(){await Promise.all(this.eventNames().filter((e=>!("registered"===e||"unregistered"===e))).map((e=>this.removeAllListeners(e)))),await this.wire.sendAction("global-hotkey-unregister-all",{})}async isRegistered(e){const{payload:{data:t}}=await this.wire.sendAction("global-hotkey-is-registered",{hotkey:e});return t}}t.GlobalHotkey=GlobalHotkey},"../../js-adapter/out/src/api/interappbus/channel/channel-error.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelError=void 0;const i=n("../../js-adapter/out/src/transport/transport-errors.js");class ChannelError extends Error{constructor(e,t,n,o){super(e.message),this.action=t,this.dispatchPayload=n,this.name=this.constructor.name,"cause"in e&&e.cause instanceof Error&&(this.cause=e.cause),this.stack=i.RuntimeError.prepareStackTrace(this,o)}}t.ChannelError=ChannelError},"../../js-adapter/out/src/api/interappbus/channel/channel.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelBase=t.ProtectedItems=void 0;const i=n("../../js-adapter/out/src/transport/transport-errors.js"),resultOrPayload=e=>async(t,n,i)=>{const o=await e(t,n,i);return void 0===o?n:o};t.ProtectedItems=class ProtectedItems{constructor(e,t){this.providerIdentity=e,this.close=t}};class ChannelBase{static defaultAction(e){throw new Error(`No action registered at target for ${e}`)}constructor(){this.subscriptions=new Map}async processAction(e,t,n){try{const i=this.subscriptions.get(e),o=i??((t,n)=>(this.defaultAction??ChannelBase.defaultAction)(e,t,n)),r=this.preAction?await this.preAction(e,t,n):t,s=await o(r,n);return this.postAction?await this.postAction(e,s,n):s}catch(t){if(i.RuntimeError.trimEndCallSites(t,/Channel.*processAction/),this.errorMiddleware)return this.errorMiddleware(e,t,n);throw t}}beforeAction(e){if(this.preAction)throw new Error("Already registered beforeAction middleware");this.preAction=resultOrPayload(e)}onError(e){if(this.errorMiddleware)throw new Error("Already registered error middleware");this.errorMiddleware=e}afterAction(e){if(this.postAction)throw new Error("Already registered afterAction middleware");this.postAction=resultOrPayload(e)}remove(e){this.subscriptions.delete(e)}setDefaultAction(e){if(this.defaultAction)throw new Error("default action can only be set once");this.defaultAction=e}register(e,t){if(this.subscriptions.has(e))throw new Error(`Subscription already registered for action: ${e}. Unsubscribe before adding new subscription`);return this.subscriptions.set(e,t),!0}}t.ChannelBase=ChannelBase},"../../js-adapter/out/src/api/interappbus/channel/client.js":function(e,t,n){"use strict";var i,o,r,s=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelClient=void 0;const c=n("../../js-adapter/out/src/transport/transport-errors.js"),d=n("../../js-adapter/out/src/api/interappbus/channel/channel.js"),l=n("../../js-adapter/out/src/api/interappbus/channel/channel-error.js"),u=new Map;class ChannelClient extends d.ChannelBase{static closeChannelByEndpointId(e){const t=u.get(e);t&&s(t,r,"f").call(t)}static handleProviderDisconnect(e){for(const t of u.values())t.providerIdentity.channelId===e.channelId&&(t.disconnectListener(e),s(t,r,"f").call(t))}constructor(e,t,n){super(),i.set(this,void 0),o.set(this,void 0),this.processAction=(e,t,n)=>super.processAction(e,t,n),r.set(this,(()=>{u.delete(this.endpointId),s(this,o,"f").close()})),a(this,i,new d.ProtectedItems(e,t),"f"),this.disconnectListener=()=>{},this.endpointId=e.endpointId,a(this,o,n,"f"),u.set(this.endpointId,this),n.receive(this.processAction)}get providerIdentity(){return s(this,i,"f").providerIdentity}async dispatch(e,t){if(s(this,o,"f").isEndpointConnected(this.providerIdentity.channelId)){const n=c.RuntimeError.getCallSite();return s(this,o,"f").send(this.providerIdentity.channelId,e,t).catch((i=>{throw new l.ChannelError(i,e,t,n)}))}throw new Error("The client you are trying to dispatch from is disconnected from the target provider.")}onDisconnection(e){this.disconnectListener=t=>{try{e(t)}catch(e){throw new Error(`Error while calling the onDisconnection callback: ${e.message}`)}finally{this.disconnectListener=()=>{}}}}async disconnect(){await this.sendDisconnectAction(),s(this,r,"f").call(this)}async sendDisconnectAction(){const e=s(this,i,"f");await e.close()}static async wireClose(e,t,n){const{channelName:i,uuid:o,name:r}=t;await e.sendAction("disconnect-from-channel",{channelName:i,uuid:o,name:r,endpointId:n})}}t.ChannelClient=ChannelClient,i=new WeakMap,o=new WeakMap,r=new WeakMap},"../../js-adapter/out/src/api/interappbus/channel/connection-manager.js":function(e,t,n){"use strict";var i,o,r=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionManager=void 0;const c=n("../../js-adapter/out/src/util/exhaustive.js"),d=n("../../js-adapter/out/src/api/base.js"),l=n("../../js-adapter/out/src/api/interappbus/channel/protocols/classic/strategy.js"),u=n("../../js-adapter/out/src/api/interappbus/channel/protocols/rtc/strategy.js"),p=n("../../js-adapter/out/src/api/interappbus/channel/protocols/rtc/ice-manager.js"),h=n("../../js-adapter/out/src/api/interappbus/channel/provider.js"),f=n("../../js-adapter/out/src/api/interappbus/channel/protocols/classic/message-receiver.js"),w=n("../../js-adapter/out/src/api/interappbus/channel/protocols/protocol-manager.js"),y=a(n("../../js-adapter/out/src/api/interappbus/channel/protocols/combined/strategy.js"));class ConnectionManager extends d.Base{static getProtocolOptionsFromStrings(e){return e.map((e=>{switch(e){case"rtc":return u.RTCInfo;case"classic":return l.ClassicInfo;default:return(0,c.exhaustiveCheck)(e,["rtc","classic"])}}))}constructor(e){super(e),i.set(this,void 0),o.set(this,void 0),this.removeChannelFromProviderMap=e=>{this.providerMap.delete(e)},this.onmessage=e=>"process-channel-connection"===e.action&&(this.processChannelConnection(e),!0),this.providerMap=new Map,this.protocolManager=new w.ProtocolManager("node"===this.wire.environment.type?["classic"]:["rtc","classic"]),r(this,i,new f.MessageReceiver(e),"f"),r(this,o,new p.RTCICEManager(e),"f"),e.registerMessageHandler(this.onmessage.bind(this))}createProvider(e,t){const n=Object.assign(this.wire.environment.getDefaultChannelOptions().create,e||{}),o=this.protocolManager.getProviderProtocols(n?.protocols),r=o.map((e=>{switch(e){case"rtc":return new u.RTCStrategy;case"classic":return new l.ClassicStrategy(this.wire,s(this,i,"f"),t.channelId,t);default:return(0,c.exhaustiveCheck)(e,["rtc","classic"])}}));let a;if(2===r.length){const[e,t]=r;a=y.default.combine(e,t)}else{if(1!==r.length)throw new Error("failed to combine strategies");[a]=r}const d=new h.ChannelProvider(t,(()=>h.ChannelProvider.wireClose(this.wire,t.channelName)),a),p=t.channelId;return this.providerMap.set(p,{provider:d,strategy:a,supportedProtocols:ConnectionManager.getProtocolOptionsFromStrings(o)}),h.ChannelProvider.setProviderRemoval(d,this.removeChannelFromProviderMap.bind(this)),d}async createClientOffer(e){const t=this.protocolManager.getClientProtocols(e?.protocols);let n;return{offer:{supportedProtocols:await Promise.all(t.map((async e=>{switch(e){case"rtc":{const{rtcClient:e,channels:t,offer:i,rtcConnectionId:r,channelsOpened:a}=await s(this,o,"f").startClientOffer();return n={rtcClient:e,channels:t,channelsOpened:a},{type:"rtc",version:u.RTCInfo.version,payload:{offer:i,rtcConnectionId:r}}}case"classic":return{type:"classic",version:l.ClassicInfo.version};default:return(0,c.exhaustiveCheck)(e,["rtc","classic"])}}))),maxProtocols:2},rtc:n}}async createClientStrategy(e,t){t.endpointId||(t.endpointId=this.wire.environment.getNextMessageId(),s(this,i,"f").checkForPreviousClientConnection(t.channelId));const n=t.answer??{supportedProtocols:[{type:"classic",version:1}]},r=(await Promise.all(n.supportedProtocols.map((async n=>"rtc"===n.type&&e?(await s(this,o,"f").finishClientOffer(e.rtcClient,n.payload.answer,e.channelsOpened),new u.RTCStrategy):"classic"===n.type?new l.ClassicStrategy(this.wire,s(this,i,"f"),t.endpointId,t):null)))).filter((e=>null!==e));let a;if(e&&!r.some((e=>e instanceof u.RTCStrategy))&&e&&e.rtcClient.close(),r.length>=2)a=y.default.combine(r[0],r[1]);else{if(!r.length)throw new Error("No compatible protocols");[a]=r}const c={endpointIdentity:t,rtc:e};return a.addEndpoint(t.channelId,c),a}async processChannelConnection(e){const{clientIdentity:t,providerIdentity:n,ackToSender:i,payload:r,offer:a}=e.payload;t.endpointId?t.isLocalEndpointId=!1:(t.endpointId=this.wire.environment.getNextMessageId(),t.isLocalEndpointId=!0);const c=n.channelId,d=this.providerMap.get(c);if(!d)return i.payload.success=!1,i.payload.reason=`Channel "${n.channelName}" has been destroyed.`,this.wire.sendRaw(i);const{provider:p,strategy:f,supportedProtocols:w}=d;try{if(!(p instanceof h.ChannelProvider))throw Error("Cannot connect to a channel client");const e=a??{supportedProtocols:[{type:"classic",version:1}],maxProtocols:1},n=this.protocolManager.getCompatibleProtocols(w,e);if(!n.length)throw new Error("This provider does not support any of the offered protocols.");const c=await p.processConnection(t,r);i.payload.payload=i.payload.payload||{};let d={supportedProtocols:[],endpointPayloadPromise:Promise.resolve({endpointIdentity:t})};return d=await n.reduce((async(e,t)=>{const n=await e;if("rtc"===t.type){const{answer:e,rtcClient:i,channels:r}=await s(this,o,"f").createProviderAnswer(t.payload.rtcConnectionId,t.payload.offer);n.supportedProtocols.push({type:"rtc",version:u.RTCInfo.version,payload:{answer:e}}),n.endpointPayloadPromise=n.endpointPayloadPromise.then((e=>r.then((t=>({...e,rtc:{rtcClient:i,channels:t}})))))}else n.supportedProtocols.push({type:"classic",version:l.ClassicInfo.version});return n}),Promise.resolve(d)),d.endpointPayloadPromise.then((e=>f.addEndpoint(t.endpointId,e))),i.payload.payload.result=c,i.payload.payload.answer=d,this.wire.sendRaw(i)}catch(e){return i.payload.success=!1,i.payload.reason=e.message,this.wire.sendRaw(i)}}}t.ConnectionManager=ConnectionManager,i=new WeakMap,o=new WeakMap},"../../js-adapter/out/src/api/interappbus/channel/index.js":function(e,t,n){"use strict";var i,o,r,s=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Channel=void 0;const c=n("events"),d=n("../../js-adapter/out/src/util/lazy.js"),l=n("../../js-adapter/out/src/api/base.js"),u=n("../../js-adapter/out/src/api/interappbus/channel/client.js"),p=n("../../js-adapter/out/src/api/interappbus/channel/connection-manager.js"),h=n("../../js-adapter/out/src/api/interappbus/channel/provider.js");function retryDelay(e){const t=Math.floor(e/10),n=Math.min(3e4,500*2**t);return new Promise((e=>{setTimeout((()=>{e(!1)}),n)}))}class Channel extends l.EmitterBase{constructor(e){super(e,"channel"),i.set(this,void 0),o.set(this,new c.EventEmitter),r.set(this,new d.AsyncRetryableLazy((async()=>{await Promise.all([this.on("disconnected",(e=>{u.ChannelClient.handleProviderDisconnect(e)})),this.on("connected",((...e)=>{a(this,o,"f").emit("connected",...e)}))]).catch((()=>new Error("error setting up channel connection listeners")))}))),s(this,i,new p.ConnectionManager(e),"f")}async getAllChannels(){return this.wire.sendAction("get-all-channels").then((({payload:e})=>e.data))}async onChannelConnect(e){await this.on("connected",e)}async onChannelDisconnect(e){await this.on("disconnected",e)}async safeConnect(e,t,n){const i={count:0};do{let connectedListener=()=>{};const r=new Promise((t=>{connectedListener=n=>{e===n.channelName&&t(!0)},a(this,o,"f").on("connected",connectedListener)}));try{if(i.count>0){i.gotConnectedEvent=await Promise.race([retryDelay(i.count),r]);const t=await this.wire.sendAction("connect-to-channel",{...n,retryInfo:i});return console.log(`Successfully connected to channelName: ${e}`),t.payload.data}const t=this.wire.sendAction("connect-to-channel",n);i.originalMessageId=t.messageId;return(await t).payload.data}catch(n){if(!n.message.includes("internal-nack"))throw n;t&&0===i.count&&console.warn(`No channel found for channelName: ${e}. Waiting for connection...`)}finally{i.count+=1,a(this,o,"f").removeListener("connected",connectedListener)}}while(t);throw new Error(`No channel found for channelName: ${e}.`)}async connect(e,t={}){if(await a(this,r,"f").getValue(),!e||"string"!=typeof e)throw new Error("Please provide a channelName string to connect to a channel.");const n={wait:!0,...this.wire.environment.getDefaultChannelOptions().connect,...t},{offer:o,rtc:s}=await a(this,i,"f").createClientOffer(n);let c;(this.fin.me.isFrame||this.fin.me.isView||this.fin.me.isWindow)&&(c=(await this.fin.me.getInfo()).url);const d={channelName:e,...n,offer:o,connectionUrl:c},l=await this.safeConnect(e,n.wait,d),p=await a(this,i,"f").createClientStrategy(s,l),h=new u.ChannelClient(l,(()=>u.ChannelClient.wireClose(this.wire,l,l.endpointId)),p);return p.onEndpointDisconnect(l.channelId,(async()=>{try{await h.sendDisconnectAction()}catch(e){console.warn(`Something went wrong during disconnect for client with uuid: ${l.uuid} / name: ${l.name} / endpointId: ${l.endpointId}.`)}finally{u.ChannelClient.handleProviderDisconnect(l)}})),h}async create(e,t){if(!e)throw new Error("Please provide a channelName to create a channel");const{payload:{data:n}}=await this.wire.sendAction("create-channel",{channelName:e}),o=a(this,i,"f").createProvider(t,n);return this.on("client-disconnected",(t=>{t.channelName===e&&h.ChannelProvider.handleClientDisconnection(o,t)})),o}}t.Channel=Channel,i=new WeakMap,o=new WeakMap,r=new WeakMap},"../../js-adapter/out/src/api/interappbus/channel/protocols/classic/message-receiver.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageReceiver=void 0;const i=n("../../js-adapter/out/src/api/interappbus/channel/client.js"),o=n("../../js-adapter/out/src/api/base.js"),r=n("../../js-adapter/out/src/util/errors.js");class MessageReceiver extends o.Base{constructor(e){super(e),this.onmessage=e=>"process-channel-message"===e.action&&(this.processChannelMessage(e),!0),this.endpointMap=new Map,this.latestEndpointIdByChannelId=new Map,e.registerMessageHandler(this.onmessage.bind(this))}async processChannelMessage(e){const{senderIdentity:t,providerIdentity:n,action:i,ackToSender:o,payload:s,intendedTargetIdentity:a}=e.payload,c=a.channelId??a.endpointId??this.latestEndpointIdByChannelId.get(n.channelId),d=this.endpointMap.get(c);if(!d)return o.payload.success=!1,o.payload.reason=`Client connection with identity uuid: ${this.wire.me.uuid} / name: ${this.wire.me.name} / endpointId: ${c} no longer connected.`,o.payload.error=(0,r.errorToPOJO)(new Error(o.payload.reason)),this.wire.sendRaw(o);try{const e=await d(i,s,t);return o.payload.payload=o.payload.payload||{},o.payload.payload.result=e,this.wire.sendRaw(o)}catch(e){return o.payload.success=!1,o.payload.reason=e.message,o.payload.error=(0,r.errorToPOJO)(e),this.wire.sendRaw(o)}}addEndpoint(e,t,n){this.endpointMap.set(n,e),t!==n&&this.latestEndpointIdByChannelId.set(t,n)}removeEndpoint(e,t){this.endpointMap.delete(t),this.latestEndpointIdByChannelId.get(e)===t&&this.latestEndpointIdByChannelId.delete(e)}checkForPreviousClientConnection(e){const t=this.latestEndpointIdByChannelId.get(e);t&&(i.ChannelClient.closeChannelByEndpointId(t),console.warn("You have created a second connection to an older provider. First connection has been removed from the clientMap"),console.warn("If the provider calls publish(), you may receive multiple messages."))}}t.MessageReceiver=MessageReceiver},"../../js-adapter/out/src/api/interappbus/channel/protocols/classic/strategy.js":function(e,t){"use strict";var n,i,o,r=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ClassicInfo=t.ClassicStrategy=void 0;t.ClassicStrategy=class ClassicStrategy{constructor(e,t,a,c){this.messageReceiver=t,this.endpointId=a,this.providerIdentity=c,n.set(this,void 0),i.set(this,new Map),o.set(this,new Map),this.send=async(e,t,r)=>{const a=s(this,i,"f").get(e);if(!a)throw new Error(`Could not locate routing info for endpoint ${e}`);const c={...a};c.isLocalEndpointId&&delete c.endpointId,delete c.isLocalEndpointId;const d=s(this,n,"f").sendAction("send-channel-message",{...c,providerIdentity:this.providerIdentity,action:t,payload:r});s(this,o,"f").get(e)?.add(d);return(await d.catch((e=>{if("cause"in e)throw e;throw new Error(e.message)})).finally((()=>{s(this,o,"f").get(e)?.delete(d)}))).payload.data.result},this.close=async()=>{this.messageReceiver.removeEndpoint(this.providerIdentity.channelId,this.endpointId),[...s(this,i,"f").keys()].forEach((e=>this.closeEndpoint(e))),r(this,i,new Map,"f")},r(this,n,e,"f")}onEndpointDisconnect(e,t){}receive(e){this.messageReceiver.addEndpoint(e,this.providerIdentity.channelId,this.endpointId)}async closeEndpoint(e){const t=s(this,i,"f").get(e);s(this,i,"f").delete(e);const n=s(this,o,"f").get(e);n?.forEach((n=>{const i=`Channel connection with identity uuid: ${t?.uuid} / name: ${t?.name} / endpointId: ${e} no longer connected.`;n.cancel(new Error(i))}))}isEndpointConnected(e){return s(this,i,"f").has(e)}addEndpoint(e,t){s(this,i,"f").set(e,t.endpointIdentity),s(this,o,"f").set(e,new Set)}isValidEndpointPayload(e){return"string"==typeof e?.endpointIdentity?.endpointId||"string"==typeof e?.endpointIdentity?.channelId}},n=new WeakMap,i=new WeakMap,o=new WeakMap,t.ClassicInfo={version:5,minimumVersion:0,type:"classic"}},"../../js-adapter/out/src/api/interappbus/channel/protocols/combined/strategy.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class CombinedStrategy{static combine(e,t){return new CombinedStrategy(e,t)}constructor(e,t){this.primary=e,this.secondary=t}onEndpointDisconnect(e,t){this.primary.onEndpointDisconnect(e,(()=>{this.secondary.isEndpointConnected(e)||t()})),this.secondary.onEndpointDisconnect(e,(()=>{this.primary.isEndpointConnected(e)||t()}))}isValidEndpointPayload(e){return this.primary.isValidEndpointPayload(e)||this.secondary.isValidEndpointPayload(e)}async closeEndpoint(e){await this.primary.closeEndpoint(e),await this.secondary.closeEndpoint(e)}isEndpointConnected(e){return this.primary.isEndpointConnected(e)||this.secondary.isEndpointConnected(e)}async addEndpoint(e,t){this.primary.isValidEndpointPayload(t)&&await this.primary.addEndpoint(e,t),this.secondary.isValidEndpointPayload(t)&&await this.secondary.addEndpoint(e,t)}receive(e){this.primary.receive(e),this.secondary.receive(e)}send(e,t,n){return this.primary.isEndpointConnected(e)?this.primary.send(e,t,n):this.secondary.send(e,t,n)}async close(){await Promise.all([this.primary.close(),this.secondary.close()])}}t.default=CombinedStrategy},"../../js-adapter/out/src/api/interappbus/channel/protocols/endpoint/strategy.js":function(e,t){"use strict";var n,i,o,r=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},s=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.EndpointStrategy=void 0;t.EndpointStrategy=class EndpointStrategy{constructor(e,t,a){this.EndpointType=e,this.StrategyName=a,n.set(this,null),i.set(this,new Map),o.set(this,!0),this.send=async(e,t,n)=>this.getEndpointById(e).send(t,n),this.close=async()=>{r(this,o,"f")&&(r(this,i,"f").forEach((e=>e.close())),s(this,i,new Map,"f")),s(this,o,!1,"f")},this.isValidEndpointPayload=t}onEndpointDisconnect(e,t){this.getEndpointById(e).onDisconnect(t)}receive(e){if(r(this,n,"f"))throw new Error(`You have already set a listener for this ${this.StrategyName} Strategy`);s(this,n,e,"f"),r(this,i,"f").forEach((e=>e.receive(r(this,n,"f"))))}getEndpointById(e){const t=r(this,i,"f").get(e);if(!t)throw new Error(`Client with endpoint id ${e} is not connected`);return t}get connected(){return r(this,o,"f")}isEndpointConnected(e){return r(this,i,"f").has(e)}addEndpoint(e,t){if(!r(this,o,"f"))return void console.warn(`Adding endpoint to disconnected ${this.StrategyName} Strategy`);const s=new this.EndpointType(t);r(this,n,"f")&&s.receive(r(this,n,"f")),r(this,i,"f").set(e,s)}async closeEndpoint(e){r(this,i,"f").delete(e)}},n=new WeakMap,i=new WeakMap,o=new WeakMap},"../../js-adapter/out/src/api/interappbus/channel/protocols/protocol-manager.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolManager=void 0;t.ProtocolManager=class ProtocolManager{constructor(e){this.ProtocolsInPreferenceOrder=e,this.DefaultClientProtocols=["classic"],this.DefaultProviderProtocols=["classic"],this.getClientProtocols=e=>{const t=e?this.ProtocolsInPreferenceOrder.filter((t=>e.includes(t))):this.DefaultClientProtocols;if(!t.length)throw new Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getProviderProtocols=e=>{const t=e?this.ProtocolsInPreferenceOrder.filter((t=>e.includes(t))):this.DefaultProviderProtocols;if(!t.length)throw new Error(`No valid protocols were passed in. Accepted values are: ${this.ProtocolsInPreferenceOrder.join(", ")}.`);return t},this.getCompatibleProtocols=(e,t)=>t.supportedProtocols.filter((t=>e.some((e=>e.type===t.type&&t.version>=e.minimumVersion&&e.version>=(t.minimumVersion??0))))).slice(0,t.maxProtocols)}}},"../../js-adapter/out/src/api/interappbus/channel/protocols/rtc/endpoint.js":function(e,t,n){"use strict";var i,o,r=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},s=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.RTCEndpoint=void 0;const a=n("../../js-adapter/out/src/util/errors.js");t.RTCEndpoint=class RTCEndpoint{static isValidEndpointPayload(e){const isObject=e=>"object"==typeof e&&null!==e;return isObject(e)&&isObject(e.endpointIdentity)&&isObject(e.rtc)&&"string"==typeof e.endpointIdentity.endpointId}constructor({rtc:e,endpointIdentity:t}){this.responseMap=new Map,i.set(this,null),o.set(this,void 0),this.connectionStateChangeHandler=e=>{"connected"!==this.rtc.rtcClient.connectionState&&(this.rtc.rtcClient.removeEventListener("connectionstatechange",this.connectionStateChangeHandler),this.close(),r(this,o,"f")&&r(this,o,"f").call(this))},this.send=async(e,t)=>{const n=`message-${Math.random()}`,i=new Promise(((e,t)=>{this.responseMap.set(n,{resolve:e,reject:t})}));return this.rtc.channels.request.send(JSON.stringify({action:e,payload:t,messageId:n})),i},this.close=()=>{this.responseMap.forEach((e=>e.reject("Connection has closed."))),this.responseMap=new Map,this.rtc.channels.request.close(),this.rtc.channels.response.close(),this.rtc.rtcClient.close()},this.rtc=e,this.endpointIdentity=t,this.rtc.channels.response.addEventListener("message",(e=>{let{data:t}=e;e.data instanceof ArrayBuffer&&(t=(new TextDecoder).decode(e.data));const{messageId:n,payload:i,success:o,error:r}=JSON.parse(t),{resolve:s,reject:a}=this.responseMap.get(n)??{};s&&a?(this.responseMap.delete(n),o?s(i):a(r)):(console.log("Could not find id in responseMap."),console.log(e))})),this.rtc.channels.request.addEventListener("message",(async e=>{let{data:n}=e;e.data instanceof ArrayBuffer&&(n=(new TextDecoder).decode(e.data));const{messageId:o,action:s,payload:c}=JSON.parse(n);if(r(this,i,"f"))try{const e=await r(this,i,"f").call(this,s,c,t);this.rtc.channels.response.send(JSON.stringify({messageId:o,payload:e,success:!0}))}catch(e){"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:o,error:(0,a.errorToPOJO)(e),success:!1}))}else"open"===this.rtc.channels.response.readyState&&this.rtc.channels.response.send(JSON.stringify({messageId:o,success:!1,error:"Connection not ready."}))})),this.rtc.rtcClient.addEventListener("connectionstatechange",this.connectionStateChangeHandler),Object.values(this.rtc.channels).forEach((e=>{e.onclose=e=>{[...this.responseMap.values()].forEach((e=>e.reject(new Error("RTCDataChannel closed unexpectedly, this is most commonly caused by message size. Note: RTC Channels have a message size limit of ~255kB.")))),this.close(),r(this,o,"f")&&r(this,o,"f").call(this)}}))}onDisconnect(e){if(r(this,o,"f"))throw new Error("RTCEndpoint disconnectListener cannot be set twice.");s(this,o,e,"f")}receive(e){if(r(this,i,"f"))throw new Error("You have already set a listener for this RTC Endpoint.");s(this,i,e,"f")}get connected(){return"connected"===this.rtc.rtcClient.connectionState}},i=new WeakMap,o=new WeakMap},"../../js-adapter/out/src/api/interappbus/channel/protocols/rtc/ice-manager.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTCICEManager=void 0;const i=n("../../js-adapter/out/src/api/base.js");class RTCICEManager extends i.EmitterBase{constructor(e){super(e,"channel"),this.ensureChannelOpened=e=>new Promise(((t,n)=>{if("open"===e.readyState)t();else if("connecting"===e.readyState){const listener=()=>{e.removeEventListener("open",listener),t()};e.addEventListener("open",listener)}else n(new Error("This Channel has already closed"))}))}static createDataChannelPromise(e,t){let n;const i=new Promise((e=>{n=e})),listener=i=>{const openListener=()=>{i.channel.removeEventListener("open",openListener),n(i.channel)};i.channel.label===e&&(i.channel.addEventListener("open",openListener),t.removeEventListener("datachannel",listener))};return t.addEventListener("datachannel",listener),i}async listenForProviderIce(e,t){await this.on(this.createProviderEventName(e),t,{timestamp:Date.now()})}async raiseProviderIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createProviderEventName(e)),t)}async listenForClientIce(e,t){await this.on(this.createClientEventName(e),t,{timestamp:Date.now()})}async raiseClientIce(e,t){await this.wire.environment.raiseEvent(this.createRouteString(this.createClientEventName(e)),t)}cleanupIceListeners(e){this.removeAllListeners(this.createClientEventName(e)),this.removeAllListeners(this.createProviderEventName(e))}createClientEventName(e){return`ice-client-${e}`}createProviderEventName(e){return`ice-provider-${e}`}createRouteString(e){return`channel/${e}`}createRtcPeer(){return this.wire.environment.getRtcPeer()}async startClientOffer(){const e=Math.random().toString(),t=this.createRtcPeer();t.addEventListener("icecandidate",(async t=>{t.candidate&&await this.raiseClientIce(e,{candidate:t.candidate?.toJSON()})})),await this.listenForProviderIce(e,(async e=>{await t.addIceCandidate(e.candidate)}));const n={request:t.createDataChannel("request"),response:t.createDataChannel("response")},i=await t.createOffer();await t.setLocalDescription(i);const o=Promise.all([n.request,n.response].map(this.ensureChannelOpened)).then((()=>{}));return{rtcClient:t,channels:n,offer:i,rtcConnectionId:e,channelsOpened:o}}async finishClientOffer(e,t,n){return await e.setRemoteDescription(t),await n,!0}async createProviderAnswer(e,t){const n=this.createRtcPeer(),i=RTCICEManager.createDataChannelPromise("request",n),o=RTCICEManager.createDataChannelPromise("response",n);n.addEventListener("icecandidate",(async t=>{t.candidate&&await this.raiseProviderIce(e,{candidate:t.candidate?.toJSON()})})),await this.listenForClientIce(e,(async e=>{await n.addIceCandidate(e.candidate)})),await n.setRemoteDescription(t);const r=await n.createAnswer();await n.setLocalDescription(r);const s=Promise.all([i,o]).then((([t,n])=>(this.cleanupIceListeners(e),{request:t,response:n})));return{rtcClient:n,answer:r,channels:s}}}t.RTCICEManager=RTCICEManager},"../../js-adapter/out/src/api/interappbus/channel/protocols/rtc/strategy.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTCInfo=t.RTCStrategy=void 0;const i=n("../../js-adapter/out/src/api/interappbus/channel/protocols/rtc/endpoint.js"),o=n("../../js-adapter/out/src/api/interappbus/channel/protocols/endpoint/strategy.js");class RTCStrategy extends o.EndpointStrategy{constructor(){super(i.RTCEndpoint,i.RTCEndpoint.isValidEndpointPayload,"RTC")}}t.RTCStrategy=RTCStrategy,t.RTCInfo={version:2,minimumVersion:0,type:"rtc"}},"../../js-adapter/out/src/api/interappbus/channel/provider.js":function(e,t,n){"use strict";var i,o,r,s,a,c=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},d=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelProvider=void 0;const l=n("../../js-adapter/out/src/transport/transport-errors.js"),u=n("../../js-adapter/out/src/util/runtimeVersioning.js"),p=n("../../js-adapter/out/src/api/interappbus/channel/channel.js"),h=n("../../js-adapter/out/src/api/interappbus/channel/channel-error.js");class ChannelProvider extends p.ChannelBase{get connections(){return[...c(this,i,"f")]}static handleClientDisconnection(e,t){if(t?.endpointId){const{uuid:n,name:i,endpointId:o,isLocalEndpointId:r}=t;c(e,s,"f").call(e,{uuid:n,name:i,endpointId:o,isLocalEndpointId:r})}else{e.connections.filter((e=>e.uuid===t.uuid&&e.name===t.name)).forEach(c(e,s,"f"))}e.disconnectListener(t)}static setProviderRemoval(e,t){ChannelProvider.removalMap.set(e,t)}constructor(e,t,n){super(),i.set(this,void 0),o.set(this,void 0),r.set(this,void 0),s.set(this,(e=>{const t=this.connections.filter((t=>t.endpointId!==e.endpointId));c(this,r,"f").closeEndpoint(e.endpointId),d(this,i,t,"f")})),this.processAction=async(e,t,n)=>(ChannelProvider.clientIsMultiRuntime(n)&&!(0,u.runtimeUuidMeetsMinimumRuntimeVersion)(n.runtimeUuid,"18.87.56.0")?this.handleMultiRuntimeLegacyClient(n):this.checkForClientConnection(n),super.processAction(e,t,n)),a.set(this,(()=>{c(this,r,"f").close();const e=ChannelProvider.removalMap.get(this);e&&e()})),d(this,o,new p.ProtectedItems(e,t),"f"),this.connectListener=()=>{},this.disconnectListener=()=>{},d(this,i,[],"f"),d(this,r,n,"f"),n.receive(this.processAction)}dispatch(e,t,n){const i=e.endpointId??this.getEndpointIdForOpenFinId(e,t);if(i&&c(this,r,"f").isEndpointConnected(i)){const e=l.RuntimeError.getCallSite();return c(this,r,"f").send(i,t,n).catch((i=>{throw new h.ChannelError(i,t,n,e)}))}return Promise.reject(new Error(`Client connection with identity uuid: ${e.uuid} / name: ${e.name} / endpointId: ${i} no longer connected.`))}async processConnection(e,t){return c(this,i,"f").push(e),this.connectListener(e,t)}publish(e,t){return this.connections.map((n=>c(this,r,"f").send(n.endpointId,e,t)))}onConnection(e){this.connectListener=e}onDisconnection(e){this.disconnectListener=e}async destroy(){const e=c(this,o,"f"),{channelName:t}=e.providerIdentity;d(this,i,[],"f"),await e.close(),c(this,a,"f").call(this)}async getAllClientInfo(){return this.connections.map((e=>{const{uuid:t,name:n,endpointId:i,entityType:o,connectionUrl:r}=e;return{uuid:t,name:n,endpointId:i,entityType:o,connectionUrl:r}}))}checkForClientConnection(e){if(!this.isClientConnected(e))throw new Error(`This action was sent from a client that is not connected to the provider.\n                    Client Identity: {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}isClientConnected(e){return ChannelProvider.clientIdentityIncludesEndpointId(e)?this.connections.some((t=>t.endpointId===e.endpointId&&t.uuid===e.uuid&&t.name===e.name)):this.isLegacyClientConnected(e)}isLegacyClientConnected(e){return this.connections.some((t=>t.uuid===e.uuid&&t.name===e.name))}handleMultiRuntimeLegacyClient(e){if(!this.isLegacyClientConnected(e))throw new Error(`This action was sent from a client that is not connected to the provider. Client Identity:\n                    {uuid: ${e.uuid}, name: ${e.name}, endpointId: ${e.endpointId}}`)}getEndpointIdForOpenFinId(e,t){const n=this.connections.filter((t=>t.name===e.name&&t.uuid===e.uuid));if(n.length>=2){const n=c(this,o,"f"),{uuid:i,name:r}=e,s=n?.providerIdentity.uuid,a=n?.providerIdentity.name;console.warn(`WARNING: Dispatch call may have unintended results. The "to" argument of your dispatch call is missing the\n                "endpointId" parameter. The identity you are dispatching to ({uuid: ${i}, name: ${r}})\n                has multiple channelClients for this channel. Your dispatched action: (${t}) from the provider:\n                ({uuid: ${s}, name: ${a}}) will only be processed by the most recently-created client.`)}return n.pop()?.endpointId}static clientIdentityIncludesEndpointId(e){return void 0!==e.endpointId}static clientIsMultiRuntime(e){return void 0!==e.runtimeUuid}static async wireClose(e,t){await e.sendAction("destroy-channel",{channelName:t})}}t.ChannelProvider=ChannelProvider,i=new WeakMap,o=new WeakMap,r=new WeakMap,s=new WeakMap,a=new WeakMap,ChannelProvider.removalMap=new WeakMap},"../../js-adapter/out/src/api/interappbus/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterAppPayload=t.InterApplicationBus=void 0;const i=n("events"),o=n("../../js-adapter/out/src/api/base.js"),r=n("../../js-adapter/out/src/util/ref-counter.js"),s=n("../../js-adapter/out/src/api/interappbus/channel/index.js"),a=n("../../js-adapter/out/src/util/validate.js");class InterApplicationBus extends o.Base{constructor(e){super(e),this.events={subscriberAdded:"subscriber-added",subscriberRemoved:"subscriber-removed"},this.refCounter=new r.RefCounter,this.Channel=new s.Channel(e),this.emitter=new i.EventEmitter,e.registerMessageHandler(this.onmessage.bind(this)),this.on=this.emitter.on.bind(this.emitter),this.removeAllListeners=this.emitter.removeAllListeners.bind(this.emitter)}async publish(e,t){await this.wire.sendAction("publish-message",{topic:e,message:t,sourceWindowName:this.me.name})}async send(e,t,n){const i=(0,a.validateIdentity)(e);if(i)throw new Error(i);await this.wire.sendAction("send-message",{destinationUuid:e.uuid,destinationWindowName:e.name,topic:t,message:n,sourceWindowName:this.me.name})}subscribe(e,t,n){const i=this.createSubscriptionKey(e.uuid,e.name||"*",t);return this.emitter.on(i,n),this.refCounter.actOnFirst(i,(async()=>{await this.wire.sendAction("subscribe",{sourceUuid:e.uuid,sourceWindowName:e.name||"*",topic:t,destinationWindowName:this.me.name})}),(()=>Promise.resolve()))}unsubscribe(e,t,n){const i=e.name||"*",o=this.createSubscriptionKey(e.uuid,i,t);return this.emitter.removeListener(o,n),this.refCounter.actOnLast(o,(async()=>{await this.wire.sendAction("unsubscribe",{sourceUuid:e.uuid,sourceWindowName:i,topic:t,destinationWindowName:this.me.name})}),(()=>new Promise((e=>e)).then((()=>{}))))}processMessage(e){const{payload:{message:t,sourceWindowName:n,sourceUuid:i,topic:o}}=e,r=[this.createSubscriptionKey(i,n,o),this.createSubscriptionKey(i,"*",o),this.createSubscriptionKey("*","*",o)],s={uuid:i,name:n};r.forEach((e=>{this.emitter.emit(e,t,s)}))}emitSubscriverEvent(e,t){const{payload:{targetName:n,uuid:i,topic:o}}=t,r={name:n,uuid:i,topic:o};this.emitter.emit(e,r)}createSubscriptionKey(e,t,n){const i=t||"*";if(!(e&&i&&n))throw new Error("Missing uuid, name, or topic string");return function createKey(...e){return e.map((e=>Buffer.from(`${e}`).toString("base64"))).join("/")}(e,i,n)}onmessage(e){const{action:t}=e;switch(t){case"process-message":this.processMessage(e);break;case this.events.subscriberAdded:this.emitSubscriverEvent(this.events.subscriberAdded,e);break;case this.events.subscriberRemoved:this.emitSubscriverEvent(this.events.subscriberRemoved,e)}return!0}}t.InterApplicationBus=InterApplicationBus;t.InterAppPayload=class InterAppPayload{}},"../../js-adapter/out/src/api/interop/Factory.js":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteropModule=void 0;const o=i(n("../../node_modules/lodash/cloneDeep.js")),r=n("../../js-adapter/out/src/util/inaccessibleObject.js"),s=n("../../js-adapter/out/src/api/base.js"),a=n("../../js-adapter/out/src/api/interop/InteropBroker.js"),c=n("../../js-adapter/out/src/api/interop/InteropClient.js"),d=n("../../js-adapter/out/src/api/interop/fdc3/overrideCheck.js"),l=n("../../js-adapter/out/src/api/platform/common-utils.js"),u=n("../../js-adapter/out/src/api/interop/fdc3/fdc3-client-factory.js"),defaultOverride=e=>new e,p="You have attempted to use or modify InteropBroker parameters, which is not allowed. You are likely using an older InteropBroker override scheme. Please consult our Interop docs for guidance on migrating to the new override scheme.";class InteropModule extends s.Base{async init(e,t=defaultOverride){this.wire.sendAction("interop-init").catch((()=>{}));const n=await this.wire.environment.getInteropInfo(this.wire.getFin()),i=(0,r.createUnusableObject)(p),s=(0,r.createWarningObject)(p,(0,o.default)(n)),throwingGetProvider=async()=>{throw new Error(p)},c=a.InteropBroker.createClosedConstructor(this.wire,(()=>this.fin.InterApplicationBus.Channel.create(`interop-broker-${e}`)),n);let u;if(Array.isArray(t)){u=new((0,l.overrideFromComposables)(...t)(c))(i,throwingGetProvider,s)}else u=await t(c,i,throwingGetProvider,s);return(0,d.overrideCheck)(u,n.fdc3Version),u}connectSync(e,t){return this.wire.sendAction("interop-connect-sync").catch((()=>{})),new c.InteropClient(this.wire,this.wire.environment.whenReady().then((()=>this.fin.InterApplicationBus.Channel.connect(`interop-broker-${e}`,{payload:t}))),u.fdc3Factory)}}t.InteropModule=InteropModule},"../../js-adapter/out/src/api/interop/InteropBroker.js":function(e,t,n){"use strict";var i,o,r,s=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteropBroker=void 0;const d=n("../../js-adapter/out/src/api/base.js"),l=c(n("../../js-adapter/out/src/api/interop/SessionContextGroupBroker.js")),u=n("../../js-adapter/out/src/api/interop/utils.js"),p=c(n("../../node_modules/lodash/isEqual.js")),h=n("../../js-adapter/out/src/api/interop/fdc3/PrivateChannelProvider.js"),f=n("../../js-adapter/out/src/util/lazy.js"),w=[{id:"green",displayMetadata:{color:"#00CC88",name:"green"}},{id:"purple",displayMetadata:{color:"#8C61FF",name:"purple"}},{id:"orange",displayMetadata:{color:"#FF8C4C",name:"orange"}},{id:"red",displayMetadata:{color:"#FF5E60",name:"red"}},{id:"pink",displayMetadata:{color:"#FF8FB8",name:"pink"}},{id:"yellow",displayMetadata:{color:"#E9FF8F",name:"yellow"}}];class InteropBroker extends d.Base{constructor(e,t,n){super(e),i.set(this,void 0),o.set(this,void 0),r.set(this,void 0),this.getProvider=()=>a(this,r,"f").getValue(),this.interopClients=new Map,this.contextGroupsById=new Map,s(this,o,n.contextGroups??[...w],"f"),s(this,i,n.fdc3Info,"f"),n?.logging&&(this.logging=n.logging),this.intentClientMap=new Map,this.lastContextMap=new Map,this.sessionContextGroupMap=new Map,this.privateChannelProviderMap=new Map,s(this,r,new f.Lazy(t),"f"),this.setContextGroupMap(),this.setupChannelProvider()}static createClosedConstructor(...e){return class OverrideableBroker extends InteropBroker{constructor(...t){if(t.length){const[n,i,o]=t;if(o&&"object"==typeof o&&!(0,p.default)(o,e[2]))return console.warn("You have modified the parameters of the InteropOverride constructor. This behavior is deprecated and will be removed in a future version. You can modify these options in your manifest. Please consult our Interop docs for guidance on migrating to the new override scheme."),void super(e[0],e[1],o);console.warn("You are attempting to pass arguments to the InteropOverride constructor. This is not necessary, and these passed arguments will be ignored. You are likely using an older InteropBroker override scheme. Please consult our Interop docs for guidance on migrating to the new override scheme.")}super(...e)}}}setContext({context:e},t){this.wire.sendAction("interop-broker-set-context").catch((e=>{}));const n=this.getClientState(t);if(!n||!n.contextGroupId)throw n?new Error("You must join a context group before you can set context."):new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);{const{contextGroupId:t}=n;this.setContextForGroup({context:e},t)}}setContextForGroup({context:e},t){this.wire.sendAction("interop-broker-set-context-for-group").catch((e=>{}));const n=this.contextGroupsById.get(t);if(!n)throw new Error(`Unable to set context for context group that isn't in the context group mapping: ${t}.`);const i=InteropBroker.checkContextIntegrity(e);if(!1===i.isValid)throw new Error(`Failed to set Context - bad Context. Reason: ${i.reason}. Context: ${JSON.stringify(e)}`);const o=e.type;n.set(o,e),this.lastContextMap.set(t,o);Array.from(this.interopClients.values()).filter((e=>e.contextGroupId===t)).forEach((t=>{for(const[,n]of t.contextHandlers)InteropBroker.isContextTypeCompatible(o,n.contextType)&&this.invokeContextHandler(t.clientIdentity,n.handlerId,e)}))}getCurrentContext(e,t){this.wire.sendAction("interop-broker-get-current-context").catch((e=>{}));const n=this.getClientState(t);if(!n?.contextGroupId)throw new Error("You must be a member of a context group to call getCurrentContext");const{contextGroupId:i}=n,o=this.contextGroupsById.get(i),r=this.lastContextMap.get(i),s=e?.contextType??r;return o&&s?o.get(s):void 0}async joinContextGroup({contextGroupId:e,target:t},n){if(this.wire.sendAction("interop-broker-join-context-group").catch((e=>{})),this.sessionContextGroupMap.has(e))throw new Error(u.BROKER_ERRORS.joinSessionContextGroupWithJoinContextGroup);if(t){InteropBroker.hasEndpointId(t)&&await this.addClientToContextGroup({contextGroupId:e},t);try{const n=this.channel.connections.filter((e=>e.uuid===t.uuid&&e.name===t.name));if(!n.length)throw new Error(`Given Identity ${t.uuid} ${t.name} is not connected to the Interop Broker.`);n.length>1&&console.warn(`More than one connection found for identity ${t.uuid} ${t.name}`);const i=[];for(const t of n)i.push(this.addClientToContextGroup({contextGroupId:e},t));await Promise.all(i)}catch(e){throw new Error(e)}}else await this.addClientToContextGroup({contextGroupId:e},n)}async addClientToContextGroup({contextGroupId:e},t){this.wire.sendAction("interop-broker-add-client-to-context-group").catch((e=>{}));const n=this.getClientState(t);if(!n)throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(!this.getContextGroups().find((t=>t.id===e)))throw new Error(`Attempting to join a context group that does not exist: ${e}. You may only join existing context groups.`);if(n.contextGroupId!==e){n.contextGroupId=e,await this.setCurrentContextGroupInClientOptions(t,e);const i=this.contextGroupsById.get(e);for(const[,e]of n.contextHandlers){const{contextType:n,handlerId:o}=e;if(void 0===n)i.forEach(((e,n)=>{this.invokeContextHandler(t,o,e)}));else if(i.has(n)){const e=i.get(n);e&&this.invokeContextHandler(t,o,e)}}}}async removeFromContextGroup({target:e},t){if(this.wire.sendAction("interop-broker-remove-from-context-group").catch((e=>{})),e){InteropBroker.hasEndpointId(e)&&await this.removeClientFromContextGroup(e);try{const t=this.channel.connections.filter((t=>t.uuid===e.uuid&&t.name===e.name));if(!t.length)throw new Error(`No connection found for given Identity ${e.uuid} ${e.name}`);t.length>1&&console.warn(`More than one connection found for identity ${e.uuid} ${e.name}`);const n=[];for(const e of t)n.push(this.removeClientFromContextGroup(e));await Promise.all(n)}catch(e){throw new Error(e)}}else await this.removeClientFromContextGroup(t)}async removeClientFromContextGroup(e){this.wire.sendAction("interop-broker-remove-client-from-context-group").catch((e=>{}));const t=this.getClientState(e);t&&(t.contextGroupId=void 0),await this.setCurrentContextGroupInClientOptions(e,null)}getContextGroups(){return this.wire.sendAction("interop-broker-get-context-groups").catch((e=>{})),a(this,o,"f").map((e=>({...e})))}getInfoForContextGroup({contextGroupId:e}){return this.wire.sendAction("interop-broker-get-info-for-context-group").catch((e=>{})),this.getContextGroups().find((t=>t.id===e))}getAllClientsInContextGroup({contextGroupId:e}){this.wire.sendAction("interop-broker-get-all-clients-in-context-group").catch((e=>{}));return Array.from(this.interopClients.values()).filter((t=>t.contextGroupId===e)).map((e=>e.clientIdentity))}async handleFiredIntent(e,t){const n=(0,u.generateOverrideWarning)("fdc3.raiseIntent","InteropBroker.handleFiredIntent",t,"interopClient.fireIntent");throw console.warn(n),new Error(u.BROKER_ERRORS.fireIntent)}async setIntentTarget(e,t){this.wire.sendAction("interop-broker-set-intent-target").catch((e=>{}));const n=this.intentClientMap.get(t.name),i=`intent-handler-${e.name}`;if(n){const t=n.get(i);if(t){if(t.pendingIntents.push(e),t.clientIdentity&&t.isReady){const{clientIdentity:e,pendingIntents:n}=t;try{const o=n[n.length-1];await this.invokeIntentHandler(e,i,o),t.pendingIntents=[]}catch(n){console.error(`Error invoking intent handler for client ${e.uuid}/${e.name}/${e.endpointId}`),t.isReady=!1}}}else n.set(i,{isReady:!1,pendingIntents:[e]})}else{this.intentClientMap.set(t.name,new Map);const n=this.intentClientMap.get(t.name);n&&n.set(i,{isReady:!1,pendingIntents:[e]})}}async handleInfoForIntent(e,t){const n=(0,u.generateOverrideWarning)("fdc3.findIntent","InteropBroker.handleInfoForIntent",t,"interopClient.getInfoForIntent");throw console.warn(n),new Error(u.BROKER_ERRORS.getInfoForIntent)}async handleInfoForIntentsByContext(e,t){const n=(0,u.generateOverrideWarning)("fdc3.findIntentsByContext","InteropBroker.handleInfoForIntentsByContext",t,"interopClient.getInfoForIntentsByContext");throw console.warn(n),new Error(u.BROKER_ERRORS.getInfoForIntentsByContext)}async handleFiredIntentForContext(e,t){const n=(0,u.generateOverrideWarning)("fdc3.raiseIntentForContext","InteropBroker.handleFiredIntentForContext",t,"interopClient.fireIntentForContext");throw console.warn(n),new Error(u.BROKER_ERRORS.fireIntentForContext)}async clientDisconnected(e){}async fdc3HandleOpen({app:e,context:t},n){const i=(0,u.generateOverrideWarning)("fdc3.open","InteropBroker.fdc3HandleOpen",n);throw console.warn(i),new Error(u.BROKER_ERRORS.fdc3Open)}async fdc3HandleFindInstances(e,t){const n=(0,u.generateOverrideWarning)("fdc3.open","InteropBroker.fdc3HandleFindInstances",t);throw console.warn(n),new Error(u.BROKER_ERRORS.fdc3FindInstances)}async fdc3HandleGetAppMetadata(e,t){const n=(0,u.generateOverrideWarning)("fdc3.getAppMetadata","InteropBroker.fdc3HandleGetAppMetadata",t);throw console.warn(n),new Error(u.BROKER_ERRORS.fdc3GetAppMetadata)}async invokeContextHandler(e,t,n){const i=await this.getProvider();try{await i.dispatch(e,t,n)}catch(i){console.error(`Error invoking context handler ${t} for context type ${n.type} in client ${e.uuid}/${e.name}/${e.endpointId}`,i)}}async invokeIntentHandler(e,t,n){const i=await this.getProvider();await i.dispatch(e,t,n)}async fdc3HandleGetInfo(e,t){const{fdc3Version:n}=e;return{fdc3Version:n,...a(this,i,"f"),optionalFeatures:{OriginatingAppMetadata:!1,UserChannelMembershipAPIs:!0},appMetadata:{appId:"",instanceId:""}}}async getAllClientInfo(){return(await this.getProvider()).getAllClientInfo()}decorateSnapshot(e){return{...e,interopSnapshotDetails:{contextGroupStates:this.getContextGroupStates()}}}applySnapshot(e,t){const n=e?.interopSnapshotDetails?.contextGroupStates;n&&(t?.closeExistingWindows||this.updateExistingClients(n),this.rehydrateContextGroupStates(n))}updateExistingClients(e){this.interopClients.forEach((t=>{const{clientIdentity:n,contextGroupId:i,contextHandlers:o}=t;if(i){const t=e[i];for(const[,e]of Object.entries(t))o.forEach((t=>{const{handlerId:i,contextType:o}=t;InteropBroker.isContextTypeCompatible(e.type,o)&&this.invokeContextHandler(n,i,e)}))}}))}getContextGroupStates(){return InteropBroker.toObject(this.contextGroupsById)}rehydrateContextGroupStates(e){const t=Object.entries(e);for(const[e,n]of t){const t=Object.entries(n);for(const[n,i]of t)if(this.contextGroupsById.has(e)){this.contextGroupsById.get(e).set(n,i)}else console.warn(`Attempting to set a context group that isn't in the context group mapping. Skipping context group rehydration for: ${e}`)}}contextHandlerRegistered({contextType:e,handlerId:t},n){const i={contextType:e,handlerId:t},o=this.getClientState(n);if(o?.contextHandlers.set(t,i),o&&o.contextGroupId){const{contextGroupId:i}=o,r=this.contextGroupsById.get(i);if(void 0===e)r.forEach(((e,i)=>{this.invokeContextHandler(n,t,e)}));else if(r.has(e)){const i=r.get(e);i&&this.invokeContextHandler(n,t,i)}}}async intentHandlerRegistered(e,t){const{handlerId:n}=e,i=this.intentClientMap.get(t.name),o=i?.get(n);if(i)if(o){const{pendingIntents:e}=o;o.clientIdentity=t,o.isReady=!0;try{if(e.length>0){const i=e[e.length-1];await this.invokeIntentHandler(t,n,i),o.pendingIntents=[]}}catch(e){console.error(`Error invoking intent handler: ${n} for client ${t.uuid}/${t.name}/${t.endpointId}`)}}else i.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t});else{this.intentClientMap.set(t.name,new Map);const e=this.intentClientMap.get(t.name);e&&e.set(n,{isReady:!0,pendingIntents:[],clientIdentity:t})}}removeContextHandler({handlerId:e},t){const n=this.getClientState(t);n&&n.contextHandlers.delete(e)}handleJoinSessionContextGroup({sessionContextGroupId:e},t){try{if(!e)throw new Error("Failed to join session context group: must specify group id.");const n=this.sessionContextGroupMap.get(e);if(n)n.registerNewClient(t);else{const n=new l.default(this.channel,e);n.registerNewClient(t),this.sessionContextGroupMap.set(e,n)}return{hasConflict:this.contextGroupsById.has(e)}}catch(e){throw new Error(e)}}getClientState(e){return this.interopClients.get(e.endpointId)}static toObject(e){const t=Object.fromEntries(e),n={};return Object.entries(t).forEach((([e,t])=>{const i=Object.fromEntries(t);n[e]=i})),n}static hasEndpointId(e){return void 0!==e.endpointId}static isContextTypeCompatible(e,t){return void 0===t||e===t}setContextGroupMap(){for(const e of this.getContextGroups())this.contextGroupsById.set(e.id,new Map)}async setCurrentContextGroupInClientOptions(e,t){try{const n=await this.fin.System.getEntityInfo(e.uuid,e.name);let i;"view"===n.entityType?i=await this.fin.View.wrap(e):"window"===n.entityType&&(i=await this.fin.Window.wrap(e)),i&&await i.updateOptions({interop:{currentContextGroup:t}})}catch(e){}}async setupChannelProvider(){try{const e=await this.getProvider();this.channel=e,this.wireChannel(e)}catch(e){throw new Error(`Error setting up Interop Broker Channel Provider: ${e}`)}}wireChannel(e){e.onConnection((async(e,t)=>{if(!await this.isConnectionAuthorized(e,t))throw new Error(`Connection not authorized for ${e.uuid}, ${e.name}`);if(!e.endpointId)throw new Error("Version too old to be compatible with Interop. Please upgrade your runtime to a more recent version.");const n={contextGroupId:void 0,contextHandlers:new Map,clientIdentity:e};t?.currentContextGroup&&this.contextGroupsById.has(t.currentContextGroup)&&(n.contextGroupId=t?.currentContextGroup),this.interopClients.set(e.endpointId,n)})),e.onDisconnection((e=>{this.interopClients.delete(e.endpointId);const t=this.intentClientMap.get(e.name);t&&e.uuid===this.fin.me.uuid&&t.forEach((e=>{e.isReady=!1})),this.sessionContextGroupMap.forEach((t=>{t.onDisconnection(e)})),this.clientDisconnected(e)})),e.beforeAction((async(e,t,n)=>{if(!await this.isActionAuthorized(e,t,n))throw new Error(`Action (${e}) not authorized for ${n.uuid}, ${n.name}`);this.logging?.beforeAction?.enabled&&console.log(e,t,n)})),e.afterAction(((e,t,n)=>{if(this.logging?.afterAction?.enabled){const i=t?[e,t,n]:[e,n];console.log(...i)}})),e.register("setContext",this.setContext.bind(this)),e.register("fireIntent",this.handleFiredIntent.bind(this)),e.register("getCurrentContext",this.getCurrentContext.bind(this)),e.register("getInfoForIntent",this.handleInfoForIntent.bind(this)),e.register("getInfoForIntentsByContext",this.handleInfoForIntentsByContext.bind(this)),e.register("fireIntentForContext",this.handleFiredIntentForContext.bind(this)),e.register("getContextGroups",this.getContextGroups.bind(this)),e.register("joinContextGroup",this.joinContextGroup.bind(this)),e.register("removeFromContextGroup",this.removeFromContextGroup.bind(this)),e.register("getAllClientsInContextGroup",this.getAllClientsInContextGroup.bind(this)),e.register("getInfoForContextGroup",this.getInfoForContextGroup.bind(this)),e.register("contextHandlerRegistered",this.contextHandlerRegistered.bind(this)),e.register("intentHandlerRegistered",this.intentHandlerRegistered.bind(this)),e.register("removeContextHandler",this.removeContextHandler.bind(this)),e.register("sessionContextGroup:createIfNeeded",this.handleJoinSessionContextGroup.bind(this)),e.register("fdc3Open",this.fdc3HandleOpen.bind(this)),e.register("fdc3v2FindIntentsByContext",this.handleInfoForIntentsByContext.bind(this)),e.register("fdc3FindInstances",this.fdc3HandleFindInstances.bind(this)),e.register("fdc3GetAppMetadata",this.fdc3HandleGetAppMetadata.bind(this)),e.register("fdc3v2GetInfo",(async(e,t)=>this.fdc3HandleGetInfo.bind(this)(e,t))),e.register("createPrivateChannelProvider",(async e=>{const{channelId:t}=e,n=await this.fin.InterApplicationBus.Channel.create(t),i=h.PrivateChannelProvider.init(n,t,(e=>{this.privateChannelProviderMap.delete(e)}));this.privateChannelProviderMap.set(t,i)})),e.register("isIdUsedByPrivateChannel",(async e=>{const{channelId:t}=e;return this.privateChannelProviderMap.has(t)}))}isConnectionAuthorized(e,t){return this.wire.sendAction("interop-broker-is-connection-authorized").catch((e=>{})),Promise.resolve(!0)}isActionAuthorized(e,t,n){return this.wire.sendAction("interop-broker-is-action-authorized").catch((e=>{})),Promise.resolve(!0)}}t.InteropBroker=InteropBroker,i=new WeakMap,o=new WeakMap,r=new WeakMap,InteropBroker.checkContextIntegrity=u.checkContextIntegrity},"../../js-adapter/out/src/api/interop/InteropClient.js":function(e,t,n){"use strict";var i,o,r,s=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InteropClient=void 0;const d=n("../../js-adapter/out/src/api/base.js"),l=c(n("../../js-adapter/out/src/api/interop/SessionContextGroupClient.js")),u=n("../../js-adapter/out/src/api/interop/utils.js");class InteropClient extends d.Base{constructor(e,t,n){super(e),i.set(this,void 0),o.set(this,void 0),r.set(this,void 0),s(this,o,new Map,"f"),s(this,i,t,"f"),s(this,r,n,"f")}async setContext(e){this.wire.sendAction("interop-client-set-context").catch((e=>{}));return(await a(this,i,"f")).dispatch("setContext",{context:e})}async addContextHandler(e,t){if(this.wire.sendAction("interop-client-add-context-handler").catch((e=>{})),"function"!=typeof e)throw new Error("Non-function argument passed to the first parameter 'handler'. Be aware that the argument order does not match the FDC3 standard.");const n=await a(this,i,"f");let o;o=t?`invokeContextHandler-${t}-${(0,u.generateId)()}`:"invokeContextHandler";const r=(0,u.wrapContextHandler)(e,o);return n.register(o,r),await n.dispatch("contextHandlerRegistered",{handlerId:o,contextType:t}),{unsubscribe:async()=>{n.remove(o),await n.dispatch("removeContextHandler",{handlerId:o})}}}async getContextGroups(){this.wire.sendAction("interop-client-get-context-groups").catch((e=>{}));return(await a(this,i,"f")).dispatch("getContextGroups")}async joinContextGroup(e,t){this.wire.sendAction("interop-client-join-context-group").catch((e=>{}));const n=await a(this,i,"f");if(!e)throw new Error("No contextGroupId specified for joinContextGroup.");return n.dispatch("joinContextGroup",{contextGroupId:e,target:t})}async removeFromContextGroup(e){this.wire.sendAction("interop-client-remove-from-context-group").catch((e=>{}));return(await a(this,i,"f")).dispatch("removeFromContextGroup",{target:e})}async getAllClientsInContextGroup(e){this.wire.sendAction("interop-client-get-all-clients-in-context-group").catch((e=>{}));const t=await a(this,i,"f");if(!e)throw new Error("No contextGroupId specified for getAllClientsInContextGroup.");return t.dispatch("getAllClientsInContextGroup",{contextGroupId:e})}async getInfoForContextGroup(e){this.wire.sendAction("interop-client-get-info-for-context-group").catch((e=>{}));const t=await a(this,i,"f");if(!e)throw new Error("No contextGroupId specified for getInfoForContextGroup.");return t.dispatch("getInfoForContextGroup",{contextGroupId:e})}async fireIntent(e){this.wire.sendAction("interop-client-fire-intent").catch((e=>{}));return(await a(this,i,"f")).dispatch("fireIntent",e)}async registerIntentHandler(e,t,n){this.wire.sendAction("interop-client-register-intent-handler").catch((e=>{}));const o=await a(this,i,"f"),r=`intent-handler-${t}`,s=(0,u.wrapIntentHandler)(e,r);try{await o.register(r,s),await o.dispatch("intentHandlerRegistered",{handlerId:r,...n})}catch(e){throw new Error("Unable to register intent handler")}return{unsubscribe:async()=>{o.remove(r)}}}async getCurrentContext(e){this.wire.sendAction("interop-client-get-current-context").catch((e=>{}));return(await a(this,i,"f")).dispatch("getCurrentContext",{contextType:e})}async getInfoForIntent(e){this.wire.sendAction("interop-client-get-info-for-intent").catch((e=>{}));return(await a(this,i,"f")).dispatch("getInfoForIntent",e)}async getInfoForIntentsByContext(e){this.wire.sendAction("interop-client-get-info-for-intents-by-context").catch((e=>{}));return(await a(this,i,"f")).dispatch("getInfoForIntentsByContext",e)}async fireIntentForContext(e){this.wire.sendAction("interop-client-fire-intent-for-context").catch((e=>{}));return(await a(this,i,"f")).dispatch("fireIntentForContext",e)}async joinSessionContextGroup(e){try{const t=a(this,o,"f").get(e);if(t)return t.getUserInstance();const n=await a(this,i,"f"),{hasConflict:r}=await n.dispatch("sessionContextGroup:createIfNeeded",{sessionContextGroupId:e});r&&console.warn(`A (non-session) context group with the name "${e}" already exists. If you are trying to join a Context Group, call joinContextGroup instead.`);const s=new l.default(this.wire,a(this,i,"f"),e);return a(this,o,"f").set(e,s),s.getUserInstance()}catch(t){throw console.error(`Error thrown trying to create Session Context Group with id "${e}": ${t}`),t}}async onDisconnection(e){this.wire.sendAction("interop-client-add-ondisconnection-listener").catch((e=>{}));return(await a(this,i,"f")).onDisconnection((t=>{const{uuid:n}=t;e({type:"interop-broker",topic:"disconnected",brokerName:n})}))}getFDC3Sync(e){return a(this,r,"f").call(this,e,this,this.wire)}async getFDC3(e){return this.getFDC3Sync(e)}static async ferryFdc3Call(e,t,n){return(await a(e,i,"f")).dispatch(t,n||null)}}t.InteropClient=InteropClient,i=new WeakMap,o=new WeakMap,r=new WeakMap},"../../js-adapter/out/src/api/interop/SessionContextGroupBroker.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n("../../js-adapter/out/src/api/interop/utils.js");t.default=class SessionContextGroupBroker{constructor(e,t){this.provider=e,this.id=t,this.lastContext=void 0,this.contextGroupMap=new Map,this.clients=new Map,this.registerListeners()}registerListeners(){this.provider.register(`sessionContextGroup:getContext-${this.id}`,this.getCurrentContext.bind(this)),this.provider.register(`sessionContextGroup:setContext-${this.id}`,this.setContext.bind(this)),this.provider.register(`sessionContextGroup:handlerAdded-${this.id}`,this.handlerAdded.bind(this)),this.provider.register(`sessionContextGroup:handlerRemoved-${this.id}`,this.handlerRemoved.bind(this))}getCurrentContext(e){return e.type?this.contextGroupMap.get(e.type):this.lastContext}setContext(e,t){const{context:n}=e,o=(0,i.checkContextIntegrity)(n);if(!1===o.isValid)throw new Error(`Failed to set Context - bad Context. Reason: ${o.reason}. Context: ${JSON.stringify(n)}`);if(!this.getClientState(t))throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Session Client State Map`);this.contextGroupMap.set(n.type,n),this.lastContext=n;Array.from(this.clients.values()).forEach((e=>{e.contextHandlers.get(n.type)?.forEach((t=>{this.provider.dispatch(e.clientIdentity,t,n)})),e.globalHandler&&this.provider.dispatch(e.clientIdentity,e.globalHandler,n)}))}getClientState(e){return this.clients.get(e.endpointId)}async handlerAdded(e,t){const{handlerId:n,contextType:i}=e,o=this.getClientState(t);if(!o)throw new Error(`Client with Identity: ${t.uuid} ${t.name} not in Client State Map`);if(i){const e=o.contextHandlers.get(i)||[];o.contextHandlers.set(i,[...e,n]);const r=this.contextGroupMap.get(i);r&&await this.provider.dispatch(t,n,r)}else{o.globalHandler=n;const e=[...this.contextGroupMap.keys()].map((async e=>{const i=this.contextGroupMap.get(e);i&&await this.provider.dispatch(t,n,i)}));await Promise.all(e)}}handlerRemoved(e,t){const{handlerId:n}=e,i=this.clients.get(t.endpointId);i?(Array.from(i.contextHandlers).forEach((([,e])=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)})),i.globalHandler===n&&(i.globalHandler=void 0)):console.warn(`Trying to remove a handler from a client that isn't mapped. handlerId: ${n}. clientIdentity: ${t}`)}registerNewClient(e){if(!this.clients.has(e.endpointId)){const t={contextHandlers:new Map,clientIdentity:e,globalHandler:void 0};this.clients.set(e.endpointId,t)}}onDisconnection(e){this.clients.delete(e.endpointId)}}},"../../js-adapter/out/src/api/interop/SessionContextGroupClient.js":function(e,t,n){"use strict";var i,o=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},r=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const s=n("../../js-adapter/out/src/api/base.js"),a=n("../../js-adapter/out/src/api/interop/utils.js");class SessionContextGroupClient extends s.Base{constructor(e,t,n){super(e),i.set(this,void 0),this.id=n,o(this,i,t,"f")}async setContext(e){this.wire.sendAction("interop-session-context-group-set-context").catch((e=>{}));return(await r(this,i,"f")).dispatch(`sessionContextGroup:setContext-${this.id}`,{sessionContextGroupId:this.id,context:e})}async getCurrentContext(e){this.wire.sendAction("interop-session-context-group-get-context").catch((e=>{}));return(await r(this,i,"f")).dispatch(`sessionContextGroup:getContext-${this.id}`,{sessionContextGroupId:this.id,type:e})}async addContextHandler(e,t){if(this.wire.sendAction("interop-session-context-group-add-handler").catch((e=>{})),"function"!=typeof e)throw new Error("Non-function argument passed to the first parameter 'handler'. Be aware that the argument order does not match the FDC3 standard.");const n=await r(this,i,"f");let o;return o=t?`sessionContextHandler:invoke-${this.id}-${t}-${(0,a.generateId)()}`:`sessionContextHandler:invoke-${this.id}`,n.register(o,(0,a.wrapContextHandler)(e,o)),await n.dispatch(`sessionContextGroup:handlerAdded-${this.id}`,{handlerId:o,contextType:t}),{unsubscribe:await this.createUnsubscribeCb(o)}}async createUnsubscribeCb(e){const t=await r(this,i,"f");return async()=>{t.remove(e),await t.dispatch(`sessionContextGroup:handlerRemoved-${this.id}`,{handlerId:e})}}getUserInstance(){return{id:this.id,setContext:(0,a.wrapInTryCatch)(this.setContext.bind(this),"Failed to set context: "),getCurrentContext:(0,a.wrapInTryCatch)(this.getCurrentContext.bind(this),"Failed to get context: "),addContextHandler:(0,a.wrapInTryCatch)(this.addContextHandler.bind(this),"Failed to add context handler: ")}}}t.default=SessionContextGroupClient,i=new WeakMap},"../../js-adapter/out/src/api/interop/fdc3/PrivateChannelClient.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateChannelClient=void 0;const s=r(n("../../js-adapter/out/src/api/interop/utils.js"));t.PrivateChannelClient=class PrivateChannelClient{constructor(e,t){this.id=t,this.client=e,this.listeners=new Map}async broadcast(e){return this.client.dispatch("broadcast",{context:e})}async getCurrentContext(e){return this.client.dispatch("getCurrentContext",{contextType:e})}async addContextListener(e,t){if("function"!=typeof t)throw new Error("Non-function argument passed to the second parameter 'handler'. Be aware that the argument order does not match the FDC3 standard.");let n;n=e?`contextHandler:invoke-${this.id}-${e}-${s.generateId()}`:`contextHandler:invoke-${this.id}-${s.generateId()}`,this.client.register(n,s.wrapContextHandler(t,n));const i={unsubscribe:await this.createContextUnsubscribeCb(n)};return this.listeners.set(n,i),await this.client.dispatch("contextHandlerAdded",{handlerId:n,contextType:e}),i}createNonStandardUnsubscribeCb(e){return async()=>{this.client.remove(e),this.listeners.delete(e),await this.client.dispatch("nonStandardHandlerRemoved",{handlerId:e})}}createContextUnsubscribeCb(e){return async()=>{this.client.remove(e),this.listeners.delete(e),await this.client.dispatch("contextHandlerRemoved",{handlerId:e})}}onAddContextListener(e){const t=`onContextHandlerAdded:invoke-${this.id}-${s.generateId()}`;this.client.register(t,e);const n={unsubscribe:this.createNonStandardUnsubscribeCb(t)};return this.listeners.set(t,n),this.client.dispatch("onAddContextHandlerAdded",{handlerId:t}),n}onDisconnect(e){const t=`onDisconnect:invoke-${this.id}-${s.generateId()}`;this.client.register(t,e);const n={unsubscribe:this.createNonStandardUnsubscribeCb(t)};return this.listeners.set(t,n),this.client.dispatch("onDisconnectHandlerAdded",{handlerId:t}),n}onUnsubscribe(e){const t=`onUnsubscribe:invoke-${this.id}-${s.generateId()}`;this.client.register(t,e);const n={unsubscribe:this.createNonStandardUnsubscribeCb(t)};return this.listeners.set(t,n),this.client.dispatch("onUnsubscribeHandlerAdded",{handlerId:t}),n}async cleanUpAllSubs(){Array.from(this.listeners.keys()).forEach((e=>{this.client.remove(e),this.listeners.delete(e)}))}async disconnect(){try{await this.client.dispatch("clientDisconnecting"),await this.cleanUpAllSubs(),await this.client.disconnect()}catch(e){throw new Error(e.message)}}}},"../../js-adapter/out/src/api/interop/fdc3/PrivateChannelProvider.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateChannelProvider=void 0;const i=n("../../js-adapter/out/src/api/interop/utils.js");class PrivateChannelProvider{constructor(e,t,n){this.provider=e,this.id=t,this.clients=new Map,this.registerListeners(),this.contextByContextType=new Map,this.lastContext=void 0,this.provider.onConnection((e=>this.registerNewClient(e))),this.removePrivateChannelProvider=n,this.provider.onDisconnection((async e=>{const{endpointId:t}=e;this.clients.has(t)&&await this.handleClientDisconnecting(e),0===(await this.provider.getAllClientInfo()).length&&(this.provider.destroy(),this.removePrivateChannelProvider(this.id))}))}getClientState(e){return this.clients.get(e.endpointId)}registerListeners(){this.provider.register("broadcast",this.broadcast.bind(this)),this.provider.register("getCurrentContext",this.getCurrentContext.bind(this)),this.provider.register("contextHandlerAdded",this.contextHandlerAdded.bind(this)),this.provider.register("contextHandlerRemoved",this.contextHandlerRemoved.bind(this)),this.provider.register("nonStandardHandlerRemoved",this.nonStandardHandlerRemoved.bind(this)),this.provider.register("onAddContextHandlerAdded",this.onAddContextHandlerAdded.bind(this)),this.provider.register("onDisconnectHandlerAdded",this.onDisconnectHandlerAdded.bind(this)),this.provider.register("onUnsubscribeHandlerAdded",this.onUnsubscribeHandlerAdded.bind(this)),this.provider.register("clientDisconnecting",((e,t)=>{this.handleClientDisconnecting(t)}))}broadcast(e,t){const{context:n}=e;if(!this.getClientState(t))throw new Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call broadcast, is not connected to this Private Channel`);const o=(0,i.checkContextIntegrity)(n);if(!1===o.isValid)throw new Error(`Failed to broadcast - bad Context. Reason: ${o.reason}. Context: ${JSON.stringify(n)}`);this.contextByContextType.set(n.type,n),this.lastContext=n,Array.from(this.clients.values()).forEach((e=>{const t=e.handlerIdsByContextTypes.get(n.type);t&&t.forEach((t=>{this.provider.dispatch(e.clientIdentity,t,n)})),e.globalHandler&&this.provider.dispatch(e.clientIdentity,e.globalHandler,n)}))}getCurrentContext(e,t){const{contextType:n}=e;if(!this.getClientState(t))throw new Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call getCurrentContext, is not connected to this Private Channel`);if(void 0!==n){const e=this.contextByContextType.get(n);return e||null}return this.lastContext?this.lastContext:null}contextHandlerAdded(e,t){const{handlerId:n,contextType:i}=e,o=this.getClientState(t);if(!o)throw new Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call addContextListener, is not connected to this Private Channel`);if(i){const e=o.handlerIdsByContextTypes.get(i)||[];o.handlerIdsByContextTypes.set(i,[...e,n])}else o.globalHandler=n;Array.from(this.clients.values()).forEach((e=>{e.clientIdentity.endpointId!==t.endpointId&&e.onAddContextListenerHandlerId&&this.provider.dispatch(e.clientIdentity,e.onAddContextListenerHandlerId,i)}))}async contextHandlerRemoved(e,t){const{handlerId:n}=e,i=this.getClientState(t);if(i){let e;if(i.globalHandler===n)i.globalHandler=void 0;else for(const[t,o]of i.handlerIdsByContextTypes){const i=o.indexOf(n);i>-1&&(o.splice(i,1),e=t)}const o=(await this.getConnectedClients()).map((async n=>{const{clientIdentity:i,clientIdentity:{endpointId:o},onUnsubscribeHandlerId:r}=n;o!==t.endpointId&&r&&await this.provider.dispatch(i,r,e)}));try{await Promise.all(o)}catch(e){throw console.error(`Problem when attempting to dispatch to onUnsubscribeHandlers. Error: ${e} Removing Client: ${n}. uuid: ${t.uuid}. name: ${t.name}. endpointId: ${t.endpointId}`),new Error(e)}}else console.warn(`Trying to remove a handler from a client that isn't mapped. handlerId: ${n}. uuid: ${t.uuid}. name: ${t.name}. endpointId: ${t.endpointId}.`)}nonStandardHandlerRemoved(e,t){const{handlerId:n}=e,i=this.getClientState(t);i?i.onDisconnectHandlerId===n?i.onDisconnectHandlerId=void 0:i.onAddContextListenerHandlerId===n?i.onAddContextListenerHandlerId=void 0:i.onUnsubscribeHandlerId===n&&(i.onUnsubscribeHandlerId=void 0):console.warn(`Trying to remove a handler from a client that isn't mapped. handlerId: ${n}. clientIdentity: ${t}`)}onAddContextHandlerAdded(e,t){const n=this.getClientState(t),{handlerId:i}=e;if(!n)throw new Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call onAddContextListener, is not connected to this Private Channel`);n.onAddContextListenerHandlerId=i,Array.from(this.clients.values()).forEach((e=>{e.clientIdentity.endpointId!==t.endpointId&&Array.from(e.handlerIdsByContextTypes.keys()).forEach((e=>{this.provider.dispatch(t,i,e)}))}))}onDisconnectHandlerAdded(e,t){const n=this.getClientState(t),{handlerId:i}=e;if(!n)throw new Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call onDisconnect, is not connected to this Private Channel`);n.onDisconnectHandlerId=i}onUnsubscribeHandlerAdded(e,t){const n=this.getClientState(t),{handlerId:i}=e;if(!n)throw new Error(`Client with Identity: ${t.uuid} ${t.name}, tried to call onUnsubscribe, is not connected to this Private Channel`);n.onUnsubscribeHandlerId=i}removeClient(e){const t=this.getClientState(e);if(!t)throw new Error(`Client with Identity: ${e.uuid} ${e.name}, tried to call disconnect, is not connected to this Private Channel`);t.handlerIdsByContextTypes.clear(),this.clients.delete(e.endpointId)}async fireOnDisconnectForOtherClients(e){const{endpointId:t}=e,n=(await this.getConnectedClients()).map((async e=>{const{clientIdentity:{endpointId:n},onDisconnectHandlerId:i}=e;n!==t&&i&&await this.provider.dispatch(e.clientIdentity,i)}));try{await Promise.all(n)}catch(t){throw console.error(`Problem when attempting to dispatch to onDisconnectHandlers. Error: ${t} Disconnecting Client: uuid: ${e.uuid}. name: ${e.name}. endpointId: ${e.endpointId}`),new Error(t)}}async unsubscribeAll(e){const{endpointId:t}=e,n=this.clients.get(t);if(n){const t=Array.from(n.handlerIdsByContextTypes.values()).flat(),i=n.globalHandler;if(t.length>0){const n=t.map((async t=>this.contextHandlerRemoved({handlerId:t},e)));try{await Promise.all(n)}catch(e){console.error(e.message)}}if(i)try{await this.contextHandlerRemoved({handlerId:i},e)}catch(e){console.error(e.message)}}}async handleClientDisconnecting(e){await this.unsubscribeAll(e),this.removeClient(e),await this.fireOnDisconnectForOtherClients(e)}registerNewClient(e){if(!this.clients.has(e.endpointId)){const t={clientIdentity:e,handlerIdsByContextTypes:new Map,globalHandler:void 0,onAddContextListenerHandlerId:void 0,onUnsubscribeHandlerId:void 0,onDisconnectHandlerId:void 0};this.clients.set(e.endpointId,t)}}async getConnectedClients(){const e=await this.provider.getAllClientInfo();return Array.from(this.clients.values()).filter((t=>{const{uuid:n,name:i}=t.clientIdentity;return e.some((e=>i===e.name&&n===e.uuid))}))}static init(e,t,n){return new PrivateChannelProvider(e,t,n)}}t.PrivateChannelProvider=PrivateChannelProvider},"../../js-adapter/out/src/api/interop/fdc3/channels/fdc3-channels-1.2.js":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createV1Channel=void 0;const o=i(n("../../node_modules/lodash/isEqual.js"));t.createV1Channel=e=>({id:e.id,type:"app",broadcast:e.setContext,getCurrentContext:async t=>{const n=await e.getCurrentContext(t);return void 0===n?null:n},addContextListener:(t,n)=>{let i,r;"function"==typeof t?(console.warn("addContextListener(handler) has been deprecated. Please use addContextListener(null, handler)"),i=t):(i=n,"string"==typeof t&&(r=t));const s=(async()=>{let t=!0;const n=await e.getCurrentContext(r);return e.addContextHandler(((e,r)=>{if(!t||(t=!1,!(0,o.default)(n,e)))return i(e,r)}),r)})();return{...s,unsubscribe:()=>s.then((e=>e.unsubscribe()))}}})},"../../js-adapter/out/src/api/interop/fdc3/channels/fdc3-channels-2.0.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createV2Channel=void 0;const i=n("../../js-adapter/out/src/api/interop/fdc3/channels/fdc3-channels-1.2.js");t.createV2Channel=e=>{const t=(0,i.createV1Channel)(e);return{...t,addContextListener:async(...e)=>t.addContextListener(...e)}}},"../../js-adapter/out/src/api/interop/fdc3/fdc3-1.2.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fdc3Module=void 0;const i=n("../../js-adapter/out/src/api/interop/utils.js"),o=n("../../js-adapter/out/src/api/interop/fdc3/fdc3-common.js"),r=n("../../js-adapter/out/src/api/interop/fdc3/channels/fdc3-channels-1.2.js");class Fdc3Module extends o.FDC3ModuleBase{async open(e,t){await super._open(e,t)}addContextListener(e,t){let n;return this.wire.sendAction("fdc3-add-context-listener").catch((e=>{})),"function"==typeof e?(console.warn("addContextListener(handler) has been deprecated. Please use addContextListener(null, handler)"),n=this.client.addContextHandler(e)):n=this.client.addContextHandler(t,null===e?void 0:e),{...n,unsubscribe:()=>n.then((e=>e.unsubscribe()))}}addIntentListener(e,t){this.wire.sendAction("fdc3-add-intent-listener").catch((e=>{}));const n=this.client.registerIntentHandler((e=>{const{context:n,metadata:i}=e,{metadata:o}=n,r=i?.intentResolutionResultId||o?.intentResolutionResultId;r&&this.fin.InterApplicationBus.publish(r,null).catch((()=>null)),t(e.context)}),e,{fdc3Version:"1.2"});return{...n,unsubscribe:()=>n.then((e=>e.unsubscribe()))}}async raiseIntent(e,t,n){this.wire.sendAction("fdc3-raise-intent").catch((e=>{}));const o=n?{name:e,context:t,metadata:{target:n}}:{name:e,context:t};try{return await this.client.fireIntent(o)}catch(e){const t=e.message===i.BROKER_ERRORS.fireIntent?"ResolverUnavailable":e.message;throw new Error(t)}}async findIntent(e,t){this.wire.sendAction("fdc3-find-intent").catch((e=>{}));try{return await this.client.getInfoForIntent({name:e,context:t})}catch(e){const t=e.message===i.BROKER_ERRORS.getInfoForIntent?"ResolverUnavailable":e.message;throw new Error(t)}}async findIntentsByContext(e){this.wire.sendAction("fdc3-find-intents-by-context").catch((e=>{}));try{return await this.client.getInfoForIntentsByContext(e)}catch(e){const t=e.message===i.BROKER_ERRORS.getInfoForIntentsByContext?"ResolverUnavailable":e.message;throw new Error(t)}}async raiseIntentForContext(e,t){this.wire.sendAction("fdc3-raise-intent-for-context").catch((e=>{}));try{return await this.client.fireIntentForContext({...e,metadata:{target:t}})}catch(e){const t=e.message===i.BROKER_ERRORS.fireIntentForContext?"ResolverUnavailable":e.message;throw new Error(t)}}async getOrCreateChannel(e){return super.getOrCreateChannel(e,r.createV1Channel)}getInfo(){this.wire.sendAction("fdc3-get-info").catch((e=>{}));return{providerVersion:this.wire.environment.getAdapterVersionSync(),provider:`openfin-${this.wire.me.uuid}`,fdc3Version:"1.2"}}}t.Fdc3Module=Fdc3Module},"../../js-adapter/out/src/api/interop/fdc3/fdc3-2.0.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fdc3Module2=void 0;const i=n("../../js-adapter/out/src/api/interop/fdc3/fdc3-common.js"),o=n("../../js-adapter/out/src/api/interop/utils.js"),r=n("../../js-adapter/out/src/api/interop/InteropClient.js"),s=n("../../js-adapter/out/src/api/interop/fdc3/utils.js"),a=n("../../js-adapter/out/src/api/interop/fdc3/PrivateChannelClient.js"),c=n("../../js-adapter/out/src/api/interop/fdc3/channels/fdc3-channels-2.0.js");class Fdc3Module2 extends i.FDC3ModuleBase{async open(e,t){return"string"==typeof e&&console.warn("Passing a string as the app parameter is deprecated, please use an AppIdentifier ({ appId: string; instanceId?: string })."),super._open(e,t)}async findInstances(e){this.wire.sendAction("fdc3-find-instances").catch((e=>{}));try{return await r.InteropClient.ferryFdc3Call(this.client,"fdc3FindInstances",e)}catch(e){const t=e.message===o.BROKER_ERRORS.fdc3FindInstances?"ResolverUnavailable":e.message;throw new Error(t)}}async getAppMetadata(e){this.wire.sendAction("fdc3-get-app-metadata").catch((e=>{}));try{return await r.InteropClient.ferryFdc3Call(this.client,"fdc3GetAppMetadata",e)}catch(e){const t=e.message===o.BROKER_ERRORS.fdc3GetAppMetadata?"ResolverUnavailable":e.message;throw new Error(t)}}async addContextListener(e,t){this.wire.sendAction("fdc3-add-context-listener").catch((e=>{}));const getWrappedHandler=e=>t=>{const{contextMetadata:n,...i}=t,o=n?[{...i},n]:[t,null];e(...o)};let n=t,i=getWrappedHandler(n);return"function"==typeof e?(console.warn("addContextListener(handler) has been deprecated. Please use addContextListener(null, handler)"),n=e,i=getWrappedHandler(n),this.client.addContextHandler(i)):this.client.addContextHandler(i,null===e?void 0:e)}async findIntent(e,t,n){this.wire.sendAction("fdc3-find-intent").catch((e=>{}));try{return await this.client.getInfoForIntent({name:e,context:t,metadata:{resultType:n}})}catch(e){const t=e.message===o.BROKER_ERRORS.getInfoForIntent?"ResolverUnavailable":e.message;throw new Error(t)}}async findIntentsByContext(e,t){this.wire.sendAction("fdc3-find-intents-by-context").catch((e=>{}));const n=t?{context:e,metadata:{resultType:t}}:e;try{return await r.InteropClient.ferryFdc3Call(this.client,"fdc3v2FindIntentsByContext",n)}catch(e){const t=e.message===o.BROKER_ERRORS.getInfoForIntentsByContext?"ResolverUnavailable":e.message;throw new Error(t)}}async raiseIntent(e,t,n){this.wire.sendAction("fdc3-raise-intent").catch((e=>{}));try{return"string"==typeof n&&console.warn("Passing a string as the app parameter is deprecated, please use an AppIdentifier ({ appId: string; instanceId?: string })."),(0,s.getIntentResolution)(this.client,t,n,e)}catch(e){const t=e.message===o.BROKER_ERRORS.fireIntent?"ResolverUnavailable":e.message;throw new Error(t)}}async raiseIntentForContext(e,t){this.wire.sendAction("fdc3-raise-intent-for-context").catch((e=>{}));try{return"string"==typeof t&&console.warn("Passing a string as the app parameter is deprecated, please use an AppIdentifier ({ appId: string; instanceId?: string })."),(0,s.getIntentResolution)(this.client,e,t)}catch(e){const t=e.message===o.BROKER_ERRORS.fireIntent?"ResolverUnavailable":e.message;throw new Error(t)}}async addIntentListener(e,t){if(this.wire.sendAction("fdc3-add-intent-listener").catch((e=>{})),"string"!=typeof e)throw new Error("First argument must be an Intent name");return this.client.registerIntentHandler((async e=>{let n,i;const{context:o,metadata:r}=e,{contextMetadata:s,metadata:a,...c}=o,d=r?.intentResolutionResultId||a?.intentResolutionResultId;try{const e=a?{metadata:a,...c}:{...c};n=await t(e,s),i=n}catch(e){n=e,i={error:!0}}if(d&&this.fin.InterApplicationBus.publish(d,i).catch((()=>null)),n instanceof Error)throw new Error(n.message);return n}),e,{fdc3Version:"2.0"})}async getOrCreateChannel(e){return super.getOrCreateChannel(e,c.createV2Channel)}async createPrivateChannel(){const e=(0,o.generateId)();await r.InteropClient.ferryFdc3Call(this.client,"createPrivateChannelProvider",{channelId:e});const t=await this.fin.InterApplicationBus.Channel.connect(e),n=new a.PrivateChannelClient(t,e);return(0,s.buildPrivateChannelObject)(n)}async getUserChannels(){return(await this.client.getContextGroups()).map((e=>({...e,type:"user",...(0,s.getUnsupportedChannelApis)("User")})))}async getSystemChannels(){return console.warn("This API has been deprecated. Please use fdc3.getUserChannels instead."),super.getSystemChannels()}async joinUserChannel(e){return super.joinChannel(e)}async joinChannel(e){return console.warn("This API has been deprecated. Please use fdc3.joinUserChannel instead."),super.joinChannel(e)}async getCurrentChannel(){const e=await super.getCurrentChannel();return e?{...e,type:"user",broadcast:this.broadcast.bind(this)}:null}async getInfo(){return r.InteropClient.ferryFdc3Call(this.client,"fdc3v2GetInfo",{fdc3Version:"2.0"})}}t.Fdc3Module2=Fdc3Module2},"../../js-adapter/out/src/api/interop/fdc3/fdc3-client-factory.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fdc3Factory=void 0;const i=n("../../js-adapter/out/src/api/interop/fdc3/fdc3-1.2.js"),o=n("../../js-adapter/out/src/api/interop/fdc3/fdc3-2.0.js");t.fdc3Factory=(e,t,n)=>{switch(e){case"1.2":return new i.Fdc3Module((()=>t),n);case"2.0":return new o.Fdc3Module2((()=>t),n);default:throw new Error(`Invalid FDC3 version provided: ${e}. Must be '1.2' or '2.0'`)}}},"../../js-adapter/out/src/api/interop/fdc3/fdc3-common.js":function(e,t,n){"use strict";var i,o=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},r=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FDC3ModuleBase=void 0;const a=n("../../js-adapter/out/src/api/interop/fdc3/utils.js"),c=n("../../js-adapter/out/src/api/interop/utils.js"),d=n("../../js-adapter/out/src/api/interop/InteropClient.js"),l=s(n("../../node_modules/lodash/isEqual.js"));t.FDC3ModuleBase=class FDC3ModuleBase{get client(){return o(this,i,"f").call(this)}get fin(){return this.wire.getFin()}constructor(e,t){this.wire=t,i.set(this,void 0),r(this,i,e,"f")}async broadcast(e){return this.wire.sendAction("fdc3-broadcast").catch((e=>{})),this.client.setContext(e)}async _open(e,t){this.wire.sendAction("fdc3-open").catch((e=>{}));try{return await d.InteropClient.ferryFdc3Call(this.client,"fdc3Open",{app:e,context:t})}catch(e){const t=e.message===c.BROKER_ERRORS.fdc3Open?"ResolverUnavailable":e.message;throw new Error(t)}}async _getChannels(){return(await this.client.getContextGroups()).map((e=>({...e,type:"system",...(0,a.getUnsupportedChannelApis)()})))}async getOrCreateChannel(e,t){this.wire.sendAction("fdc3-get-or-create-channel").catch((e=>{}));if(await d.InteropClient.ferryFdc3Call(this.client,"isIdUsedByPrivateChannel",{channelId:e}))throw new Error(a.ChannelError.AccessDenied);const n=(await this._getChannels()).find((t=>t.id===e));if(n)return{...n,type:"system",...(0,a.getUnsupportedChannelApis)()};try{return t(await this.client.joinSessionContextGroup(e))}catch(e){throw console.error(e.message),new Error(a.ChannelError.CreationFailed)}}async getSystemChannels(){return this.wire.sendAction("fdc3-get-system-channels").catch((e=>{})),this._getChannels()}async joinChannel(e){this.wire.sendAction("fdc3-join-channel").catch((e=>{}));try{return await this.client.joinContextGroup(e)}catch(e){if(e.message===c.BROKER_ERRORS.joinSessionContextGroupWithJoinContextGroup?console.error("The Channel you have tried to join is an App Channel. Custom Channels can only be defined by the Interop Broker through code or manifest configuration. Please use getOrCreateChannel."):console.error(e.message),e.message.startsWith("Attempting to join a context group that does not exist"))throw new Error(a.ChannelError.NoChannelFound);throw new Error(a.ChannelError.AccessDenied)}}async getCurrentChannel(){this.wire.sendAction("fdc3-get-current-channel").catch((e=>{}));const e=await this.getCurrentContextGroupInfo();return e?this.buildChannelObject(e):null}async leaveCurrentChannel(){return this.wire.sendAction("fdc3-leave-current-channel").catch((e=>{})),this.client.removeFromContextGroup()}async getCurrentContextGroupInfo(){const e=await this.client.getContextGroups(),t=e.map((async e=>this.client.getAllClientsInContextGroup(e.id)));return e[(await Promise.all(t)).findIndex((e=>e.some((e=>{const{uuid:t,name:n}=e;return this.wire.me.uuid===t&&this.wire.me.name===n}))))]}async buildChannelObject(e){return{...e,type:"system",addContextListener:(...[e,t])=>{let n,i;"function"==typeof e?(console.warn("addContextListener(handler) has been deprecated. Please use addContextListener(null, handler)"),n=e):(n=t,"string"==typeof e&&(i=e));const o=(async()=>{let e=!0;const t=await this.client.getCurrentContext(i);return this.client.addContextHandler(((i,o)=>{if(!e||(e=!1,!(0,l.default)(t,i)))return n(i,o)}),i)})();return{...o,unsubscribe:()=>o.then((e=>e.unsubscribe()))}},broadcast:this.broadcast.bind(this),getCurrentContext:async e=>{const t=await this.client.getCurrentContext(e);return void 0===t?null:t}}}},i=new WeakMap},"../../js-adapter/out/src/api/interop/fdc3/fdc3.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFdc3=t.versionMap=void 0;const i=n("../../js-adapter/out/src/api/interop/fdc3/fdc3-1.2.js"),o=n("../../js-adapter/out/src/api/interop/fdc3/fdc3-2.0.js");t.versionMap={1.2:i.Fdc3Module,"2.0":o.Fdc3Module2};const r="2.0";t.getFdc3=function getFdc3(e,n=r){n in t.versionMap||(console.warn(`FDC3 API version: ${n} is not supported. Defaulting to latest version: ${r}.`),n=r);const i=new(0,t.versionMap[n])((()=>e.getFin().me.interop),e);return window.dispatchEvent(new CustomEvent("fdc3Ready")),i}},"../../js-adapter/out/src/api/interop/fdc3/overrideCheck.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.overrideCheck=t.checkFDC32Overrides=t.getDefaultViewFdc3VersionFromAppInfo=void 0;const i=n("../../js-adapter/out/src/api/interop/InteropBroker.js");function checkFDC32Overrides(e){return["fdc3HandleFindInstances","handleInfoForIntent","handleInfoForIntentsByContext","fdc3HandleGetAppMetadata","fdc3HandleGetInfo","fdc3HandleOpen","handleFiredIntent","handleFiredIntentForContext"].filter((t=>e[t]===i.InteropBroker.prototype[t]))}t.getDefaultViewFdc3VersionFromAppInfo=function getDefaultViewFdc3VersionFromAppInfo({manifest:e,initialOptions:t}){const n=e?.platform?.defaultViewOptions?.fdc3InteropApi??t.defaultViewOptions?.fdc3InteropApi;return["1.2","2.0"].includes(n??"")?n:void 0},t.checkFDC32Overrides=checkFDC32Overrides,t.overrideCheck=function overrideCheck(e,t){if(t&&"2.0"===t){const t=checkFDC32Overrides(e);t.length>0&&console.warn(`WARNING: FDC3 2.0 has been set as a default option for Views in this Platform, but the required InteropBroker APIs for FDC3 2.0 compliance have not all been overridden.\nThe following APIs need to be overridden:\n${t.join("\n")}`)}}},"../../js-adapter/out/src/api/interop/fdc3/utils.js":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getIntentResolution=t.isChannel=t.isContext=t.connectPrivateChannel=t.buildPrivateChannelObject=t.ChannelError=t.ResultError=t.UnsupportedChannelApiError=t.getUnsupportedChannelApis=void 0;const o=n("../../js-adapter/out/src/api/interop/utils.js"),r=n("../../js-adapter/out/src/api/interop/fdc3/PrivateChannelClient.js"),s=(i(n("../../node_modules/lodash/isEqual.js")),n("../../js-adapter/out/src/api/interop/fdc3/channels/fdc3-channels-2.0.js"));t.getUnsupportedChannelApis=e=>({addContextListener:()=>{throw new UnsupportedChannelApiError("Channel.addContextListener",e)},broadcast:()=>{throw new UnsupportedChannelApiError("Channel.broadcast",e)},getCurrentContext:()=>{throw new UnsupportedChannelApiError("Channel.getCurrentContext",e)}});class UnsupportedChannelApiError extends Error{constructor(e,t="System"){super(e),this.message=`Calling ${e} on an instance of a ${t} Channel returned by fdc3.get${t}Channels is not supported. If you would like to use a ${t} Channel, please use fdc3.joinChannel, fdc3.addContextListener, and fdc3.broadcast instead.`}}var a;t.UnsupportedChannelApiError=UnsupportedChannelApiError,function(e){e.NoResultReturned="NoResultReturned",e.IntentHandlerRejected="IntentHandlerRejected"}(a=t.ResultError||(t.ResultError={})),function(e){e.NoChannelFound="NoChannelFound",e.AccessDenied="AccessDenied",e.CreationFailed="CreationFailed"}(t.ChannelError||(t.ChannelError={}));t.buildPrivateChannelObject=e=>{let t=!1;const checkIfClientDisconnected=()=>{if(t)throw new Error("Private Channel Client has been disconnected from the Private Channel")};return{id:e.id,type:"private",broadcast:async t=>(checkIfClientDisconnected(),e.broadcast(t)),getCurrentContext:async t=>(checkIfClientDisconnected(),e.getCurrentContext(t)),addContextListener:async(t,n)=>{checkIfClientDisconnected();let i=n,o=t;"function"==typeof t&&(console.warn("addContextListener(handler) has been deprecated. Please use addContextListener(null, handler)"),i=t,o=null);return e.addContextListener(o,i)},onAddContextListener:t=>(checkIfClientDisconnected(),e.onAddContextListener(t)),disconnect:async()=>(checkIfClientDisconnected(),t=!0,e.disconnect()),onDisconnect:t=>(checkIfClientDisconnected(),e.onDisconnect(t)),onUnsubscribe:t=>(checkIfClientDisconnected(),e.onUnsubscribe(t))}};t.connectPrivateChannel=async e=>{try{const n=await fin.InterApplicationBus.Channel.connect(e),i=new r.PrivateChannelClient(n,e);return(0,t.buildPrivateChannelObject)(i)}catch(t){throw new Error(`Private Channel with id: ${e} doesn't exist`)}};t.isContext=e=>{if(e&&"object"==typeof e&&"type"in e){const{type:t}=e;return"string"==typeof t}return!1};t.isChannel=e=>{if(e&&"object"==typeof e&&"type"in e&&"id"in e){const{type:t,id:n}=e;return"string"==typeof t&&"string"==typeof n&&("app"===t||"private"===t)}return!1};t.getIntentResolution=async(e,n,i,r)=>{const c=(0,o.generateId)();let d=!1;const l=i?{target:i,intentResolutionResultId:c}:{intentResolutionResultId:c},u=r?{name:r,context:n,metadata:l}:{...n,metadata:l},p=new Promise(((t,n)=>{fin.InterApplicationBus.subscribe({uuid:"*"},c,(e=>{t(e)})).catch((()=>{"other"===e.wire.environment.type&&t(void 0),n(new Error("getResult is not supported in this environment"))}))}));p.then((()=>{d=!0})).catch((()=>{d=!0}));const getResult=async()=>{if(!d)return;let n=await p;if(d&&!n)return;if("object"!=typeof n)throw new Error(a.NoResultReturned);const{error:i}=n;if(i)throw new Error(a.IntentHandlerRejected);if((0,t.isChannel)(n)){const{id:i,type:o}=n;switch(o){case"private":n=await(0,t.connectPrivateChannel)(i);break;case"app":{const t=await e.joinSessionContextGroup(i);n=(0,s.createV2Channel)(t);break}}}else if(!(0,t.isContext)(n))throw new Error(a.NoResultReturned);return n},h=r?await e.fireIntent(u):await e.fireIntentForContext(u);return"object"!=typeof h?{source:{appId:"",instanceId:""},intent:"",version:"2.0",getResult}:{...h,getResult}}},"../../js-adapter/out/src/api/interop/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/interop/Factory.js"),t),o(n("../../js-adapter/out/src/api/interop/InteropClient.js"),t),o(n("../../js-adapter/out/src/api/interop/InteropBroker.js"),t)},"../../js-adapter/out/src/api/interop/utils.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkContextIntegrity=t.wrapIntentHandler=t.BROKER_ERRORS=t.generateOverrideWarning=t.generateOverrideError=t.wrapContextHandler=t.wrapInTryCatch=t.generateId=void 0;t.generateId=()=>`${Math.random()}${Date.now()}`;t.wrapInTryCatch=(e,t)=>(...n)=>{try{return e(...n)}catch(e){throw new Error((t||"")+e)}};t.wrapContextHandler=(e,t)=>async n=>{try{await e(n)}catch(e){throw console.error(`Error thrown by handler ${t} for context type ${n.type}: ${e}`),e}};t.generateOverrideError=(e,t)=>`You have tried to to use ${e} but ${t} has not been overridden in the Interop Broker. Please override this function. Refer to our documentation for more info.`;t.generateOverrideWarning=(e,t,n,i)=>{const{uuid:o,name:r}=n;return i?`Entity with identity: ${o}/${r} has called ${i} or ${e} but ${t} has not been overridden.`:`Entity with identity: ${o}/${r} has called ${e} but ${t} has not been overridden.`},t.BROKER_ERRORS={fireIntent:(0,t.generateOverrideError)("fireIntent","handleFiredIntent"),fireIntentForContext:(0,t.generateOverrideError)("fireIntentForContext","handleFiredIntentForContext"),getInfoForIntent:(0,t.generateOverrideError)("getInfoForIntent","handleInfoForIntent"),getInfoForIntentsByContext:(0,t.generateOverrideError)("getInfoForIntentsByContext","handleInfoForIntentsByContext"),joinSessionContextGroupWithJoinContextGroup:"The Context Group you have tried to join is a Session Context Group. Custom Context Groups can only be defined by the Interop Broker through code or manifest configuration. Please use joinSessionContextGroup.",fdc3Open:(0,t.generateOverrideError)("fdc3.open","fdc3HandleOpen"),fdc3FindInstances:(0,t.generateOverrideError)("fdc3.findInstances","fdc3HandleFindInstances"),fdc3GetAppMetadata:(0,t.generateOverrideError)("fdc3.getAppMetadata","fdc3HandleGetAppMetadata"),fdc3GetInfo:(0,t.generateOverrideError)("fdc3.getInfo","fdc3HandleGetInfo")};t.wrapIntentHandler=(e,t)=>async n=>{try{return e(n)}catch(e){throw console.error(`Error thrown by handler ${t}: ${e}`),e}};t.checkContextIntegrity=e=>e?"object"!=typeof e?{isValid:!1,reason:"Context must be an Object"}:e.type?{isValid:!0}:{isValid:!1,reason:"Context must have a type property"}:{isValid:!1,reason:"No context supplied"}},"../../js-adapter/out/src/api/me.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMe=t.getBaseMe=t.environmentUnsupportedMessage=void 0;const i=n("../../js-adapter/out/src/api/view/index.js"),o=n("../../js-adapter/out/src/api/frame/index.js"),r=n("../../js-adapter/out/src/api/window/index.js"),s=n("../../js-adapter/out/src/api/external-application/index.js");function getBaseMe(e,t,n){return{...{isView:"view"===e,isWindow:"window"===e,isFrame:"iframe"===e,isExternal:"external connection"===e},uuid:t,name:n,entityType:e}}t.environmentUnsupportedMessage="You are not running in OpenFin.",t.getBaseMe=getBaseMe,t.getMe=function getMe(e){const{uuid:n,name:a,entityType:c}=e.me,d={setContext(){throw new Error(t.environmentUnsupportedMessage)},addContextHandler(){throw new Error(t.environmentUnsupportedMessage)},getContextGroups(){throw new Error(t.environmentUnsupportedMessage)},joinContextGroup(){throw new Error(t.environmentUnsupportedMessage)},removeFromContextGroup(){throw new Error(t.environmentUnsupportedMessage)},getAllClientsInContextGroup(){throw new Error(t.environmentUnsupportedMessage)},getInfoForContextGroup(){throw new Error(t.environmentUnsupportedMessage)}},l="Interop API has not been instantiated. Either connection has failed or you have not declared interop in your config.",u={setContext(){throw new Error(l)},addContextHandler(){throw new Error(l)},getContextGroups(){throw new Error(l)},joinContextGroup(){throw new Error(l)},removeFromContextGroup(){throw new Error(l)},getAllClientsInContextGroup(){throw new Error(l)},getInfoForContextGroup(){throw new Error(l)}},p={eventNames:()=>{throw new Error(t.environmentUnsupportedMessage)},emit:()=>{throw new Error(t.environmentUnsupportedMessage)},listeners:()=>{throw new Error(t.environmentUnsupportedMessage)},listenerCount:()=>{throw new Error(t.environmentUnsupportedMessage)},on:()=>{throw new Error(t.environmentUnsupportedMessage)},addListener:()=>{throw new Error(t.environmentUnsupportedMessage)},once:()=>{throw new Error(t.environmentUnsupportedMessage)},prependListener:()=>{throw new Error(t.environmentUnsupportedMessage)},prependOnceListener:()=>{throw new Error(t.environmentUnsupportedMessage)},removeListener:()=>{throw new Error(t.environmentUnsupportedMessage)},removeAllListeners:()=>{throw new Error(t.environmentUnsupportedMessage)}};switch(c){case"view":return Object.assign(new i.View(e,{uuid:n,name:a}),getBaseMe(c,n,a),{interop:u,isOpenFin:!0});case"window":return Object.assign(new r._Window(e,{uuid:n,name:a}),getBaseMe(c,n,a),{interop:u,isOpenFin:!0});case"iframe":return Object.assign(new o._Frame(e,{uuid:n,name:a}),getBaseMe(c,n,a),{interop:u,isOpenFin:!0});case"external connection":return Object.assign(new s.ExternalApplication(e,{uuid:n}),getBaseMe(c,n,a),{interop:u,isOpenFin:!1});default:return{...getBaseMe(c,n,a),...p,interop:d,isOpenFin:!1}}}},"../../js-adapter/out/src/api/notification-manager/factory.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationManagerModule=void 0;const i=n("../../js-adapter/out/src/api/base.js"),o=n("../../js-adapter/out/src/api/notification-manager/instance.js");class NotificationManagerModule extends i.Base{constructor(){super(...arguments),this.init=async()=>{const{payload:{data:{managerId:e}}}=await this.wire.sendAction("init-notification-manager");return new o.NotificationManagerInstance(this.wire,e)}}}t.NotificationManagerModule=NotificationManagerModule},"../../js-adapter/out/src/api/notification-manager/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/notification-manager/factory.js"),t),o(n("../../js-adapter/out/src/api/notification-manager/instance.js"),t)},"../../js-adapter/out/src/api/notification-manager/instance.js":function(e,t,n){"use strict";var i,o,r,s,a=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},c=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationManagerInstance=void 0;const d=n("../../js-adapter/out/src/util/lazy.js");t.NotificationManagerInstance=class NotificationManagerInstance{constructor(e,t){i.set(this,void 0),o.set(this,void 0),r.set(this,void 0),s.set(this,new d.Lazy((async()=>(await c(this,i,"f").registerMessageHandler((e=>{if("notification-created"===e.action&&e.payload.managerId===c(this,r,"f")){const{notificationId:t,properties:n,documentUrl:i,notificationIcon:r,badge:s,image:a}=e.payload;try{c(this,o,"f")?.call(this,{properties:n,images:{image:a,icon:r,badge:s},url:i,notificationId:t})}catch(e){console.error("Failed to handle notification",e)}return!0}return!1})),!0)))),this.setNotificationHandler=async e=>{await c(this,s,"f").getValue(),a(this,o,e,"f")},this.destroy=async()=>{await c(this,i,"f").sendAction("destroy-notification-manager",{managerId:c(this,r,"f")})},this.dispatch=async e=>{const{notificationId:t,type:n}=e;await c(this,i,"f").sendAction("dispatch-notification-event",{notificationId:t,type:n})},a(this,i,e,"f"),a(this,r,t,"f")}},i=new WeakMap,o=new WeakMap,r=new WeakMap,s=new WeakMap},"../../js-adapter/out/src/api/platform/Factory.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformModule=void 0;const i=n("../../js-adapter/out/src/api/base.js"),o=n("../../js-adapter/out/src/api/platform/Instance.js"),r=n("../../js-adapter/out/src/api/platform/layout/index.js");class PlatformModule extends i.Base{constructor(e,t){super(e),this._channel=t,this.Layout=new r.LayoutModule(this.wire)}async init(e){if(!fin.__internal_.isPlatform||fin.me.name!==fin.me.uuid)throw new Error("fin.Platform.init should only be called from a custom platform provider running in the main window of the application.");return this.wire.environment.initPlatform(this.fin,e)}async wrap(e){return this.wire.sendAction("platform-wrap").catch((e=>{})),new o.Platform(this.wire,{uuid:e.uuid})}wrapSync(e){return this.wire.sendAction("platform-wrap-sync").catch((e=>{})),new o.Platform(this.wire,{uuid:e.uuid})}async getCurrent(){return this.wire.sendAction("platform-get-current").catch((e=>{})),this.wrap({uuid:this.wire.me.uuid})}getCurrentSync(){return this.wire.sendAction("platform-get-current-sync").catch((e=>{})),this.wrapSync({uuid:this.wire.me.uuid})}start(e){return this.wire.sendAction("platform-start").catch((e=>{})),new Promise((async(t,n)=>{try{const{uuid:n}=e,i=await this.fin.Application._create({...e,isPlatformController:!0});i.once("platform-api-ready",(()=>t(this.wrapSync({uuid:n})))),i._run({uuid:n})}catch(e){n(e)}}))}startFromManifest(e,t){return this.wire.sendAction("platform-start-from-manifest").catch((e=>{})),new Promise((async(n,i)=>{try{const i=await this.fin.Application._createFromManifest(e);i.once("platform-api-ready",(()=>n(this.wrapSync({uuid:i.identity.uuid})))),i._run(t)}catch(e){i(e)}}))}}t.PlatformModule=PlatformModule},"../../js-adapter/out/src/api/platform/Instance.js":function(e,t,n){"use strict";var i,o,r=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Platform=void 0;const a=n("../../js-adapter/out/src/api/base.js"),c=n("../../js-adapter/out/src/util/validate.js");class Platform extends a.EmitterBase{constructor(e,t,n=`custom-frame-${t.uuid}`){super(e,"application",t.uuid),i.set(this,void 0),this.getClient=(e=this.identity)=>{if(e.uuid!==this.identity.uuid)return new Platform(this.wire,e).getClient();if(this.wire.sendAction("platform-get-client",this.identity).catch((e=>{})),!Platform.clientMap.has(s(this,i,"f"))){const e=s(this,o,"f").call(this);Platform.clientMap.set(s(this,i,"f"),e)}return Platform.clientMap.get(s(this,i,"f"))},o.set(this,(async()=>{try{const e=await this._channel.connect(s(this,i,"f"),{wait:!1});return e.onDisconnection((()=>{Platform.clientMap.delete(s(this,i,"f"))})),e}catch(e){throw Platform.clientMap.delete(s(this,i,"f")),new Error("The targeted Platform is not currently running. Listen for application-started event for the given Uuid.")}})),this.launchLegacyManifest=this.launchContentManifest;const a=(0,c.validateIdentity)(t);if(a)throw new Error(a);r(this,i,n,"f"),this._channel=this.fin.InterApplicationBus.Channel,this.identity={uuid:t.uuid},this.Layout=this.fin.Platform.Layout,this.Application=this.fin.Application.wrapSync(this.identity)}async createView(e,t,n){this.wire.sendAction("platform-create-view",this.identity).catch((e=>{}));const i=await this.getClient(),o=await i.dispatch("create-view",{target:t,opts:e,targetView:n});if(!o||(0,c.validateIdentity)(o.identity))throw new Error(`When overwriting the createView call, please return an object that has a valid 'identity' property: ${JSON.stringify(o)}`);return this.fin.View.wrapSync(o.identity)}async createWindow(e){this.wire.sendAction("platform-create-window",this.identity).catch((e=>{}));const t=await this.getClient();e.reason||(e.reason="api-call");const n=await t.dispatch("create-view-container",e);if(!n||(0,c.validateIdentity)(n.identity))throw new Error(`When overwriting the createWindow call, please return an object that has a valid 'identity' property: ${JSON.stringify(n)}`);const{identity:i}=n,o=this.fin.Window.wrapSync(i);return o.name=i.name,o.uuid=i.uuid,o}async quit(){this.wire.sendAction("platform-quit",this.identity).catch((e=>{}));return(await this.getClient()).dispatch("quit")}async closeView(e){this.wire.sendAction("platform-close-view",this.identity).catch((e=>{}));const t=await this.getClient();await t.dispatch("close-view",{view:e})}async reparentView(e,t){console.warn("Platform.reparentView has been deprecated, please use Platform.createView"),this.wire.sendAction("platform-reparent-view",this.identity).catch((e=>{}));const n={...e,uuid:e.uuid??this.identity.uuid},i=await this.fin.View.wrap(n),o=await i.getOptions();return this.createView(o,t)}async getSnapshot(){this.wire.sendAction("platform-get-snapshot",this.identity).catch((e=>{}));return(await this.getClient()).dispatch("get-snapshot")}async getViewSnapshot(e){return(await this.getClient()).dispatch("get-view-snapshot",{viewIdentity:e})}async applySnapshot(e,t){this.wire.sendAction("platform-apply-snapshot",this.identity).catch((e=>{}));const n="Requested snapshot must be a valid Snapshot object, or a url or filepath to such an object.";let i;if("string"==typeof e)try{i=(await this._channel.wire.sendAction("get-application-manifest",{manifestUrl:e})).payload.data}catch(e){throw new Error(`${n}: ${e}`)}else i=e;if(!i.windows)throw new Error(n);const o=await this.getClient();return await o.dispatch("apply-snapshot",{snapshot:i,options:t}),this}async fetchManifest(e){return(await this.getClient()).dispatch("platform-fetch-manifest",{manifestUrl:e})}async launchContentManifest(e){this.wire.sendAction("platform-launch-content-manifest",this.identity).catch((()=>{}));const t=await this.getClient(),n=await this.fetchManifest(e);return t.dispatch("launch-into-platform",{manifest:n,manifestUrl:e}),this}async setWindowContext(e={},t){if(this.wire.sendAction("platform-set-window-context",this.identity).catch((e=>{})),!e)throw new Error("Please provide a serializable object or string to set the context.");const n=await this.getClient(),{entityType:i}=t?await this.fin.System.getEntityInfo(t.uuid,t.name):this.fin.me;await n.dispatch("set-window-context",{context:e,entityType:i,target:t||{uuid:this.fin.me.uuid,name:this.fin.me.name}})}async getWindowContext(e){this.wire.sendAction("platform-get-window-context",this.identity).catch((e=>{}));const t=await this.getClient(),{entityType:n}=e?await this.fin.System.getEntityInfo(e.uuid,e.name):this.fin.me;return t.dispatch("get-window-context",{target:e||{uuid:this.fin.me.uuid,name:this.fin.me.name},entityType:n})}async closeWindow(e,t={skipBeforeUnload:!1}){this.wire.sendAction("platform-close-window",this.identity).catch((e=>{}));return(await this.getClient()).dispatch("close-window",{windowId:e,options:t})}}t.Platform=Platform,i=new WeakMap,o=new WeakMap,Platform.clientMap=new Map},"../../js-adapter/out/src/api/platform/common-utils.js":(e,t)=>{"use strict";function isValidPresetType(e){switch(e){case"columns":case"grid":case"rows":case"tabs":return!0;default:return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.overrideFromComposables=t.isValidPresetType=void 0,t.isValidPresetType=isValidPresetType,t.overrideFromComposables=function overrideFromComposables(...e){return t=>e.reduceRight(((e,t)=>n=>t(e(n))),(e=>e))(t)},t.default={isValidPresetType}},"../../js-adapter/out/src/api/platform/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/platform/Factory.js"),t),o(n("../../js-adapter/out/src/api/platform/Instance.js"),t)},"../../js-adapter/out/src/api/platform/layout/Factory.js":function(e,t,n){"use strict";var i,o,r,s,a,c=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},d=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutModule=void 0;const l=n("../../js-adapter/out/src/api/base.js"),u=n("../../js-adapter/out/src/api/platform/layout/Instance.js"),p=n("../../js-adapter/out/src/api/platform/layout/layout.constants.js");class LayoutModule extends l.Base{constructor(){super(...arguments),i.add(this),o.set(this,!1),r.set(this,null),this.init=async(e={})=>{if(this.wire.sendAction("layout-init").catch((e=>{})),!this.wire.environment.layoutAllowedInContext(this.fin))throw new Error("Layout.init can only be called from a Window context.");if(c(this,o,"f"))throw new Error("Layout.init was already called, please use Layout.create to add additional layouts.");"openfin"===this.wire.environment.type&&await this.fin.Platform.getCurrentSync().getClient(),d(this,o,!0,"f"),d(this,r,await this.wire.environment.initLayoutManager(this.fin,this.wire,e),"f"),await this.wire.environment.applyLayoutSnapshot(this.fin,c(this,r,"f"),e);const t={name:this.fin.me.name,uuid:this.fin.me.uuid};if(!e.layoutManagerOverride){const e={layoutName:p.DEFAULT_LAYOUT_KEY,...t};return c(this,s,"f").call(this,e)}return this.wrapSync(t)},s.set(this,(e=>{const t="[Layout] You are using a deprecated property `layoutManager` - it will throw if you access it starting in v37.",n=new Proxy({},{get(e,n){throw console.warn(`[Layout-mgr-proxy] accessing ${n.toString()}`),new Error(t)}}),i=Object.assign(this.wrapSync(e),{layoutManager:n});return new Proxy(i,{get(e,n){if("layoutManager"===n)throw console.warn(`[Layout-proxy] accessing ${n.toString()}`),new Error(t);return e[n]}})})),this.getCurrentLayoutManagerSync=()=>c(this,i,"m",a).call(this,"fin.Platform.Layout.getCurrentLayoutManagerSync()"),this.create=async e=>this.wire.environment.createLayout(c(this,i,"m",a).call(this,"fin.Platform.Layout.create()"),e),this.destroy=async e=>this.wire.environment.destroyLayout(c(this,i,"m",a).call(this,"fin.Platform.Layout.destroy()"),e)}async wrap(e){return this.wire.sendAction("layout-wrap").catch((e=>{})),new u.Layout(e,this.wire)}wrapSync(e){return this.wire.sendAction("layout-wrap-sync").catch((e=>{})),new u.Layout(e,this.wire)}async getCurrent(){if(this.wire.sendAction("layout-get-current").catch((e=>{})),"openfin"===this.wire.environment.type&&!this.fin.me.isWindow)throw new Error("You are not in a Window context.  Only Windows can have a Layout.");const{uuid:e,name:t}=this.fin.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("layout-get-current-sync").catch((e=>{})),"openfin"===this.wire.environment.type&&!this.fin.me.isWindow)throw new Error("You are not in a Window context.  Only Windows can have a Layout.");const{uuid:e,name:t}=this.fin.me;return this.wrapSync({uuid:e,name:t})}async getLayoutByViewIdentity(e){this.wire.sendAction("layout-get-by-view-identity").catch((()=>{}));let t=await this.wire.environment.getViewWindowIdentity(this.fin,e);t.identity&&(t=t.identity);try{const n=this.wrapSync(t),i=await u.Layout.getClient(n),o=await i.getLayoutIdentityForViewOrThrow(e);return this.wrapSync(o)}catch(n){if(!["No action registered at target for","getLayoutIdentityForViewOrThrow is not a function"].some((e=>n.message.includes(e))))throw n;if(t.uuid===t.name)throw new Error(`View identity ${JSON.stringify(e)} is not attached to any layout in provider window ${JSON.stringify(t)}.`);return this.wrapSync(t)}}}t.LayoutModule=LayoutModule,o=new WeakMap,r=new WeakMap,s=new WeakMap,i=new WeakSet,a=function _LayoutModule_getSafeLayoutManager(e){if(!c(this,r,"f"))throw new Error(`You must call init before using the API ${e}`);return c(this,r,"f")}},"../../js-adapter/out/src/api/platform/layout/Instance.js":function(e,t,n){"use strict";var i,o,r,s=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0;const a=n("../../js-adapter/out/src/util/lazy.js"),c=n("../../js-adapter/out/src/util/validate.js"),d=n("../../js-adapter/out/src/api/base.js"),l=n("../../js-adapter/out/src/api/platform/common-utils.js"),u=n("../../js-adapter/out/src/api/platform/layout/entities/layout-entities.js"),p=n("../../js-adapter/out/src/api/platform/layout/layout.constants.js");class Layout extends d.Base{static getClient(e){return s(e,o,"f").getValue()}constructor(e,t){super(t),i.add(this),o.set(this,new a.Lazy((async()=>u.LayoutNode.newLayoutEntitiesClient(await this.platform.getClient(),p.LAYOUT_CONTROLLER_ID,this.identity)))),this.replace=async e=>{this.wire.sendAction("layout-replace").catch((e=>{}));const t=await this.platform.getClient();await t.dispatch("replace-layout",{target:this.identity,opts:{layout:e}})},this.replaceView=async(e,t)=>{this.wire.sendAction("layout-replace-view").catch((e=>{}));const n=await this.platform.getClient();await n.dispatch("replace-view",{target:this.identity,opts:{viewToReplace:e,newView:t}})},this.applyPreset=async e=>{this.wire.sendAction("layout-apply-preset").catch((e=>{}));const t=await this.platform.getClient(),{presetType:n}=e;if(!n||!(0,l.isValidPresetType)(n))throw new Error("Cannot apply preset layout, please include an applicable presetType property in the PresetLayoutOptions.");await t.dispatch("apply-preset-layout",{target:this.identity,opts:{presetType:n}})};const n=(0,c.validateIdentity)(e);if(n)throw new Error(n);this.identity=e,this.platform=this.fin.Platform.wrapSync({uuid:e.uuid}),e.uuid===this.fin.me.uuid&&e.name===this.fin.me.name&&(this.init=this.fin.Platform.Layout.init)}async getConfig(){this.wire.sendAction("layout-get-config").catch((e=>{}));return(await this.platform.getClient()).dispatch("get-frame-snapshot",{target:this.identity})}async getCurrentViews(){this.wire.sendAction("layout-get-views").catch((e=>{}));const e=await this.platform.getClient();return(await e.dispatch("get-layout-views",{target:this.identity})).map((e=>this.fin.View.wrapSync(e)))}async getRootItem(){this.wire.sendAction("layout-get-root-item").catch((()=>{}));const e=await s(this,o,"f").getValue(),t=await e.getRoot("layoutName"in this.identity?this.identity:void 0);return u.LayoutNode.getEntity(t,e)}async getStackByViewIdentity(e){this.wire.sendAction("layout-get-stack-by-view").catch((()=>{}));const t=await s(this,o,"f").getValue(),n=await t.getStackByView(e);if(!n)throw new Error(`No stack found for view: ${e.uuid}/${e.name}`);return u.LayoutNode.getEntity(n,t)}async addView(e,{location:t,targetView:n}={}){this.wire.sendAction("layout-add-view").catch((e=>{}));const{identity:o}=await s(this,i,"m",r).call(this,"layout-add-view",{viewOptions:e,location:t,targetView:n});return{identity:o}}async closeView(e){this.wire.sendAction("layout-close-view").catch((e=>{})),await s(this,i,"m",r).call(this,"layout-close-view",{viewIdentity:e})}}t.Layout=Layout,o=new WeakMap,i=new WeakSet,r=async function _Layout_forwardLayoutAction(e,t){return(await this.platform.getClient()).dispatch(e,{target:this.identity,opts:t})}},"../../js-adapter/out/src/api/platform/layout/entities/layout-entities.js":function(e,t,n){"use strict";var i,o,r,s=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnOrRow=t.TabStack=t.LayoutNode=void 0;const c=n("../../js-adapter/out/src/api/api-exposer/index.js"),d=n("../../js-adapter/out/src/util/channel-api-relay.js");class LayoutNode{constructor(e,t){i.set(this,void 0),this.isRoot=()=>a(this,i,"f").isRoot(this.entityId),this.exists=()=>a(this,i,"f").exists(this.entityId),this.getParent=async()=>{const e=await a(this,i,"f").getParent(this.entityId);if(e)return LayoutNode.getEntity(e,a(this,i,"f"))},this.createAdjacentStack=async(e,t)=>{const n=await a(this,i,"f").createAdjacentStack(this.entityId,e,t);return LayoutNode.getEntity({entityId:n,type:"stack"},a(this,i,"f"))},this.getAdjacentStacks=async e=>(await a(this,i,"f").getAdjacentStacks({targetId:this.entityId,edge:e})).map((e=>LayoutNode.getEntity({type:"stack",entityId:e.entityId},a(this,i,"f")))),s(this,i,e,"f"),this.entityId=t}}t.LayoutNode=LayoutNode,i=new WeakMap,LayoutNode.newLayoutEntitiesClient=async(e,t,n)=>{const i=(0,d.createRelayedDispatch)(e,n,"layout-relay","You are trying to interact with a layout component on a window that does not exist or has been destroyed.");return new c.ApiConsumer(new c.ChannelsConsumer({dispatch:i})).consume({id:t})},LayoutNode.getEntity=(e,t)=>{const{entityId:n,type:i}=e;switch(i){case"column":case"row":return new ColumnOrRow(t,n,i);case"stack":return new TabStack(t,n);default:throw new Error(`Unrecognised Layout Entity encountered ('${JSON.stringify(e)})`)}};class TabStack extends LayoutNode{constructor(e,t){super(e,t),o.set(this,void 0),this.type="stack",this.getViews=()=>a(this,o,"f").getStackViews(this.entityId),this.addView=async(e,t={index:0})=>a(this,o,"f").addViewToStack(this.entityId,e,t),this.removeView=async e=>{await a(this,o,"f").removeViewFromStack(this.entityId,e)},this.setActiveView=async e=>{await a(this,o,"f").setStackActiveView(this.entityId,e)},s(this,o,e,"f")}}t.TabStack=TabStack,o=new WeakMap;class ColumnOrRow extends LayoutNode{constructor(e,t,n){super(e,t),r.set(this,void 0),this.getContent=async()=>(await a(this,r,"f").getContent(this.entityId)).map((e=>LayoutNode.getEntity(e,a(this,r,"f")))),s(this,r,e,"f"),this.type=n}}t.ColumnOrRow=ColumnOrRow,r=new WeakMap},"../../js-adapter/out/src/api/platform/layout/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/platform/layout/Factory.js"),t),o(n("../../js-adapter/out/src/api/platform/layout/Instance.js"),t)},"../../js-adapter/out/src/api/platform/layout/layout.constants.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_LAYOUT_KEY=t.LAYOUT_CONTROLLER_ID=void 0,t.LAYOUT_CONTROLLER_ID="layout-entities",t.DEFAULT_LAYOUT_KEY="__default__"},"../../js-adapter/out/src/api/snapshot-source/Factory.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SnapshotSourceModule=void 0;const i=n("../../js-adapter/out/src/api/base.js"),o=n("../../js-adapter/out/src/api/snapshot-source/Instance.js"),r=n("../../js-adapter/out/src/api/snapshot-source/utils.js");class SnapshotSourceModule extends i.Base{async init(e){if(this.wire.sendAction("snapshot-source-init").catch((e=>{})),"object"!=typeof e||"function"!=typeof e.getSnapshot||"function"!=typeof e.applySnapshot)throw new Error("you must pass in a valid SnapshotProvider");const t=await this.fin.InterApplicationBus.Channel.create((0,r.getSnapshotSourceChannelName)(this.fin.me));t.register("get-snapshot",(async()=>({snapshot:await e.getSnapshot()}))),t.register("apply-snapshot",(({snapshot:t})=>e.applySnapshot(t)))}wrapSync(e){return this.wire.sendAction("snapshot-source-wrap-sync").catch((e=>{})),new o.SnapshotSource(this.wire,e)}async wrap(e){return this.wire.sendAction("snapshot-source-wrap").catch((e=>{})),this.wrapSync(e)}}t.SnapshotSourceModule=SnapshotSourceModule},"../../js-adapter/out/src/api/snapshot-source/Instance.js":function(e,t,n){"use strict";var i,o,r,s,a,c=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},d=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SnapshotSource=void 0;const l=n("../../js-adapter/out/src/api/base.js"),u=n("../../js-adapter/out/src/api/snapshot-source/utils.js"),p=new Map;class SnapshotSource extends l.Base{constructor(e,t){super(e),i.set(this,void 0),o.set(this,(()=>(p.has(this.identity.uuid)||p.set(this.identity.uuid,{eventFired:null,clientPromise:null}),p.get(this.identity.uuid)))),r.set(this,(()=>(d(this,o,"f").call(this).clientPromise||(d(this,o,"f").call(this).clientPromise=d(this,s,"f").call(this)),d(this,o,"f").call(this).clientPromise))),s.set(this,(async()=>{const e=(0,u.getSnapshotSourceChannelName)(this.identity);try{d(this,o,"f").call(this).eventFired||await d(this,a,"f").call(this);const t=await this.fin.InterApplicationBus.Channel.connect(e,{wait:!1});return t.onDisconnection((()=>{d(this,o,"f").call(this).clientPromise=null,d(this,o,"f").call(this).eventFired=null})),t}catch(e){throw d(this,o,"f").call(this).clientPromise=null,new Error("The targeted SnapshotSource is not currently initialized. Await this object's ready() method.")}})),a.set(this,(async()=>{const e=(0,u.getSnapshotSourceChannelName)(this.identity);let t,n;const i=new Promise(((e,i)=>{t=e,n=i}));d(this,o,"f").call(this).eventFired=i;const listener=async i=>{try{i.channelName===e&&(t(),await this.fin.InterApplicationBus.Channel.removeListener("connected",listener))}catch(e){n(e)}};await this.fin.InterApplicationBus.Channel.on("connected",listener)})),c(this,i,t,"f")}get identity(){return d(this,i,"f")}async ready(){this.wire.sendAction("snapshot-source-ready").catch((e=>{}));try{await d(this,r,"f").call(this)}catch(e){await d(this,o,"f").call(this).eventFired}}async getSnapshot(){this.wire.sendAction("snapshot-source-get-snapshot").catch((e=>{}));const e=await d(this,r,"f").call(this),t=await e.dispatch("get-snapshot");return(await t).snapshot}async applySnapshot(e){this.wire.sendAction("snapshot-source-apply-snapshot").catch((e=>{}));return(await d(this,r,"f").call(this)).dispatch("apply-snapshot",{snapshot:e})}}t.SnapshotSource=SnapshotSource,i=new WeakMap,o=new WeakMap,r=new WeakMap,s=new WeakMap,a=new WeakMap},"../../js-adapter/out/src/api/snapshot-source/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/snapshot-source/Factory.js"),t),o(n("../../js-adapter/out/src/api/snapshot-source/Instance.js"),t)},"../../js-adapter/out/src/api/snapshot-source/utils.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSnapshotSourceChannelName=void 0;t.getSnapshotSourceChannelName=e=>`snapshot-source-provider-${e.uuid}`},"../../js-adapter/out/src/api/system/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.System=void 0;const i=n("../../js-adapter/out/src/api/base.js"),o=n("../../js-adapter/out/src/transport/transport-errors.js"),r=n("../../js-adapter/out/src/api/window/index.js"),s=n("events");class System extends i.EmitterBase{constructor(e){super(e,"system")}sendExternalProcessRequest(e,t){return new Promise(((n,i)=>{const o="external-process-exited";let s,a,c,d;"function"==typeof t.listener&&(c=e=>{const n=e||{};a={topic:"exited",uuid:n.processUuid||"",exitCode:n.exitCode||0},s===e.processUuid&&(t.listener(a),d.removeListener(o,c))},this.wire.me.name||(this.wire.me.name=this.wire.me.uuid),d=new r._Window(this.wire,this.wire.me),d.on(o,c)),this.wire.sendAction(e,t).then((({payload:e})=>{s=e.data.uuid,n(e.data),a&&s===a.uuid&&(t.listener(a),d.removeListener(o,c))})).catch((e=>{d&&d.removeListener(o,c),i(e)}))}))}getVersion(){return this.wire.sendAction("get-version").then((({payload:e})=>e.data))}clearCache(e){return this.wire.sendAction("clear-cache",e).then((()=>{}))}deleteCacheOnExit(){return this.wire.sendAction("delete-cache-request").then((()=>{}))}exit(){return this.wire.sendAction("exit-desktop").then((()=>{}))}async fetchManifest(e){const{payload:{data:t}}=await this.wire.sendAction("fetch-manifest",{manifestUrl:e});return t}flushCookieStore(){return this.wire.sendAction("flush-cookie-store").then((()=>{}))}getAllWindows(){return this.wire.sendAction("get-all-windows").then((({payload:e})=>e.data))}getAllApplications(){return this.wire.sendAction("get-all-applications").then((({payload:e})=>e.data))}getCommandLineArguments(){return this.wire.sendAction("get-command-line-arguments").then((({payload:e})=>e.data))}async getCrashReporterState(){const{payload:{data:{diagnosticMode:e,isRunning:t}}}=await this.wire.sendAction("get-crash-reporter-state");return console.warn("diagnosticMode property is deprecated. It will be removed in a future version"),{diagnosticMode:e,diagnosticsMode:e,isRunning:t}}async startCrashReporter(e){const t=e,n={...t,diagnosticMode:t.diagnosticsMode||t.diagnosticMode},{payload:{data:{diagnosticMode:i,isRunning:o}}}=await this.wire.sendAction("start-crash-reporter",n);return{diagnosticMode:i,diagnosticsMode:i,isRunning:o}}getUniqueUserId(){return this.wire.sendAction("get-unique-user-id").then((({payload:e})=>e.data))}getEntityInfo(e,t){return this.wire.sendAction("get-entity-info",{uuid:e,name:t}).then((({payload:e})=>e.data))}getEnvironmentVariable(e){return this.wire.sendAction("get-environment-variable",{environmentVariables:e}).then((({payload:e})=>e.data))}getFocusedWindow(){return this.wire.sendAction("get-focused-window").then((({payload:e})=>e.data))}getFocusedContent(){return this.wire.sendAction("get-focused-content").then((({payload:e})=>e.data))}async isAppCertified(e){const{payload:{data:{certifiedInfo:t}}}=await this.wire.sendAction("is-app-certified",{manifestUrl:e});return t}getInstalledRuntimes(){return this.wire.sendAction("get-installed-runtimes").then((({payload:e})=>e.data.runtimes))}async getInstalledApps(){const{payload:{data:{installedApps:e}}}=await this.wire.sendAction("get-installed-apps");return e}getLog(e){return this.wire.sendAction("view-log",e).then((({payload:e})=>e.data))}getMachineId(){return this.wire.sendAction("get-machine-id").then((({payload:e})=>e.data))}getMinLogLevel(){return this.wire.sendAction("get-min-log-level").then((({payload:e})=>e.data))}getLogList(){return this.wire.sendAction("list-logs").then((({payload:e})=>e.data))}getMonitorInfo(){return this.wire.sendAction("get-monitor-info").then((({payload:e})=>e.data))}getMousePosition(){return this.wire.sendAction("get-mouse-position").then((({payload:e})=>e.data))}getProcessList(){return console.warn("System.getProcessList has been deprecated. Please consider using our new process APIs: Window.getProcessInfo, View.getProcessInfo, Application.getProcessInfo, System.getAllProcessInfo"),this.wire.sendAction("process-snapshot").then((({payload:e})=>e.data))}async getAllProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("get-all-process-info",this.identity);return e}getProxySettings(){return this.wire.sendAction("get-proxy-settings").then((({payload:e})=>e.data))}getRuntimeInfo(){return this.wire.sendAction("get-runtime-info").then((({payload:e})=>e.data))}getRvmInfo(){return this.wire.sendAction("get-rvm-info").then((({payload:e})=>e.data))}getHostSpecs(){return this.wire.sendAction("get-host-specs").then((({payload:e})=>e.data))}getOSInfo(){return this.wire.sendAction("get-os-info").then((({payload:e})=>e.data))}launchExternalProcess(e){return this.sendExternalProcessRequest("launch-external-process",e)}monitorExternalProcess(e){return this.sendExternalProcessRequest("monitor-external-process",e)}log(e,t){return this.wire.sendAction("write-to-log",{level:e,message:t}).then((()=>{}))}openUrlWithBrowser(e){return this.wire.sendAction("open-url-with-browser",{url:e}).then((()=>{}))}async registerCustomProtocol(e){if("object"!=typeof e)throw new Error("Must provide an object with a `protocolName` property having a string value.");await this.wire.sendAction("register-custom-protocol",e)}async unregisterCustomProtocol(e){await this.wire.sendAction("unregister-custom-protocol",{protocolName:e})}async getCustomProtocolState(e){return this.wire.sendAction("get-custom-protocol-state",{protocolName:e}).then((({payload:e})=>e.data))}releaseExternalProcess(e){return this.wire.sendAction("release-external-process",{uuid:e}).then((()=>{}))}showDeveloperTools(e){return this.wire.sendAction("show-developer-tools",e).then((()=>{}))}terminateExternalProcess(e){return this.wire.sendAction("terminate-external-process",e).then((()=>{}))}updateProxySettings(e){return this.wire.sendAction("update-proxy",e).then((()=>{}))}async downloadAsset(e,t){const noop=()=>{};let n=noop,i=noop;const r=new Promise(((e,t)=>{n=e,i=t}));if("openfin"!==this.wire.environment.type)throw new o.NotSupportedError("downloadAsset only supported in an OpenFin Render process");const s=o.RuntimeError.getCallSite(),a=this.wire.environment.getNextMessageId().toString(),c=`asset-download-progress-${a}`,d=`asset-download-error-${a}`,l=`asset-download-complete-${a}`,dlProgress=e=>{const n={downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes};t(n)},cleanListeners=()=>{this.removeListener(c,dlProgress)};await Promise.all([this.on(c,dlProgress),this.once(d,(e=>{cleanListeners();const{reason:t,err:n}=e;i(new o.RuntimeError({reason:t,error:n},s))})),this.once(l,(()=>{cleanListeners(),n()}))]);const u=Object.assign(e,{downloadId:a});return await this.wire.sendAction("download-asset",u).catch((e=>{throw cleanListeners(),e})),r}downloadRuntime(e,t){const n=o.RuntimeError.getCallSite();return new Promise(((i,r)=>{if("openfin"!==this.wire.environment.type)return void r(new o.NotSupportedError("downloadRuntime only supported in an OpenFin Render process"));const s=this.wire.environment.getNextMessageId().toString(),a=`runtime-download-progress-${s}`,c=`runtime-download-error-${s}`,d=`runtime-download-complete-${s}`,dlProgress=e=>{const n={downloadedBytes:e.downloadedBytes,totalBytes:e.totalBytes};t(n)},cleanListeners=()=>{this.removeListener(a,dlProgress)};this.on(a,dlProgress),this.once(c,(e=>{cleanListeners();const{reason:t,err:i}=e;r(new o.RuntimeError({reason:t,error:i},n))})),this.once(d,(()=>{cleanListeners(),i()}));const l=Object.assign(e,{downloadId:s});this.wire.sendAction("download-runtime",l).catch((e=>{cleanListeners(),r(e)}))}))}downloadPreloadScripts(e){return this.wire.sendAction("download-preload-scripts",{scripts:e}).then((({payload:e})=>e.data))}getAllExternalApplications(){return this.wire.sendAction("get-all-external-applications").then((({payload:e})=>e.data))}getAppAssetInfo(e){return this.wire.sendAction("get-app-asset-info",e).then((({payload:e})=>e.data))}getCookies(e){const t=this.wire.environment.getUrl(),n=Object.assign(e,{url:t});return this.wire.sendAction("get-cookies",n).then((({payload:e})=>e.data))}setMinLogLevel(e){return this.wire.sendAction("set-min-log-level",{level:e}).then((()=>{}))}resolveUuid(e){return this.wire.sendAction("resolve-uuid",{entityKey:e}).then((({payload:e})=>e.data))}executeOnRemote(e,t){return t.requestingIdentity=e,this.wire.ferryAction(t)}readRegistryValue(e,t,n){return this.wire.sendAction("read-registry-value",{rootKey:e,subkey:t,value:n}).then((({payload:e})=>e.data))}registerExternalConnection(e){return this.wire.sendAction("register-external-connection",{uuid:e}).then((({payload:e})=>e.data))}async getServiceConfiguration(e){if("string"!=typeof e.name)throw new Error("Must provide an object with a `name` property having a string value");const{name:t}=e;return this.wire.sendAction("get-service-configuration",{name:t}).then((({payload:e})=>e.data))}async getSystemAppConfig(e){if("string"!=typeof e)throw new Error("Must provide a string value for name of system app");return this.wire.sendAction("get-system-app-configuration",{name:e}).then((({payload:e})=>e.data))}async registerShutdownHandler(e){this.wire.sendAction("system-register-shutdown-handler").catch((e=>{}));const{uuid:t,name:n}=this.wire.me;this.on("system-shutdown",(i=>{e({proceed:()=>{this.wire.environment.raiseEvent("application/system-shutdown-handled",{uuid:t,name:n,topic:"application"})}})}))}runRvmHealthCheck(){return this.wire.sendAction("run-rvm-health-check").then((({payload:e})=>e.data))}async launchManifest(e,t={}){const{subscribe:n,...i}=t,o=i;if(n){const e=new s.EventEmitter;n(e);const t="app-version-progress",i="runtime-status",r="app-version-complete",a="app-version-error",c=this.wire.environment.getNextMessageId().toString();o.appVersionId=c;const d=[r,t,i,a],cleanEventPayload=e=>{const{appVersionId:t,topic:n,type:i,...o}=e;return{...o,type:d.find((e=>i.includes(e)))}},appVersionListener=t=>{const n=cleanEventPayload(t);e.emit(n.type,n)},removeAllListeners=()=>{this.removeListener(`${t}.${c}`,appVersionListener),this.removeListener(`${i}.${c}`,appVersionListener),this.removeListener(`${r}.${c}`,appVersionListener),this.removeListener(`${a}.${c}`,appVersionListener),this.removeListener(`${r}.${c}`,removeAllListeners),this.removeListener(`${a}.${c}`,removeAllListeners)};await Promise.all([this.on(`${t}.${c}`,appVersionListener),this.on(`${i}.${c}`,appVersionListener),this.once(`${r}.${c}`,appVersionListener),this.once(`${a}.${c}`,appVersionListener),this.once(`${r}.${c}`,removeAllListeners),this.once(`${a}.${c}`,removeAllListeners)])}return(await this.wire.sendAction("launch-manifest",{manifestUrl:e,opts:o})).payload.data.manifest}async queryPermissionForCurrentContext(e){const t={uuid:this.wire.me.uuid,name:this.wire.me.name};return(await this.wire.sendAction("query-permission-for-current-context",{apiName:e,identity:t})).payload.data}async enableNativeWindowIntegrationProvider(e){const{payload:t}=await this.wire.sendAction("enable-native-window-integration-provider",{permissions:e});return t.data}async registerUsage({data:e,type:t}){await this.wire.sendAction("register-usage",{data:e,type:t})}async getPrinters(){const{payload:e}=await this.wire.sendAction("system-get-printers");return e.data}async updateProcessLoggingOptions(e){await this.wire.sendAction("system-update-process-logging-options",{options:e})}async getDomainSettings(){const{payload:{data:e}}=await this.wire.sendAction("get-domain-settings");return e}async setDomainSettings(e){await this.wire.sendAction("set-domain-settings",{domainSettings:e})}async getCurrentDomainSettings(e){return(await this.wire.sendAction("get-current-domain-settings",{identity:e})).payload.data}async resolveDomainSettings(e){return(await this.wire.sendAction("resolve-domain-settings",{url:e})).payload.data}async refreshExtensions(){const{payload:e}=await this.wire.sendAction("refresh-extensions");return e.data}async getInstalledExtensions(){const{payload:e}=await this.wire.sendAction("get-installed-extensions");return e.data}async serveAsset(e){return(await this.wire.sendAction("serve-asset",{options:e})).payload.data}async launchLogUploader(e){return(await this.wire.sendAction("launch-log-uploader",{options:e})).payload.data}}t.System=System},"../../js-adapter/out/src/api/view/Factory.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModule=void 0;const i=n("../../js-adapter/out/src/api/base.js"),o=n("../../js-adapter/out/src/util/validate.js"),r=n("../../js-adapter/out/src/api/view/index.js"),s=n("../../js-adapter/out/src/util/warnings.js");class ViewModule extends i.Base{async create(e){const{uuid:t}=this.wire.me;if(!e.name||"string"!=typeof e.name)throw new Error("Please provide a name property as a string in order to create a View.");return(0,s.handleDeprecatedWarnings)(e),this.wire.environment.childViews?await this.wire.environment.createChildContent({entityType:"view",options:{...e,uuid:t}}):await this.wire.sendAction("create-view",{...e,uuid:t}),this.wrapSync({uuid:t,name:e.name})}async wrap(e){this.wire.sendAction("view-wrap").catch((e=>{}));const t=(0,o.validateIdentity)(e);if(t)throw new Error(t);return new r.View(this.wire,e)}wrapSync(e){this.wire.sendAction("view-wrap-sync").catch((e=>{}));const t=(0,o.validateIdentity)(e);if(t)throw new Error(t);return new r.View(this.wire,e)}getCurrent(){if(this.wire.sendAction("view-get-current").catch((e=>{})),!this.wire.me.isView)throw new Error("You are not in a View context");const{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("view-get-current-sync").catch((e=>{})),!this.wire.me.isView)throw new Error("You are not in a View context");const{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}t.ViewModule=ViewModule},"../../js-adapter/out/src/api/view/Instance.js":(e,t,n)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;const o=n("../../js-adapter/out/src/transport/transport-errors.js"),r=n("../../js-adapter/out/src/util/lazy.js"),s=n("../../js-adapter/out/src/api/webcontents/main.js"),a=n("../../js-adapter/out/src/api/window/index.js");class View extends s.WebContents{constructor(e,t){super(e,t,"view"),this.identity=t,i.set(this,new r.Lazy((()=>this.fin.Platform.wrapSync(this.identity).getClient()))),this.attach=async e=>{await this.wire.sendAction("attach-view",{target:e,...this.identity})},this.destroy=async()=>{await this.wire.sendAction("destroy-view",{...this.identity})},this.show=async()=>{await this.wire.sendAction("show-view",{...this.identity})},this.showAt=async(e,t={})=>{await this.wire.sendAction("show-view-at",{bounds:e,...this.identity,options:t})},this.bringToFront=async()=>{await this.wire.sendAction("bring-view-to-front",{...this.identity})},this.hide=async()=>{await this.wire.sendAction("hide-view",{...this.identity})},this.setBounds=async e=>{await this.wire.sendAction("set-view-bounds",{bounds:e,...this.identity})},this.getBounds=async()=>(await this.wire.sendAction("get-view-bounds",{...this.identity})).payload.data,this.getInfo=async()=>(await this.wire.sendAction("get-view-info",{...this.identity})).payload.data,this.getParentLayout=async()=>(this.wire.sendAction("view-get-parent-layout").catch((()=>{})),this.fin.Platform.Layout.getLayoutByViewIdentity(this.identity)),this.getOptions=async()=>this.wire.sendAction("get-view-options",{...this.identity}).then((({payload:e})=>e.data)),this.updateOptions=async e=>this.wire.sendAction("update-view-options",{options:e,...this.identity}).then((()=>{})),this.getCurrentWindow=async()=>{const{payload:{data:e}}=await this.wire.sendAction("get-view-window",{...this.identity});return new a._Window(this.wire,e)},this.getCurrentStack=async()=>{this.wire.sendAction("view-get-current-stack").catch((()=>{}));try{return(await this.getParentLayout()).getStackByViewIdentity(this.identity)}catch(e){throw new o.RuntimeError({reason:"This view does not belong to a stack.",error:e})}},this.triggerBeforeUnload=async()=>(await this.wire.sendAction("trigger-before-unload",{...this.identity})).payload.data,this.bindToElement=async e=>{if(!e)throw new Error("Element not found.");return this.wire.environment.observeBounds(e,(async e=>this.setBounds(e)))}}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){const t=await this.getCurrentWindow();await t.focusedWebViewWasChanged(),await super.focus({emitSynthFocused:e})}}t.View=View,i=new WeakMap},"../../js-adapter/out/src/api/view/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/view/Factory.js"),t),o(n("../../js-adapter/out/src/api/view/Instance.js"),t)},"../../js-adapter/out/src/api/webcontents/main.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebContents=void 0;const i=n("../../js-adapter/out/src/api/base.js");class WebContents extends i.EmitterBase{constructor(e,t,n){super(e,n,t.uuid,t.name),this.identity=t,this.entityType=n}capturePage(e){return this.wire.sendAction("capture-page",{options:e,...this.identity}).then((({payload:e})=>e.data))}executeJavaScript(e){return this.wire.sendAction("execute-javascript-in-window",{...this.identity,code:e}).then((({payload:e})=>e.data))}getZoomLevel(){return this.wire.sendAction("get-zoom-level",this.identity).then((({payload:e})=>e.data))}setZoomLevel(e){return this.wire.sendAction("set-zoom-level",{...this.identity,level:e}).then((()=>{}))}navigate(e){return this.wire.sendAction("navigate-window",{...this.identity,url:e}).then((()=>{}))}navigateBack(){return this.wire.sendAction("navigate-window-back",{...this.identity}).then((()=>{}))}async navigateForward(){await this.wire.sendAction("navigate-window-forward",{...this.identity})}stopNavigation(){return this.wire.sendAction("stop-window-navigation",{...this.identity}).then((()=>{}))}reload(e=!1){return this.wire.sendAction("reload-window",{ignoreCache:e,...this.identity}).then((()=>{}))}print(e={}){return this.wire.sendAction("print",{...this.identity,options:e}).then((()=>{}))}findInPage(e,t){return this.wire.sendAction("find-in-page",{...this.identity,searchTerm:e,options:t}).then((({payload:e})=>e.data))}stopFindInPage(e){return this.wire.sendAction("stop-find-in-page",{...this.identity,action:e}).then((()=>{}))}getPrinters(){return this.wire.sendAction("get-printers",{...this.identity}).then((({payload:e})=>e.data))}async focus({emitSynthFocused:e}={emitSynthFocused:!0}){await this.wire.sendAction("focus-window",{emitSynthFocused:e,...this.identity})}async showDeveloperTools(){await this.wire.sendAction("show-developer-tools",this.identity)}async getProcessInfo(){const{payload:{data:e}}=await this.wire.sendAction("get-process-info",this.identity);return e}async getSharedWorkers(){return this.wire.sendAction("get-shared-workers",this.identity).then((({payload:e})=>e.data))}async inspectSharedWorker(){await this.wire.sendAction("inspect-shared-worker",{...this.identity})}async inspectSharedWorkerById(e){await this.wire.sendAction("inspect-shared-worker-by-id",{...this.identity,workerId:e})}async inspectServiceWorker(){await this.wire.sendAction("inspect-service-worker",{...this.identity})}async showPopupWindow(e){if(this.wire.sendAction(`${this.entityType}-show-popup-window`,this.identity).catch((()=>{})),e?.onPopupReady){const readyListener=async({popupName:t})=>{try{const n=this.fin.Window.wrapSync({uuid:this.fin.me.uuid,name:t});await e.onPopupReady(n)}catch(e){throw new Error(`Something went wrong during onPopupReady execution: ${e}`)}};await this.once("popup-ready",readyListener)}const{payload:t}=await this.wire.sendAction("try-create-popup-window",{options:{...e,hasResultCallback:!!e?.onPopupResult,hasReadyCallback:!!e?.onPopupReady},...this.identity}),{data:{willOpen:n,options:i}}=t;n&&await this.fin.Window.create(i.initialOptions);if(e?.onPopupResult){const dispatchResultListener=async t=>{await e.onPopupResult((e=>{const{name:t,uuid:n,result:i,data:o}=e,r={identity:{name:t,uuid:n},result:i};return o&&(r.data=o),r})(t))},teardownListener=async()=>{await this.removeListener("popup-result",dispatchResultListener)};await this.on("popup-result",dispatchResultListener),await this.once("popup-teardown",teardownListener)}const{payload:o}=await this.wire.sendAction("show-popup-window",{options:i,...this.identity});return o.data}async getScreenCapturePermission(){return(await this.wire.sendAction("get-screen-capture-permissions",this.identity)).payload.data}}t.WebContents=WebContents},"../../js-adapter/out/src/api/window/Factory.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._WindowModule=void 0;const i=n("../../js-adapter/out/src/api/base.js"),o=n("../../js-adapter/out/src/util/validate.js"),r=n("../../js-adapter/out/src/api/window/Instance.js");class _WindowModule extends i.Base{async wrap(e){this.wire.sendAction("window-wrap").catch((e=>{}));const t=(0,o.validateIdentity)(e);if(t)throw new Error(t);return new r._Window(this.wire,e)}wrapSync(e){this.wire.sendAction("window-wrap-sync").catch((e=>{}));const t=(0,o.validateIdentity)(e);if(t)throw new Error(t);return new r._Window(this.wire,e)}create(e){this.wire.sendAction("create-window").catch((e=>{}));return new r._Window(this.wire,{uuid:this.me.uuid,name:e.name}).createWindow(e)}getCurrent(){if(this.wire.sendAction("get-current-window").catch((e=>{})),!this.wire.me.isWindow)throw new Error("You are not in a Window context");const{uuid:e,name:t}=this.wire.me;return this.wrap({uuid:e,name:t})}getCurrentSync(){if(this.wire.sendAction("get-current-window-sync").catch((e=>{})),!this.wire.me.isWindow)throw new Error("You are not in a Window context");const{uuid:e,name:t}=this.wire.me;return this.wrapSync({uuid:e,name:t})}}t._WindowModule=_WindowModule},"../../js-adapter/out/src/api/window/Instance.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._Window=void 0;const i=n("../../js-adapter/out/src/api/application/index.js"),o=n("../../js-adapter/out/src/api/webcontents/main.js"),r=n("../../js-adapter/out/src/api/view/index.js"),s=n("../../js-adapter/out/src/util/warnings.js"),a=n("../../js-adapter/out/src/util/promisifySubscription.js");class _Window extends o.WebContents{constructor(e,t){super(e,t,"window")}async createWindow(e){this.wire.sendAction("window-create-window").catch((e=>{}));const t=await(0,a.promisifySubscription)(this,"fire-constructor-callback");void 0===e.waitForPageLoad&&(e.waitForPageLoad=!1),void 0===e.autoShow&&(e.autoShow=!0),(0,s.handleDeprecatedWarnings)(e);const n=this.wire.environment.createChildContent({entityType:"window",options:e}),[i]=await Promise.all([t.getValue(),n]);let o;const{success:r}=i,c=i.data,{message:d}=c;o=r?{httpResponseCode:c.httpResponseCode,apiInjected:c.apiInjected}:{message:c.message,networkErrorCode:c.networkErrorCode,stack:c.stack};const l={message:d,cbPayload:o,success:r};try{this.getWebWindow().fin.__internal_.openerSuccessCBCalled()}catch(e){}return l.success?this:Promise.reject(l)}getAllFrames(){return this.wire.sendAction("get-all-frames",this.identity).then((({payload:e})=>e.data))}activateAndFocus(e){return this.wire.sendAction("activate-window-and-focus",{winIdentity:this.identity,focusIdentity:e}).then((({payload:e})=>e.data))}getBounds(e){return this.wire.sendAction("get-window-bounds",{...this.identity,options:e}).then((({payload:e})=>e.data))}center(){return this.wire.sendAction("center-window",this.identity).then((()=>{}))}blur(){return this.wire.sendAction("blur-window",this.identity).then((()=>{}))}bringToFront(){return this.wire.sendAction("bring-window-to-front",this.identity).then((()=>{}))}animate(e,t){return this.wire.sendAction("animate-window",{transitions:e,options:t,...this.identity}).then((()=>{}))}hide(){return this.wire.sendAction("hide-window",this.identity).then((()=>{}))}close(e=!1){return this.wire.sendAction("close-window",{force:e,...this.identity}).then((()=>{Object.setPrototypeOf(this,null)}))}focusedWebViewWasChanged(){return this.wire.sendAction("focused-webview-changed",this.identity).then((()=>{}))}getNativeId(){return this.wire.sendAction("get-window-native-id",this.identity).then((({payload:e})=>e.data))}async getCurrentViews(){const{payload:e}=await this.wire.sendAction("window-get-views",this.identity);return e.data.map((e=>new r.View(this.wire,e)))}disableFrame(){return console.warn("Function is deprecated; use disableUserMovement instead."),this.wire.sendAction("disable-window-frame",this.identity).then((()=>{}))}disableUserMovement(){return this.wire.sendAction("disable-window-frame",this.identity).then((()=>{}))}enableFrame(){return console.warn("Function is deprecated; use enableUserMovement instead."),this.wire.sendAction("enable-window-frame",this.identity).then((()=>{}))}enableUserMovement(){return this.wire.sendAction("enable-window-frame",this.identity).then((()=>{}))}flash(){return this.wire.sendAction("flash-window",this.identity).then((()=>{}))}stopFlashing(){return this.wire.sendAction("stop-flash-window",this.identity).then((()=>{}))}getInfo(){return this.wire.sendAction("get-window-info",this.identity).then((({payload:e})=>e.data))}async getLayout(e){this.wire.sendAction("window-get-layout").catch((e=>{}));const t=await this.getOptions();if(!t.layout&&!t.layoutSnapshot)throw new Error("Window does not have a Layout");return this.fin.Platform.Layout.wrap(e??this.identity)}getOptions(){return this.wire.sendAction("get-window-options",this.identity).then((({payload:e})=>e.data))}getParentApplication(){return this.wire.sendAction("window-get-parent-application").catch((e=>{})),Promise.resolve(new i.Application(this.wire,this.identity))}getParentWindow(){return this.wire.sendAction("window-get-parent-window").catch((e=>{})),Promise.resolve(new i.Application(this.wire,this.identity)).then((e=>e.getWindow()))}async getSnapshot(e){const t={area:e,...this.identity};console.warn("Window.getSnapshot has been deprecated, please use Window.capturePage");return(await this.wire.sendAction("get-window-snapshot",t)).payload.data}getState(){return this.wire.sendAction("get-window-state",this.identity).then((({payload:e})=>e.data))}getWebWindow(){return this.wire.sendAction("window-get-web-window").catch((e=>{})),this.wire.environment.getWebWindow(this.identity)}isMainWindow(){return this.wire.sendAction("window-is-main-window").catch((e=>{})),this.me.uuid===this.me.name}isShowing(){return this.wire.sendAction("is-window-showing",this.identity).then((({payload:e})=>e.data))}maximize(){return this.wire.sendAction("maximize-window",this.identity).then((()=>{}))}minimize(){return this.wire.sendAction("minimize-window",this.identity).then((()=>{}))}moveBy(e,t,n){return this.wire.sendAction("move-window-by",{deltaLeft:e,deltaTop:t,positioningOptions:n,...this.identity}).then((()=>{}))}moveTo(e,t,n){return this.wire.sendAction("move-window",{left:e,top:t,positioningOptions:n,...this.identity}).then((()=>{}))}resizeBy(e,t,n,i){return this.wire.sendAction("resize-window-by",{deltaWidth:Math.floor(e),deltaHeight:Math.floor(t),anchor:n,positioningOptions:i,...this.identity}).then((()=>{}))}resizeTo(e,t,n,i){return this.wire.sendAction("resize-window",{width:Math.floor(e),height:Math.floor(t),anchor:n,positioningOptions:i,...this.identity}).then((()=>{}))}restore(){return this.wire.sendAction("restore-window",this.identity).then((()=>{}))}setAsForeground(){return this.wire.sendAction("set-foreground-window",this.identity).then((()=>{}))}setBounds(e,t){return this.wire.sendAction("set-window-bounds",{...e,...this.identity,positioningOptions:t}).then((()=>{}))}show(e=!1){return this.wire.sendAction("show-window",{force:e,...this.identity}).then((()=>{}))}showAt(e,t,n=!1){return this.wire.sendAction("show-at-window",{force:n,left:Math.floor(e),top:Math.floor(t),...this.identity}).then((()=>{}))}updateOptions(e){return"frame"in e&&console.warn("Deprecation Warning: Starting with version 45 it will not be possible to change the frame value after window has been created."),this.wire.sendAction("update-window-options",{options:e,...this.identity}).then((()=>{}))}authenticate(e,t){return this.wire.sendAction("window-authenticate",{userName:e,password:t,...this.identity}).then((()=>{}))}async showPopupMenu(e){const{payload:t}=await this.wire.sendAction("show-popup-menu",{options:e,...this.identity});return t.data}async closePopupMenu(){return this.wire.sendAction("close-popup-menu",{...this.identity}).then((()=>{}))}async dispatchPopupResult(e){this.wire.sendAction("window-dispatch-popup-result").catch((e=>{})),await this.wire.sendAction("dispatch-popup-result",{data:e,...this.identity})}async print(e={content:"self"}){switch(e.content){case void 0:case"self":return super.print(e);case"screenshot":return this.wire.sendAction("print-screenshot",this.identity).then((()=>{}));case"views":return this.wire.sendAction("print-views",{...this.identity,options:e}).then((()=>{}));default:return}}}t._Window=_Window},"../../js-adapter/out/src/api/window/index.js":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,o)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n("../../js-adapter/out/src/api/window/Factory.js"),t),o(n("../../js-adapter/out/src/api/window/Instance.js"),t)},"../../js-adapter/out/src/environment/base-env.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseEnvironment=void 0;const i=n("../../js-adapter/out/src/api/interop/fdc3/overrideCheck.js");t.BaseEnvironment=class BaseEnvironment{async getViewWindowIdentity(e,t){const{identity:n}=await e.View.wrapSync(t).getCurrentWindow();return n}async getInteropInfo(e){const t=await e.Application.getCurrentSync().getInfo().catch((()=>null)),n=t?.initialOptions?.interopBrokerConfiguration??{};return{fdc3Version:t?(0,i.getDefaultViewFdc3VersionFromAppInfo)(t):void 0,...n,fdc3Info:{providerVersion:await e.System.getVersion(),provider:"OpenFin"}}}}},"../../js-adapter/out/src/environment/browser.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserEnvironment=void 0;const i=n("../../js-adapter/out/src/environment/base-env.js");class BrowserEnvironment extends i.BaseEnvironment{constructor(){super(...arguments),this.type="other",this.getRandomId=()=>{const e=new Uint32Array(1);return window.crypto.getRandomValues(e)[0].toString(32)}}getAdapterVersionSync(){return""}observeBounds(e,t){throw new Error("Method not implemented.")}layoutAllowedInContext(e){return!1}initLayoutManager(e,t,n){throw new Error("Method not implemented.")}applyLayoutSnapshot(e,t,n){throw new Error("Method not implemented.")}createLayout(e,t){throw new Error("Method not implemented.")}destroyLayout(e,t){throw new Error("Method not implemented.")}resolveLayout(e,t){throw new Error("Method not implemented.")}initPlatform(...e){throw new Error("Method not implemented.")}writeToken(e,t){return Promise.resolve("")}retrievePort(e){throw new Error("Method not implemented.")}getNextMessageId(){return this.getRandomId()}createChildContent(e){throw new Error("Method not implemented.")}getWebWindow(e){throw new Error("Method not implemented.")}getCurrentEntityIdentity(){throw new Error("Method not implemented.")}getCurrentEntityType(){return"external connection"}raiseEvent(e,t){throw new Error("Method not implemented.")}getUrl(){return location.href}getDefaultChannelOptions(){return{create:{},connect:{}}}getRtcPeer(){return new RTCPeerConnection}getWsConstructor(){return WebSocket}whenReady(){return Promise.resolve()}}t.BrowserEnvironment=BrowserEnvironment},"../../js-adapter/out/src/transport/transport-errors.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuntimeError=t.NotSupportedError=t.NotImplementedError=t.NoAckError=t.DuplicateCorrelationError=t.UnexpectedActionError=t.DisconnectedError=void 0;class DisconnectedError extends Error{constructor(e){super(`Expected websocket state OPEN but found ${e}`),this.readyState=e}}t.DisconnectedError=DisconnectedError;class UnexpectedActionError extends Error{}t.UnexpectedActionError=UnexpectedActionError;class DuplicateCorrelationError extends Error{}t.DuplicateCorrelationError=DuplicateCorrelationError;class NoAckError extends Error{}t.NoAckError=NoAckError;class NotImplementedError extends Error{}t.NotImplementedError=NotImplementedError;class NotSupportedError extends Error{}t.NotSupportedError=NotSupportedError;class DeserializedError extends Error{constructor(e){const{message:t,name:n,stack:i,...o}=e;super(t),"cause"in e&&e.cause&&(this.cause=new DeserializedError(e.cause)),this.name=n||"Error",this.stack=i??this.toString(),Object.keys(o).filter((e=>"cause"!==e)).forEach((e=>{this[e]=o[e]}))}}class RuntimeError extends Error{static trimEndCallSites(e,t){const n=Error.stackTraceLimit,i=Error.prepareStackTrace;Error.prepareStackTrace=(e,t)=>t;const o="string"==typeof e.stack,r=(o?e.stack?.split("\n"):e.stack)??[];if(Error.prepareStackTrace=i,Error.stackTraceLimit=n,r.length){const n=[];for(const e of o?r:r.slice(1))if(n.push(e),t.test(e.toString()))break;e.stack=o?n.join("\n"):RuntimeError.prepareStackTrace(e,n)}}static getCallSite(e=0){const t=Error.stackTraceLimit,n=e+1;Error.stackTraceLimit=t+n;const i=Error.prepareStackTrace;Error.prepareStackTrace=(e,t)=>t;const o=(new Error).stack?.slice(n)??[];return Error.prepareStackTrace=i,Error.stackTraceLimit=t,o}static prepareStackTrace(e,t){if("function"==typeof Error.prepareStackTrace)return Error.prepareStackTrace(e,t);let n=`${e.name||"Error"}: ${e.message||""}\n`;return n+=t.map((e=>`    at ${e}`)).join("\n"),n}constructor(e,t){const{reason:n,error:i}=e;super(n),this.name=this.constructor.name,i?.stack&&(this.cause=new DeserializedError(i)),t&&(this.stack=RuntimeError.prepareStackTrace(this,t))}}t.RuntimeError=RuntimeError},"../../js-adapter/out/src/transport/transport.js":function(e,t,n){"use strict";var i,o,r=this&&this.__classPrivateFieldSet||function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},s=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;const c=n("events"),d=n("../../js-adapter/out/src/transport/wire.js"),l=n("../../js-adapter/out/src/transport/transport-errors.js"),u=a(n("../../js-adapter/out/src/api/events/eventAggregator.js")),p=n("../../js-adapter/out/src/api/me.js"),h=n("../../js-adapter/out/src/util/errors.js");class Transport extends c.EventEmitter{constructor(e,t,n){super(),this.wireListeners=new Map,this.topicRefMap=new Map,this.eventAggregator=new u.default,this.messageHandlers=[this.eventAggregator.dispatchEvent],i.set(this,void 0),o.set(this,void 0),this.connectSync=()=>{s(this,i,"f").connectSync()},this.getPort=()=>s(this,i,"f").getPort(),r(this,i,e(this.onmessage.bind(this)),"f"),this.environment=t,this.sendRaw=s(this,i,"f").send.bind(s(this,i,"f")),this.registerMessageHandler(this.handleMessage.bind(this)),s(this,i,"f").on("disconnected",(()=>{for(const[,{handleNack:e}]of this.wireListeners)e({reason:"Remote connection has closed"});this.wireListeners.clear(),this.emit("disconnected")}));const{uuid:a,name:c}=n,d=this.environment.getCurrentEntityType();this.me=(0,p.getBaseMe)(d,a,c)}getFin(){if(!s(this,o,"f"))throw new Error("No Fin object registered for this transport");return s(this,o,"f")}registerFin(e){if(s(this,o,"f"))throw new Error("Fin object has already been registered for this transport");r(this,o,e,"f")}shutdown(){return s(this,i,"f").shutdown()}async connect(e){if((0,d.isConfigWithReceiver)(e))return await s(this,i,"f").connect(e.receiver),this.authorize(e);if((0,d.isRemoteConfig)(e))return this.connectRemote(e);if((0,d.isExistingConnectConfig)(e))return this.connectByPort(e);if((0,d.isNewConnectConfig)(e)){const t=await this.environment.retrievePort(e);return this.connectByPort({...e,address:`ws://localhost:${t}`})}}async connectRemote(e){return await s(this,i,"f").connect(new(this.environment.getWsConstructor())(e.address)),this.authorize(e)}async connectByPort(e){const{address:t,uuid:n}=e,o={...e,type:"file-token"},r=s(this,i,"f");await r.connect(new(this.environment.getWsConstructor())(e.address));const a=await this.sendAction("request-external-authorization",{uuid:n,type:"file-token"},!0);if("external-authorization-response"!==a.action)throw new l.UnexpectedActionError(a.action);return await this.environment.writeToken(a.payload.file,a.payload.token),this.authorize(o)}async authorize(e){const t=await this.sendAction("request-authorization",e,!0);if("authorization-response"!==t.action)throw new l.UnexpectedActionError(t.action);if(!0!==t.payload.success)throw new l.RuntimeError(t.payload)}sendAction(e,t={},n=!1){let cancel=()=>{};const o=l.RuntimeError.getCallSite(1),r=this.environment.getNextMessageId(),a=new Promise(((a,c)=>{cancel=c;const d={action:e,payload:t,messageId:r},l=s(this,i,"f");return this.addWireListener(r,a,(e=>this.nackHandler(e,c,o)),n),l.send(d).catch(c)}));return Object.assign(a,{cancel,messageId:r})}nackHandler(e,t,n){t("string"==typeof e?e:new l.RuntimeError(e,n))}ferryAction(e){return new Promise(((t,n)=>{const o=this.environment.getNextMessageId();e.messageId=o;const resolver=e=>{t(e.payload)};return s(this,i,"f").send(e).then((()=>this.addWireListener(o,resolver,(e=>this.nackHandler(e,n)),!1))).catch(n)}))}registerMessageHandler(e){this.messageHandlers.push(e)}addWireListener(e,t,n,i){i?this.uncorrelatedListener=t:this.wireListeners.has(e)?n({reason:"Duplicate handler id",error:(0,h.errorToPOJO)(new l.DuplicateCorrelationError(String(e)))}):this.wireListeners.set(e,{resolve:t,handleNack:n})}onmessage(e){for(const t of this.messageHandlers)t.call(null,e)}handleMessage(e){const t=e.correlationId||NaN;if("correlationId"in e){if(!this.wireListeners.has(t))return!1;{const{resolve:n,handleNack:i}=this.wireListeners.get(t);"ack"!==e.action?i({reason:"Did not receive ack action",error:(0,h.errorToPOJO)(new l.NoAckError(e.action))}):"payload"in e?e.payload.success?n.call(null,e):i(e.payload):"string"==typeof e.reason?i(e):(console.warn("Received invalid response from core",e),i({reason:"invalid response shape",error:(0,h.errorToPOJO)(new Error("Invalid response shape"))})),this.wireListeners.delete(t)}}else this.uncorrelatedListener&&this.uncorrelatedListener.call(null,e),this.uncorrelatedListener=()=>{};return!0}}t.Transport=Transport,i=new WeakMap,o=new WeakMap},"../../js-adapter/out/src/transport/wire.js":(e,t)=>{"use strict";function isExternalConfig(e){return"string"==typeof e.manifestUrl}function isExistingConnectConfig(e){return hasUuid(e)&&"string"==typeof e.address}function isRemoteConfig(e){return isExistingConnectConfig(e)&&"string"==typeof e.token}function hasUuid(e){return"string"==typeof e.uuid}function hasRuntimeVersion(e){return e.runtime&&"string"==typeof e.runtime.version}function isNewConnectConfig(e){return hasUuid(e)&&hasRuntimeVersion(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isInternalConnectConfig=t.isPortDiscoveryConfig=t.isNewConnectConfig=t.isConfigWithReceiver=t.isRemoteConfig=t.isExistingConnectConfig=t.isExternalConfig=void 0,t.isExternalConfig=isExternalConfig,t.isExistingConnectConfig=isExistingConnectConfig,t.isRemoteConfig=isRemoteConfig,t.isConfigWithReceiver=function isConfigWithReceiver(e){return"object"==typeof e.receiver&&isRemoteConfig({...e,address:""})},t.isNewConnectConfig=isNewConnectConfig,t.isPortDiscoveryConfig=function isPortDiscoveryConfig(e){return isExternalConfig(e)&&hasRuntimeVersion(e)||isNewConnectConfig(e)},t.isInternalConnectConfig=function isInternalConnectConfig(e){return isExistingConnectConfig(e)||isNewConnectConfig(e)}},"../../js-adapter/out/src/util/channel-api-relay.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRelayedDispatch=t.relayChannelClientApi=void 0;const n=["no longer connected","RTCDataChannel closed unexpectedly","The client you are trying to dispatch from is disconnected from the target provider"];t.relayChannelClientApi=async(e,t)=>{e.register(`relay:${t}`,(({action:t,target:n,payload:i})=>e.dispatch(n,t,i))),await Promise.resolve()};t.createRelayedDispatch=(e,t,i,o)=>async(r,s)=>{try{return await e.dispatch(`relay:${i}`,{action:r,payload:s,target:t})}catch(e){if(a=e.message,n.some((e=>a.includes(e)))&&o)throw new Error(o);throw e}var a}},"../../js-adapter/out/src/util/errors.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorToPOJO=void 0,t.errorToPOJO=function errorToPOJO(e){const t={stack:e.stack,name:e.name,message:e.message,toString:()=>e.stack||e.toString()};return"cause"in e&&(t.cause=errorToPOJO(e.cause)),t}},"../../js-adapter/out/src/util/exhaustive.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exhaustiveCheck=void 0,t.exhaustiveCheck=function exhaustiveCheck(e,t){throw new Error(`Unsupported value: ${e}${t?`\n Supported values are: ${t.join("")}`:""}`)}},"../../js-adapter/out/src/util/inaccessibleObject.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWarningObject=t.createUnusableObject=void 0,t.createUnusableObject=function createUnusableObject(e){const handle=()=>{throw new Error(e)};return new Proxy({},{apply:handle,construct:handle,defineProperty:handle,deleteProperty:handle,get:handle,getOwnPropertyDescriptor:handle,getPrototypeOf:handle,has:handle,isExtensible:handle,ownKeys:handle,preventExtensions:handle,set:handle,setPrototypeOf:handle})},t.createWarningObject=function createWarningObject(e,t){return new Proxy(t,{get:(...t)=>(console.warn(e),Reflect.get(...t)),set:(...t)=>(console.warn(e),Reflect.set(...t)),getOwnPropertyDescriptor:(...t)=>(console.warn(e),Reflect.getOwnPropertyDescriptor(...t)),ownKeys:(...t)=>(console.warn(e),Reflect.ownKeys(...t))})}},"../../js-adapter/out/src/util/lazy.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncRetryableLazy=t.Lazy=void 0;t.Lazy=class Lazy{constructor(e){this.producerFn=e}getValue(){return this.value||(this.value=this.producerFn()),this.value}};t.AsyncRetryableLazy=class AsyncRetryableLazy{constructor(e){this.producerFn=e}async getValue(){return this.promise||(this.promise=this.producerFn().catch((e=>{throw delete this.promise,e}))),this.promise}}},"../../js-adapter/out/src/util/promisifySubscription.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promisifySubscription=void 0;t.promisifySubscription=async(e,t,n=(()=>!0),i)=>{let o,r,s;const a=new Promise(((e,t)=>{o=e,r=t})),listener=e=>{n(e)&&(clearTimeout(s),o(e))};return await e.on(t,listener),i&&(s=setTimeout((()=>r(new Error("event timed out"))),i)),a.finally((()=>{e.removeListener(t,listener).catch((()=>null))})),{getValue:()=>a}}},"../../js-adapter/out/src/util/ref-counter.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefCounter=void 0;t.RefCounter=class RefCounter{constructor(){this.topicRefMap=new Map}incRefCount(e){const t=this.topicRefMap.get(e);let n;if(t){const i=t+1;n=i,this.topicRefMap.set(e,i)}else this.topicRefMap.set(e,1),n=1;return n}decRefCount(e){const t=this.topicRefMap.get(e);let n;if(t){const i=t-1;this.topicRefMap.set(e,i),n=i}else n=-1;return n}actOnFirst(e,t,n){return 1===this.incRefCount(e)?t():n()}actOnLast(e,t,n){return 0===this.decRefCount(e)?t():n()}}},"../../js-adapter/out/src/util/runtimeVersioning.js":(e,t)=>{"use strict";function vNum(e){return[...e.split(".").reverse().entries()].reduce(((e,[t,n])=>e+ +n*1e4**t),0)}function meetsMinimumRuntimeVersion(e,t){return vNum(e)>=vNum(t)}function parseRuntimeUuid(e){return e.split("/")[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.runtimeUuidMeetsMinimumRuntimeVersion=t.parseRuntimeUuid=t.meetsMinimumRuntimeVersion=void 0,t.meetsMinimumRuntimeVersion=meetsMinimumRuntimeVersion,t.parseRuntimeUuid=parseRuntimeUuid,t.runtimeUuidMeetsMinimumRuntimeVersion=function runtimeUuidMeetsMinimumRuntimeVersion(e,t){return meetsMinimumRuntimeVersion(parseRuntimeUuid(e),t)}},"../../js-adapter/out/src/util/validate.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateIdentity=void 0,t.validateIdentity=function validateIdentity(e){let t;return"object"==typeof e&&"string"==typeof e.uuid||(t="Not a valid identity object"),t}},"../../js-adapter/out/src/util/warnings.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleDeprecatedWarnings=void 0;t.handleDeprecatedWarnings=e=>{(e.contentNavigation?.whitelist||e.contentNavigation?.blacklist||e.contentRedirect?.whitelist||e.contentRedirect?.blacklist)&&console.warn("The properties 'whitelist' and 'blacklist' have been marked as deprecated and will be removed in a future version. Please use 'allowlist' and 'denylist'.")}},"../../legacy-api/src/application.js":(e,t,n)=>{"use strict";var i=n("../../legacy-api/src/components.js").getComponents(),o=n("../../legacy-api/src/socket.js").sendMessageToDesktop,r=n("../../node_modules/lodash/find.js"),s=n("../../node_modules/lodash/pick.js");function getApplicationIdentity(e){return Object.assign({uuid:this.uuid},e)}fin.desktop.Application=function(e,t,n){if(i.isPreloadScriptsOptionValid(e,n)){if(!new.target)return i.instantiateWithWarning("Application",arguments);var r=i.deepObjCopy(e);this.name=r.name,this.uuid=r.uuid,this.mainWindowOptions=r.mainWindowOptions,r._noregister||o("create-application",r,t,n),this.window=new fin.desktop.Window(getApplicationIdentity.call(this,{_noregister:!0,_nocontentwindow:!0,name:this.uuid})),this._private={}}},fin.desktop.Application.getCurrent=function(){return this._instance=this._instance||fin.desktop.Application.wrap(i.applicationUuid),this._instance},fin.desktop.Application.getCurrentApplication=function(){return console.warn("Function is deprecated; use getCurrent instead."),fin.desktop.Application.getCurrent()},fin.desktop.Application.wrap=function(e){return new fin.desktop.Application({uuid:e,_noregister:!0})},fin.desktop.Application.invoke=function(e,t,n){return o("invoke-application",{uuid:e},t,n),fin.desktop.Application.wrap(e)},fin.desktop.Application.createFromManifest=function(e,t,n){o("get-application-manifest",{manifestUrl:e},(function(o){var r=o.startup_app.uuid,s=fin.desktop.Application.wrap(r);i.isPreloadScriptsOptionValid(o.startup_app,n)&&(s._parentUuid=fin.desktop.Application.getCurrent().uuid,s._manifestUrl=e,t(s))}),n)},fin.desktop.Application.prototype={addEventListener:function(e,t,i,o){n("../../legacy-api/src/desktop-messaging.js").addDesktopEventCallback(getApplicationIdentity.call(this,{topic:"application",type:e}),t,this,i,o)},close:function(e,t,n){o("close-application",getApplicationIdentity.call(this,{force:e||!1}),t,n)},getChildWindows:function(e,t){var n=this.uuid;o("get-child-windows",{uuid:n},(function(t){var i,o=[];if(t&&(Array.isArray(t),1))for(i=0;i<t.length;++i)o.push(fin.desktop.Window.wrap(n,t[i]));"function"==typeof e&&e(o)}),t)},getManifest:function(e,t){o("get-application-manifest",getApplicationIdentity.call(this),e,t)},getParentUuid:function(e,t){o("get-parent-application",getApplicationIdentity.call(this),e,t)},getShortcuts:function(e,t){o("get-shortcuts",getApplicationIdentity.call(this),e,t)},getInfo:function(e,t){o("get-info",getApplicationIdentity.call(this),e,t)},getWindow:function(){return this.window},grantAccess:function(e,t,n){o("grant-access",{grantee:this.uuid,grantAction:e},t,n)},grantWindowAccess:function(e,t,n,i){o("grant-window-access",{grantee:this.uuid,grantAction:e,name:t},n,i)},isRunning:function(e,t){o("is-application-running",getApplicationIdentity.call(this),e,t)},pingChildWindow:function(e,t,n){o("ping-child-window",getApplicationIdentity.call(this,{name:e}),t,n)},registerCustomData:function(){console.warn("Function is deprecated; use registerUser instead.")},registerUser:function(e,t,n,i){o("register-user",getApplicationIdentity.call(this,{userName:e,appName:t}),n,i)},removeEventListener:function(e,t,i,o){n("../../legacy-api/src/desktop-messaging.js").removeDesktopEventCallback(getApplicationIdentity.call(this,{topic:"application",type:e}),t,i,o)},removeTrayIcon:function(e,t){var n=this._private;["tray-icon-clicked","tray-icon-hovering"].forEach((function(e){n[e]&&(this.removeEventListener(e,n[e]),delete n[e])}),this),o("remove-tray-icon",getApplicationIdentity.call(this),e,t)},restart:function(e,t){o("restart-application",getApplicationIdentity.call(this),e,t)},revokeAccess:function(e,t,n){o("revoke-access",{grantee:this.uuid,grantAction:e},t,n)},revokeWindowAccess:function(e,t,n,i){o("revoke-window-access",{grantee:this.uuid,grantAction:e,name:t},n,i)},run:function(e,t){if(e){var n=e;e=function(e){n(s(e,"httpResponseCode"))}}if(t){var i=t;t=function(e,t){i(e,s(t,"networkErrorCode","message","stack"))}}o("run-application",{uuid:this.uuid,manifestUrl:this._manifestUrl},e,t)},scheduleRestart:function(e,t){o("relaunch-on-close",getApplicationIdentity.call(this),e,t)},send:function(e,t){fin.desktop.InterApplicationBus.send(this.uuid,e,t)},setShortcuts:function(e,t,n){o("set-shortcuts",getApplicationIdentity.call(this,{data:e}),t,n)},setAppLogUsername:function(e,t,n){o("set-app-log-username",getApplicationIdentity.call(this,{data:e}),t,n)},sendApplicationLog:function(e,t){o("send-application-log",getApplicationIdentity.call(this),e,t)},setTrayIcon:function(e,t,n,i){const s=this._private;t={"tray-icon-clicked":t.clickListener||t,"tray-icon-hovering":t.hoverListener},r(t,((e,t)=>{s[t]&&(this.removeEventListener(t,s[t],void 0,i),delete s[t]),"function"==typeof e&&(s[t]=e,this.addEventListener(t,e,void 0,i))})),o("set-tray-icon",getApplicationIdentity.call(this,{enabledIcon:e}),n,i)},getTrayIconInfo:function(e,t){o("get-tray-icon-info",getApplicationIdentity.call(this),e,t)},terminate:function(e,t){o("terminate-application",getApplicationIdentity.call(this),e,t)},wait:function(e,t){o("wait-for-hung-application",getApplicationIdentity.call(this),e,t)},getZoomLevel:function(e,t){o("get-application-zoom-level",getApplicationIdentity.call(this),e,t)},setZoomLevel:function(e,t,n){o("set-application-zoom-level",getApplicationIdentity.call(this,{level:e}),t,n)}}},"../../legacy-api/src/components.js":(e,t,n)=>{"use strict";var i={qualifyWindowName:function(e,t){return"*"===e?e:t&&"string"==typeof t?e+"/"+t:this.getAppNamespace(e)},getAppNamespace:function(e){return e+"/#"}},o=function(){const e=n("../../legacy-api/src/desktop-messaging.js");var t,o=e.sendIfAllResultsDispatchedAndComplete,r=e.resubscribeToDesktopEventsAfterLostConnection,s=e.removeDesktopEventCallback,a=e.resubscribeToInterAppBusAfterLostConnection,c=e.sendDragEvent,d={isConnected:!1,isConnectionDeferred:!1,failedToConnect:!1,socket:null,websocketPort:null,applicationUuid:null,applicationToken:null,windowId:null,pingedBefore:!1,messageId:0,websocketProtocol:"ws"},l=[],u=[],p=new Map,h={},f={};function getWindowIdentity(){return fin.__internal_.initialOptions}var w=JSON.parse(JSON.stringify(getWindowIdentity()));t=w.uuid,d.applicationUuid=t,d.applicationWindowName=w.name||d.applicationUuid,d.applicationToken="dependencies.token",d.windowId=undefined;var ExternalMessageResultHandler=function(e){var t=this,n=e,i=fin.desktop.getUuid();t.getId=function(){return i},t.send=function(e,i){n.handleResult(t.getId(),e,i)}};var y={window:{},application:{},system:{},"external-application":{},frame:{},service:{}};function getFullEventType(e,t){var n;switch(e){case"system":case"service":case"external-application":n=t;break;case"window":n=-1===t.indexOf("window-")?"window-"+t:t;break;case"application":n=-1===t.indexOf("application-")?"application-"+t:t;break;case"frame":n=-1===t.indexOf("frame-")?"frame-"+t:t}return n}return d.resolveUrl=function resolveUrl(e){var t=document.createElement("a");return t.href=e,t.href},d.mainCallbacks=[],d.errorCallbacks=[],d.messageCallbackMap=f,d.fireMessageCallback=function fireMessageCallback(e,t){if(t&&t.deprecated){var n=t.deprecated;console.warn("Subscribed to "+n.eventType+": "+n.reason)}if(void 0!==e){var i=f[e];i&&(t.success?"function"==typeof i.successCallback&&i.successCallback.call(window,t.data):"function"==typeof i.errorCallback&&i.errorCallback.call(window,t.reason,t.error?t.error:void 0),delete f[e])}},d.ExternalMessageResultHandlerFactory=function(e){var t={request_:e,factory_:this,sentToDesktop_:!1,nHandlers_:0,nProcessed_:0,handlers_:{},allDispatched_:!1};o(t),this.allDispatched=function(){t.allDispatched_=!0,o()},this.makeResultHandler=function(){var e=new ExternalMessageResultHandler(t.factory_,t.request_);return t.handlers_[e.getId()]={processed:!1,result:!0,message:"",handler:e},++t.nHandlers_,e},this.handleResult=function(e,n,i){var r=t.handlers_[e];!function wasSent(){return t.sentToDesktop_}()&&r&&(r.processed?console.error("Handler already sent result. Can not send success: "+n+" with message: "+i):(r.processed=!0,r.result=n,r.message=i,++t.nProcessed_,o()))}},d.ExternalMessageResultHandler=ExternalMessageResultHandler,d.externalMessageHandlers=[],d.dispatchSystemMessage=function dispatchSystemMessage(e){"function"==typeof window.onSystemMessage&&window.onSystemMessage(e.payload)},d.desktopEventCallbackMap=y,d.resubscribeToDesktopEventsAfterLostConnection=r,d.removeDesktopEventCallback=s,d.dispatchDesktopEvent=function dispatchDesktopEvent(e){var t,n,i,o=y,r=e.topic,s=getFullEventType(r,e.type);switch(r){case"window":case"frame":t=e.uuid,n=e.name,o[r][s]&&o[r][s][t]&&o[r][s][t][n]&&(i=o[r][s][t][n]);break;case"application":case"service":t=e.uuid,o[r][s]&&o[r][s][t]&&(i=o[r][s][t]);break;case"system":o[r][s]&&(i=o[r][s]);break;case"external-application":t=e.uuid,o[r][s]&&(i=o[r][s][t])}var a=e;i&&(i.forEach((function(e){"function"==typeof e&&e.call(e._owner,a)})),i=i.filter((function(e){return void 0!==e})))},d.getFullEventType=getFullEventType,d.getPartialEventType=function getPartialEventType(e,t){var n=e.length+1;return t.slice(n)},d.interAppBusCallbackMap=h,d.utils=i,d.dispatchMessageToCallbacks=function dispatchMessageToCallbacks(e){var t,{sourceUuid:n,sourceWindowName:o,topic:r}=e,s=function getMessage(e){let t,{messageKey:n="message"}=e;switch(n){case"message":t=e[n];break;case"messageString":t=JSON.parse(e[n]);break;default:t=void 0}return t}(e),a=i.getAppNamespace(n),c=i.qualifyWindowName(n,o);"*"in h&&(t=h["*"][r])&&t.forEach((function(e){e.call(window,s,n,o)}));var d=h[c];d&&(t=d[r])&&t.forEach((function(e){e.call(window,s,n,o)}));var l=h[a];l&&(t=l[r])&&t.forEach((function(e){e.call(window,s,n,o)}))},d.windowList={},d.resubscribeToInterAppBusAfterLostConnection=a,d.subscribeCallbacks=l,d.unsubscribeCallbacks=u,d.dispatchToSubscribeListeners=function dispatchToSubscribeListeners(e,n,i,o){i!==t&&i&&"*"!==i||l.forEach((function(t){t(e,o,n)}))},d.dispatchToUnsubscribeListeners=function dispatchToUnsubscribeListeners(e,n,i,o){i!==t&&i&&"*"!==i||u.forEach((function(t){t(e,o,n)}))},d.deepObjCopy=function deepObjCopy(e){var t,n;if("object"==typeof e&&null!==e)for(n in t=Array.isArray(e)?[]:{},e)"object"==typeof e[n]?t[n]=deepObjCopy(e[n]):"string"==typeof e[n]||"number"==typeof e[n]?t[n]=e[n]:"boolean"==typeof e[n]?t[n]=!!e[n]:"function"==typeof e[n]&&(t[n]=e[n]);else t=e;return t},d.sendDragEvent=c,d.noop=function(){},d.getWindowIdentity=getWindowIdentity,d.instantiateWithWarning=function instantiateWithWarning(e,t){let n=fin.desktop[e];if(!/^[A-Z]/.test(e)||"function"!=typeof n)throw new Error(`Expected fin.desktop.${e} to be a constructor.`);return console.warn(`Expected \`new\` operator on \`fin.desktop.${e}(...)\` instantiation (supplied).`),new n(...t)},d.serviceMap=p,d.isPreloadScriptsOptionValid=function isPreloadScriptsOptionValid(e={},t=function(){}){const genErrorMsg=function(e){return`Invalid shape of '${e}' window option. Please, consult the API documentation.`},isValidPreloadScriptsArray=function(e=[]){return e.every((function(e){return"object"==typeof e&&"string"==typeof e.url}))};if("preload"in e){if(console.warn("'preload' option is deprecated, use 'preloadScripts' instead"),Array.isArray(e.preload)){if(!isValidPreloadScriptsArray(e.preload))return t(genErrorMsg("preload")),!1}else if("string"!=typeof e.preload&&e.preload)return t(genErrorMsg("preload")),!1}else if("preloadScripts"in e)if(Array.isArray(e.preloadScripts)){if(!isValidPreloadScriptsArray(e.preloadScripts))return t(genErrorMsg("preloadScripts")),!1}else{if(e.preloadScripts)return t(genErrorMsg("preloadScripts")),!1;console.warn("Consider using an empty array with 'preloadScripts', instead of a falsy value")}return!0},d}();e.exports.getComponents=function(){return o}},"../../legacy-api/src/desktop-messaging.js":(e,t,n)=>{"use strict";var i=n("../../legacy-api/src/components.js").getComponents(),o=n("../../legacy-api/src/socket.js").sendMessageToDesktop;t.sendIfAllResultsDispatchedAndComplete=function sendIfAllResultsDispatchedAndComplete(e){if(e.allDispatched_&&e.nProcessed_===e.nHandlers_){var t,n=!0,r="";for(t in e.nHandlers_||(n=!1,r="No external message handler has been registered!"),e.handlers_)if(e.handlers_.hasOwnProperty(t)){var s=e.handlers_[t];n&=s.result,r+=s.message}o("external-message-result",{uuid:i.applicationUuid,connectionId:e.request_.connectionId,result:n,message:r}),e.sentToDesktop_=!0}},t.addDesktopEventCallback=function addDesktopEventCallback(e,t,n,r,s){var a,c,d,l,u,p,h=e.topic,f=i.getFullEventType(h,e.type);switch(h){case"window":case"frame":c=e.uuid,d=e.name,i.desktopEventCallbackMap[h][f]=i.desktopEventCallbackMap[h][f]||{},(a=i.desktopEventCallbackMap[h][f])[c]=a[c]||{},(a=a[c])[d]=a[d]||[],l=a[d];break;case"application":case"service":case"external-application":c=e.uuid,i.desktopEventCallbackMap[h][f]=i.desktopEventCallbackMap[h][f]||{},(a=i.desktopEventCallbackMap[h][f])[c]=a[c]||[],l=a[c];break;case"system":i.desktopEventCallbackMap[h][f]=i.desktopEventCallbackMap[h][f]||[],l=i.desktopEventCallbackMap[h][f]}"function"==typeof r?u=function(){-1!==l.indexOf(t)?r():p("Listener not found for event '"+f+"'.")}:void 0!==r&&console.error("Success callback is not a function"),"function"==typeof s?p=function(e){s(e)}:void 0!==s&&console.error("Error callback is not a function"),l?(o("subscribe-to-desktop-event",e,u,p),t._owner=n,l.push(t)):(console.error("Could not subscribe to unknown event '"+f+"'."),"function"==typeof s&&s("Could not subscribe to unknown event '"+f+"'."))},t.resubscribeToDesktopEventsAfterLostConnection=function resubscribeToDesktopEventsAfterLostConnection(){var e,t,n,r,s,a,c,d;for(t in i.desktopEventCallbackMap)switch(e=i.desktopEventCallbackMap[t],t){case"iframe":case"window":for(n in e)for(r in e[n])for(s in e[n][r])e[n][r][s].length>0&&o("subscribe-to-desktop-event",{topic:t,type:i.getPartialEventType(t,n),uuid:r,name:s});break;case"application":case"service":for(a in e)for(c in e[a])e[a][c].length>0&&o("subscribe-to-desktop-event",{topic:t,type:i.getPartialEventType(t,a),uuid:c});break;case"system":for(d in e)e[d].length>0&&o("subscribe-to-desktop-event",{topic:t,type:i.getPartialEventType(t,d)})}},t.removeDesktopEventCallback=function removeDesktopEventCallback(e,t,n,r){var s,a,c,d=i.desktopEventCallbackMap,l=e.topic,u=i.getFullEventType(l,e.type);switch(l){case"frame":case"window":s=e.uuid,a=e.name,d[l][u]&&d[l][u][s]&&d[l][u][s][a]&&(c=d[l][u][s][a]);break;case"application":case"service":s=e.uuid,d[l][u]&&d[l][u][s]&&(c=d[l][u][s]);break;case"system":d[l][u]&&(c=d[l][u])}var p=!1;if(c){var h=c.indexOf(t);-1!==h&&(p=!0,delete c[h],o("unsubscribe-to-desktop-event",e,n,r))}p||"function"!=typeof r||r("Could not usubscribe event listener for type: '"+u+"'.")},t.resubscribeToInterAppBusAfterLostConnection=function resubscribeToInterAppBusAfterLostConnection(){var e,t;for(e in i.interAppBusCallbackMap)for(t in i.interAppBusCallbackMap[e])i.interAppBusCallbackMap[e][t]&&i.interAppBusCallbackMap[e][t].length>0&&o("subscribe",{sourceUuid:e,topic:t})}},"../../legacy-api/src/el-ipc.js":e=>{"use strict";var t=fin.__internal_.ipc;function IPC(){var e=this,onopen=function(){};this.onopen=onopen,this.onmessage=function(){},this.innerOnMessage=function(t,n){"function"==typeof e.onmessage&&e.onmessage(n)};let n=fin.__internal_.ipcconfig.channels.CORE_MESSAGE;t.on(n,(function(t,n){setTimeout((function(){try{e.onmessage(n)}catch(e){console.error(e)}}),0)})),Object.defineProperty(this,"onopen",{get:function(){return onopen},set:function(e){onopen=e},configurable:!0})}IPC.prototype.send=function(e){return t.send("of-window-message",JSON.parse(JSON.stringify(e)))},IPC.prototype.registerOnMessage=function(e){this.onmessage=e},e.exports=IPC},"../../legacy-api/src/external_application.js":(e,t,n)=>{"use strict";var i=n("../../legacy-api/src/components.js").getComponents(),o=n("../../legacy-api/src/desktop-messaging.js").addDesktopEventCallback,r=n("../../legacy-api/src/desktop-messaging.js").removeDesktopEventCallback,s=n("../../legacy-api/src/socket.js").sendMessageToDesktop,a="external-application";fin.desktop.ExternalApplication=function(e){if(!new.target)return i.instantiateWithWarning("ExternalApplication",arguments);this.uuid=e},fin.desktop.ExternalApplication.wrap=function(e){return new fin.desktop.ExternalApplication(e)},fin.desktop.ExternalApplication.prototype={addEventListener:function(e,t,n,i){o({topic:a,type:e,uuid:this.uuid},t,this,n,i)},getInfo:function(e,t){s("get-external-application-info",{uuid:this.uuid},e,t)},removeEventListener:function(e,t,n,i){r({topic:a,type:e,uuid:this.uuid},t,n,i)}}},"../../legacy-api/src/frame.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Frame:()=>Frame});const i=n("../../legacy-api/src/components.js").getComponents(),o=n("../../legacy-api/src/desktop-messaging.js").addDesktopEventCallback,r=n("../../legacy-api/src/desktop-messaging.js").removeDesktopEventCallback,s=n("../../legacy-api/src/socket.js").sendMessageToDesktop,a="frame",c=fin.__internal_.entityInfo;class Frame{constructor(e,t){if(!(this instanceof Frame))return i.instantiateWithWarning("Frame",arguments);this.uuid=e,this.name=t}static getCurrent(){const{uuid:e,name:t}=c;return new Frame(e,t)}static wrap(e,t){return new Frame(e,t)}getParentWindow(e,t){s("get-parent-window",{uuid:this.uuid,name:this.name},e,t)}addEventListener(e,t,n,i){o({topic:a,type:e,uuid:this.uuid,name:this.name},t,this,n,i)}getInfo(e,t){s("get-frame-info",{uuid:this.uuid,name:this.name},e,t)}removeEventListener(e,t,n,i){r({topic:a,type:e,uuid:this.uuid,name:this.name},t,n,i)}}fin.desktop.Frame=Frame},"../../legacy-api/src/global-hotkey.js":()=>{"use strict";fin.desktop.GlobalHotkey={addEventListener(e,t,n,i){fin.GlobalHotkey.on(e,t).then(n).catch((e=>{i(e.message,e)}))},register(e,t,n,i){fin.GlobalHotkey.register(e,t).then(n).catch((e=>{i(e.message,e)}))},removeEventListener:function(e,t,n,i){fin.GlobalHotkey.removeListener(e,t).then(n).catch((e=>{i(e.message,e)}))},unregister(e,t,n){fin.GlobalHotkey.unregister(e).then(t).catch((e=>{n(e.message,e)}))},unregisterAll(e,t){fin.GlobalHotkey.unregisterAll().then(e).catch((e=>{t(e.message,e)}))},isRegistered(e,t,n){fin.GlobalHotkey.isRegistered(e).then(t).catch((e=>{n(e.message,e)}))}}},"../../legacy-api/src/inter-application-bus.js":(e,t,n)=>{"use strict";var i=n("../../legacy-api/src/components.js").getComponents(),o=n("../../legacy-api/src/socket.js").sendMessageToDesktop,r=n("../../legacy-api/src/frame.ts").Frame,s={};function configurableSend(e,t,n){if(!function validateMsgConfig(e){var t=["uuid","topic","message"];return t.map((function(t){return e[t]})).filter((function(e){return e})).length===t.length}(e))throw"message shape not compatible";o("send-message",{destinationUuid:e.uuid,destinationWindowName:e.name,sourceWindowName:r.getCurrent().name,topic:e.topic,message:e.message,cache:e.cache},t,n)}s.backwardsCompatWindowNameOption=function(e,t,n){for(var i=t-n,o=i-1,r=0;r<e.length&&"function"!=typeof e[r]&&(!(r>=o)||e[r]);r++);return Array.prototype.slice.call(e,0,r).length!==i&&Array.prototype.splice.call(e,1,0,null),e},fin.desktop.InterApplicationBus=function(){},fin.desktop.InterApplicationBus.publish=function(e,t,n,i){var s={topic:e,sourceWindowName:r.getCurrent().name};"object"==typeof t||Array.isArray(t)?(s.messageString=JSON.stringify(t),s.messageKey="messageString"):s.message=t,o("publish-message",s,n,i)},fin.desktop.InterApplicationBus.send=function(e,t,n,i,a,c){if(function isObject(e){return"object"==typeof e}(e))return configurableSend.apply(null,arguments);[e,t,n,i,a,c]=s.backwardsCompatWindowNameOption(arguments,6,2);var d={destinationUuid:e,destinationWindowName:t,sourceWindowName:r.getCurrent().name,topic:n};"object"==typeof i||Array.isArray(i)?(d.messageString=JSON.stringify(i),d.messageKey="messageString"):d.message=i,o("send-message",d,a,c)},fin.desktop.InterApplicationBus.subscribe=function(e,t,n,a,c,d){[e,t,n,a,c,d]=s.backwardsCompatWindowNameOption(arguments,6,3);var l=i.utils.qualifyWindowName(e,t),u=i.interAppBusCallbackMap;u[l]=u[l]||{},u[l][n]=u[l][n]||[],u[l][n].push(a),o("subscribe",{sourceUuid:e,sourceWindowName:t,destinationWindowName:r.getCurrent().name,topic:n,messageKey:"messageString"},c,d)},fin.desktop.InterApplicationBus.unsubscribe=function(e,t,n,a,c,d){[e,t,n,a,c,d]=s.backwardsCompatWindowNameOption(arguments,6,3);var l=i.utils.qualifyWindowName(e,t),u=i.interAppBusCallbackMap[l][n];if(void 0!==u){var p=u.lastIndexOf(a);-1!==p?(u.splice(p,1),o("unsubscribe",{sourceUuid:e,sourceWindowName:t,destinationWindowName:r.getCurrent().name,topic:n},c,d)):d("Error: The submitted listener was not found.")}else d("Error: Subscription not found.")},fin.desktop.InterApplicationBus.addSubscribeListener=function(e){i.subscribeCallbacks.push(e)},fin.desktop.InterApplicationBus.removeSubscribeListener=function(e){var t=i.subscribeCallbacks.indexOf(e);i.subscribeCallbacks.splice(t,1)},fin.desktop.InterApplicationBus.addUnsubscribeListener=function(e){i.unsubscribeCallbacks.push(e)},fin.desktop.InterApplicationBus.removeUnsubscribeListener=function(e){var t=i.unsubscribeCallbacks.indexOf(e);i.unsubscribeCallbacks.splice(t,1)},fin.desktop.InterApplicationBus.Channel={},fin.desktop.InterApplicationBus.Channel.create=function(e){return fin.InterApplicationBus.Channel.create(e)},fin.desktop.InterApplicationBus.Channel.connect=function(e,t){return fin.InterApplicationBus.Channel.connect(e,t)},fin.desktop.InterApplicationBus.Channel.onChannelConnect=function(e){return fin.InterApplicationBus.Channel.onChannelConnect(e)},fin.desktop.InterApplicationBus.Channel.onChannelDisconnect=function(e){return fin.InterApplicationBus.Channel.onChannelDisconnect(e)},fin.desktop.InterApplicationBus.Channel.getAllChannels=function(){return fin.InterApplicationBus.Channel.getAllChannels()},fin.desktop.InterApplicationBus.prototype={publish:fin.desktop.InterApplicationBus.publish,send:fin.desktop.InterApplicationBus.send,subscribe:fin.desktop.InterApplicationBus.subscribe,unsubscribe:fin.desktop.InterApplicationBus.unsubscribe,addSubscribeListener:fin.desktop.InterApplicationBus.addSubscribeListener,removeSubscribeListener:fin.desktop.InterApplicationBus.removeSubscribeListener,addUnsubscribeListener:fin.desktop.InterApplicationBus.addUnsubscribeListener,removeUnsubscribeListener:fin.desktop.InterApplicationBus.removeUnsubscribeListener,Channel:{create:fin.desktop.InterApplicationBus.Channel.create,connect:fin.desktop.InterApplicationBus.Channel.connect,onChannelConnect:fin.desktop.InterApplicationBus.Channel.onChannelConnect,onChannelDisconnect:fin.desktop.InterApplicationBus.Channel.onChannelDisconnect,getAllChannels:fin.desktop.InterApplicationBus.Channel.getAllChannels}}},"../../legacy-api/src/internal.js":(e,t,n)=>{"use strict";var i=n("../../legacy-api/src/socket.js").sendMessageToDesktop;fin.__internal_.downloadPreloadScripts=function(e,t,n){i("download-preload-scripts",e,t,n)}},"../../legacy-api/src/main.js":(e,t,n)=>{"use strict";function registerV1(){window.fin=window.fin||{},fin.desktop=fin.desktop||{},n("../../legacy-api/src/desktop-messaging.js"),n("../../legacy-api/src/frame.ts"),n("../../legacy-api/src/window.js"),n("../../legacy-api/src/application.js"),n("../../legacy-api/src/inter-application-bus.js"),n("../../legacy-api/src/system.js"),n("../../legacy-api/src/external_application.js"),n("../../legacy-api/src/internal.js"),n("../../legacy-api/src/global-hotkey.js"),fin.desktop.addExternalMessageHandler=function(e){"function"==typeof e&&n("../../legacy-api/src/components.js").getComponents().externalMessageHandlers.push(e)}}n.r(t),n.d(t,{default:()=>registerV1})},"../../legacy-api/src/socket.js":(e,t,n)=>{"use strict";var i=n("../../legacy-api/src/components.js").getComponents(),o=new(n("../../legacy-api/src/el-ipc.js"));const r=fin.__internal_.initialOptions.experimental.api.breadcrumbs,s=fin.__internal_.initialOptions.experimental.api.batching.renderer;r&&console.info("API breadcrumbs are enabled"),s.enabled&&console.info("Renderer API batching is enabled");const a=r?(e,t)=>{e.breadcrumbs=e.breadcrumbs||[],e.breadcrumbs.push({action:e.action||"no-action",messageId:e.messageId,name:t,time:Date.now()})}:()=>{};let c=!1,d=[],endBatching=()=>{c=!1,sendMessageToDesktop("api-batch",{messages:d},(e=>{e.forEach((e=>{l.onmessage(e)}))}),void 0,!0),d.length=0};var l,sendMessageToDesktop=function(e,t,n,o,r){!s.enabled||r||c||(c=!0,setTimeout((()=>{endBatching()}),s.ttl));var u={action:e,payload:t};if("function"==typeof n||"function"==typeof o){i.messageCallbackMap[i.messageId]={};var p=i.messageCallbackMap[i.messageId];p.action=e,"function"==typeof n&&(p.successCallback=n),"function"==typeof o&&(p.errorCallback=o),u.messageId=i.messageId,i.messageId++}var h=u;try{c?(a(u,"adapter/batching"),d.push(h),d.length>=s.maxSize&&endBatching()):(a(u,"adapter/socket.send"),l.send(h))}catch(e){}};fin.desktop.WebSocket=fin.desktop.WebSocket||WebSocket,function(e){e.registerOnMessage((function(t){var n;if("string"==typeof t?n=JSON.parse(t):(n=t,console.warn("non string passed",t)),a(n,"adapter/onMessage"),r&&console.error(`API-BREADCRUMBS: [${Date.now()}] - ${JSON.stringify(n.breadcrumbs)}`),n.action&&("app-loaded"===n.action||"app-connected"===n.action||"window-embedded"===n.action))return n.success=!0,"window-embedded"===n.action?(fin.desktop.Window.isEmbedded=!0,void i.dispatchDesktopEvent({topic:"window",type:"window-embedded",name:event.name,uuid:event.uuid})):void i.fireMessageCallback(n.correlationId,n);var o=n.action,s=n.correlationId,c=n.payload;"process-message"===o?i.dispatchMessageToCallbacks(c):"ack"===o?i.fireMessageCallback(s,c):"process-api-batch"===o?c.messages.forEach((t=>{e.onmessage(t)})):"process-system-message"===o?i.dispatchSystemMessage(n):"subscriber-added"===o?i.dispatchToSubscribeListeners(c.uuid,c.targetName,c.senderName,c.topic):"subscriber-removed"===o?i.dispatchToUnsubscribeListeners(c.uuid,c.targetName,c.senderName,c.topic):"process-desktop-event"===o?i.dispatchDesktopEvent(c):"process-external-message"===o?function processExternalMessage(e){var t=new i.ExternalMessageResultHandlerFactory(e);i.externalMessageHandlers.forEach((function(n){n(t.makeResultHandler(),e)})),t.allDispatched()}(c):"create-child-window"===o?function processCreateChildWindow(e){new fin.desktop.Window(e.windowOptions,(function(){}),(function(e){console.log(e)}))}(c):"redirect-window-to-url"===o?function processRedirectWindow(e){fin.desktop.Window.getCurrent().redirect(e.url)}(c):"process-service-action"===o&&function processServiceMessage(t){const{senderIdentity:n,serviceIdentity:o,action:r,ackToSender:s,payload:a}=t,c=o.channelId||o.uuid,d=i.serviceMap.get(c);try{if(!d)return;if(t.connectAction){if(!d.processConnection)throw Error("Cannot connect to a plugin");d.processConnection(n,a).then(ack).catch(nack)}else d.processAction(r,a,n).then(ack).catch(nack)}catch(e){nack(e)}function nack(t){s.success=!1,s.reason=t.message,e.send(s)}function ack(t){s.payload.payload=s.payload.payload||{},s.payload.payload.result=t,e.send(s)}}(c)}))}(l=o),t.sendMessageToDesktop=sendMessageToDesktop},"../../legacy-api/src/system.js":(e,t,n)=>{"use strict";var i=n("../../legacy-api/src/socket.js").sendMessageToDesktop,o=n("../../legacy-api/src/desktop-messaging.js").addDesktopEventCallback,r={};function hasExternalProcessListeners(){return Object.keys(r).length>0}function removeExternalProcessListeners(e){delete r[e]}function dispatchExternalProcessListeners(e,t){(r[e]||[]).forEach((function(e){e(t)}))}function clearSubscriptionDetailsDecorator(e){var t={},n=["type","topic"];return function(i){Object.keys(i).forEach((function(e){n.indexOf(e)<0&&(t[e]=i[e])})),"function"==typeof e&&e(t)}}function sendExternalProcessRequest(e,t,o,s){var a=o,c=s;if("object"==typeof t){if("function"==typeof t.listener){var d=a;a=function(e){var i=e.uuid,o=n("../../legacy-api/src/window.js");o=fin.desktop.Window;var s=!1;if(!hasExternalProcessListeners()){s=!0;var externalProcessExitHandler=function(e){var t=e||{},n={topic:"exited",uuid:t.processUuid||"",exitCode:t.exitCode||0};dispatchExternalProcessListeners(t.processUuid,n),removeExternalProcessListeners(t.processUuid),hasExternalProcessListeners()||o.getCurrent().removeEventListener("external-process-exited",externalProcessExitHandler)};o.getCurrent().addEventListener("external-process-exited",externalProcessExitHandler,(function(){"function"==typeof d&&d(e)}))}!function registerExternalProcessListener(e,t){"function"==typeof t&&(r[e]=r[e]||[],r[e].push(t))}(i,t.listener),s||"function"!=typeof d||d(e)}}c="function"==typeof s?s:void 0}i(e,t,a,c)}fin.desktop.Clipboard={readText:function(e,t,n){i("clipboard-read-text",{type:e},t,n)},writeText:function(e,t,n,o){i("clipboard-write-text",{data:e,type:t},n,o)},readHtml:function(e,t,n){i("clipboard-read-html",{type:e},t,n)},writeHtml:function(e,t,n,o){i("clipboard-write-html",{data:e,type:t},n,o)},readRtf:function(e,t,n){i("clipboard-read-rtf",{type:e},t,n)},writeRtf:function(e,t,n,o){i("clipboard-write-rtf",{data:e,type:t},n,o)},write:function(e,t,n,o){i("clipboard-write",{data:e,type:t},n,o)},availableFormats:function(e,t,n){i("clipboard-read-formats",{type:e},t,n)}},fin.desktop.System={addEventListener:function(e,t,n,i){var r={topic:"system"};"object"==typeof e&&e.data&&e.type?(r.type=e,r.data=e.data):r.type=e,o(r,t,this,n,i)},authenticateResourceFetch:function(e,t,n,o,r){i("resource-fetch-authenticate",{uuid:e,username:t,password:n},o,r)},clearCache:function(e,t,n){i("clear-cache",{cache:e.cache,cookies:e.cookies,localStorage:e.localStorage,appcache:e.appcache},t,n)},deleteCacheOnExit:function(e,t){i("delete-cache-request",{},e,t)},deleteCacheOnRestart:function(e,t){console.warn("Function is deprecated. Please reference http://cdn.openfin.co/jsdocs/stable/tutorial-system.deleteCacheOnExit.html"),i("delete-cache-request",{},e,t)},exit:function(e){i("exit-desktop",{},e)},flushCookieStore:function(e,t){i("flush-cookie-store",{},e,t)},getAllWindows:function(e,t){i("get-all-windows",{},e,t)},getAllApplications:function(e,t){i("get-all-applications",{},e,t)},getAppAssetInfo:function(e,t,n){i("get-app-asset-info",e,t,n)},getCommandLineArguments:function(e,t){i("get-command-line-arguments",{},e,t)},getCookies:function(e,t,n){i("get-cookies",{name:e.name,url:location.href},t,n)},getConfig:function(e,t){console.warn("Function is deprecated. Please reference http://cdn.openfin.co/jsdocs/stable/tutorial-application.getManifest.html"),i("get-config",{},e,t)},getCrashReporterState(e,t){i("get-crash-reporter-state",{},(t=>{e({runtimeReporter:t})}),t)},getEntityInfo:function(e,t,n,o){i("get-entity-info",{uuid:e,name:t},n,o)},getEnvironmentVariable:function(e,t,n){var o=Array.isArray(e);i("get-environment-variable",{environmentVariables:o?e:[e]},"function"==typeof t?function(n){t.call(window,o?n:n[e])}:null,n)},getFocusedWindow:function(e,t){i("get-focused-window",{},e,t)},getLog:function(e,t,n){i("view-log","string"==typeof e?{name:e}:{name:e.name,endFile:e.endFile,sizeLimit:e.sizeLimit},t,n)},getMinLogLevel:function(e,t){i("get-min-log-level",{},e,t)},getLogList:function(e,t){i("list-logs",{},e?function(t){t.forEach((function(e){var t=e.date;e.date=new Date(t)})),e.call(window,t)}:e,t)},getMachineId:function(e,t){i("get-machine-id",{},e,t)},getMonitorInfo:function(e,t){i("get-monitor-info",{},e,t)},getMousePosition:function(e,t){i("get-mouse-position",{},e,t)},getProcessList:function(e,t){i("process-snapshot",{},e,t)},getProxySettings:function(e,t){i("get-proxy-settings",{},e,t)},getRemoteConfig:function(e,t,n){i("get-remote-config",{url:e},t,n)},getRuntimeInfo:function(e,t){i("get-runtime-info",{},e,t)},getRvmInfo:function(e,t){i("get-rvm-info",{},e,t)},getVersion:function(e,t){i("get-version",{},e,t)},launchExternalProcess:function(e,t,n,i){var o,r=n,s=i;"object"==typeof e?(o=e,r=Array.prototype.slice.call(arguments,1)[0],s=Array.prototype.slice.call(arguments,1)[1]):(console.warn("Using old format for launchExternalProcess. Application assets and process exit-code monitoring unavailable"),o={path:e,arguments:t}),sendExternalProcessRequest("launch-external-process",o,r,s)},monitorExternalProcess:function(e,t,n){var i,o=t,r=n;"object"==typeof e?i=e:(console.warn("Using old format for monitorExternalProcess. Application assets and process exit-code monitoring unavailable"),i={pid:e}),sendExternalProcessRequest("monitor-external-process",i,o,r)},log:function(e,t,n,o){i("write-to-log",{level:e,message:t},n,o),"info"===e?console.log(t):"warning"===e?console.warn(t):"error"===e&&console.error(t)},openUrlWithBrowser:function(e,t,n){i("open-url-with-browser",{url:e},t,n)},readRegistryValue:function(e,t,n,o,r){i("read-registry-value",{rootKey:e,subkey:t,value:n},o,r)},registerExternalConnection:function(e,t,n){i("register-external-connection","object"==typeof e?e:{uuid:e},t,n)},releaseExternalProcess:function(e,t,n){i("release-external-process",{uuid:e},(function(){dispatchExternalProcessListeners(e,{topic:"released",uuid:e}),removeExternalProcessListeners(e),"function"==typeof t&&t()}),n)},removeEventListener:function(e,t,i,o){n("../../legacy-api/src/desktop-messaging.js").removeDesktopEventCallback({topic:"system",type:e},t,i,o)},setClipboard:function(e,t,n){console.warn("setClipboard is deprecated, use Clipboard.write* instead"),i("set-clipboard",{data:e},t,n)},setMinLogLevel:function(e,t,n){i("set-min-log-level",{level:e},t,n)},showDeveloperTools:function(e,t,n,o){i("show-developer-tools",{uuid:e,name:t},n,o)},showChromeNotificationCenter:function(e,t){console.warn("Function is deprecated"),i("show-chrome-notification-center",{},e,t)},startCrashReporter:function(...e){const[t,n=(()=>{}),o=(()=>{})]=e;if("object"!=typeof t)return fin.desktop.System.startCrashReporter({diagnosticMode:!0},e[0],e[1]);if(!("diagnosticMode"in t)){const e="diagnosticMode not found in options",t=new Error(e);if(o)return void o(e,t);throw t}i("start-crash-reporter",t,(e=>{n({runtimeReporter:e})}),o)},terminateExternalProcess:function(e,t,n,o,r){i("terminate-external-process",{uuid:e,timeout:t,child:!!n},o,r)},updateProxySettings:function(e,t,n,o,r){i("update-proxy",{type:e,proxyAddress:t,proxyPort:n},o,r)},downloadAsset:function(e,t,n,o){const r=fin.desktop.getUuid();e.downloadId=r;const s=`asset-download-progress-${r}`,a=`asset-download-error-${r}`,c=`asset-download-complete-${r}`,dlProgrss=function(e){clearSubscriptionDetailsDecorator(t)(e)},dlError=function(e){o(e.reason,e.err),clearSubscriptions()},dlComplete=function(e){clearSubscriptionDetailsDecorator(n)(e),clearSubscriptions()};function clearSubscriptions(){fin.desktop.System.removeEventListener(s,dlProgrss),fin.desktop.System.removeEventListener(a,dlError),fin.desktop.System.removeEventListener(c,dlComplete)}fin.desktop.System.addEventListener(s,dlProgrss),fin.desktop.System.addEventListener(a,dlError),fin.desktop.System.addEventListener(c,dlComplete),i("download-asset",e,null,o)},downloadPreloadScripts:function(e,t,n){i("download-preload-scripts",{scripts:e},t,n)},downloadRuntime:function(e,t,n,o){const r=fin.desktop.getUuid();e.downloadId=r;const s=`runtime-download-progress-${r}`,a=`runtime-download-error-${r}`,c=`runtime-download-complete-${r}`,dlProgrss=function(e){clearSubscriptionDetailsDecorator(t)(e)},dlError=function(e){o(e.reason,e.err),clearSubscriptions()},dlComplete=function(e){clearSubscriptionDetailsDecorator(n)(e),clearSubscriptions()};function clearSubscriptions(){fin.desktop.System.removeEventListener(s,dlProgrss),fin.desktop.System.removeEventListener(a,dlError),fin.desktop.System.removeEventListener(c,dlComplete)}fin.desktop.System.addEventListener(s,dlProgrss),fin.desktop.System.addEventListener(a,dlError),fin.desktop.System.addEventListener(c,dlComplete),i("download-runtime",e,null,o)},getHostSpecs:function(e,t){i("get-host-specs",{},e,t)},Clipboard:fin.desktop.Clipboard,getAllExternalApplications:function(e,t){i("get-all-external-applications",{},e,t)}};const s=Object.defineProperties({},{VERBOSE:{value:"verbose",enumerable:!0},INFO:{value:"info",enumerable:!0},WARNING:{value:"warning",enumerable:!0},ERROR:{value:"error",enumerable:!0},FATAL:{value:"fatal",enumerable:!0}});Object.defineProperties(fin.desktop.System,{logLevels:{value:s}})},"../../legacy-api/src/window.js":(e,t,n)=>{"use strict";var i=n("../../legacy-api/src/components.js").getComponents(),o=n("../../legacy-api/src/socket.js").sendMessageToDesktop,r=n("../../legacy-api/src/desktop-messaging.js").addDesktopEventCallback,s=n("../../node_modules/lodash/pick.js"),a={};function getPayload(e){if(!this)throw new Error("Missing calling context");var t={uuid:this.app_uuid,name:this.name};return Object.assign(t,e)}fin.desktop.Window=function(e,t,n){if(!new.target)return i.instantiateWithWarning("Window",arguments);const o=this,r=fin.__internal_.initialOptions,c=i.deepObjCopy(e),d="about:blank",l="fire-constructor-callback";if(c.name&&"string"==typeof c.name){if(i.isPreloadScriptsOptionValid(e,n))if(c.uuid=c.uuid||r.uuid,c.url=c.url||d,o.connected=!0,o.name=c.name,o.uuid=c.uuid,o.app_uuid=c.uuid,c._noregister)c._nocontentwindow||(o.contentWindow=window),o.name===window.name?o.contentWindow=window:o.contentWindow=a[o.name],o.nativeWindow=o.contentWindow,t&&setTimeout((function mainCallback(){t.call(o)}),0);else{c.uuid!==r.uuid&&(console.warn("child window uuid must match the parent window's uuid: "+r.uuid),c.uuid=r.uuid,o.uuid=c.uuid,o.app_uuid=c.uuid),c.url!==d&&(c.url=i.resolveUrl(c.url)),c.defaultTop=Math.floor("number"==typeof c.defaultTop?c.defaultTop:100),c.defaultLeft=Math.floor("number"==typeof c.defaultLeft?c.defaultLeft:100);var u=new Promise((function(e){o.addEventListener(l,(function fireConstructor(t){var i,r=t.success,a=t.data,c=a.message;r?i=s(t.data,"httpResponseCode","apiInjected"):n&&(i=s(a,"message","networkErrorCode","stack")),o.removeEventListener(l,fireConstructor),e({message:c,cbPayload:i,success:r})}))})),p=new Promise((function(e,t){setTimeout((function(){fin.__internal_.createChildWindow(c,(function(t){o.nativeWindow=t.nativeWindow,o.contentWindow=o.nativeWindow,c.uuid=i.applicationUuid,o.uuid=c.uuid,o.app_uuid=c.uuid,a[o.name]=o.contentWindow,o.addEventListener("closed",(function(){delete a[o.name],delete o.contentWindow,delete o.nativeWindow})),e()}),t)}),0)}));Promise.all([u,p]).then((function(e){var i=e[0],r=i.message,s=i.cbPayload;i.success&&t?t.call(o,s):n&&n.call(o,r,s);try{o.nativeWindow.fin.__internal_.openerSuccessCBCalled()}catch(e){}})).catch(n)}}else"function"==typeof n&&setTimeout((function(){n("Error: window must have a name")}),0)},fin.desktop.Window.getCurrentWindow=function(){return console.warn("Function is deprecated; use getCurrent instead."),this._instance=this._instance||fin.desktop.Window.wrap(i.applicationUuid,window.name),this._instance},fin.desktop.Window.getCurrent=function(){if(!this._instance){const e=fin.__internal_.entityInfo,{uuid:t,name:n,entityType:i,parent:o}=e,r="iframe"===i?o.name:n;this._instance=fin.desktop.Window.wrap(t,r)}return this._instance.isEmbedded=fin.desktop.Window.isEmbedded,this._instance},fin.desktop.Window.wrap=function(e,t){return new fin.desktop.Window({uuid:e,name:t,_noregister:!0})},fin.desktop.Window.prototype={addEventListener:function(e,t,n,i){r({topic:"window",type:e,name:this.name,uuid:this.app_uuid},t,this,n,i)},animate:function(e,t,n,i){o("animate-window",getPayload.call(this,{transitions:e,options:t}),n,i)},blur:function(e,t){o("blur-window",getPayload.call(this),e,t)},scheduleRedraw:function(e,t){o("scheduleRedraw",getPayload.call(this),e,t)},schedulePaint:function(e,t){o("schedulePaint",getPayload.call(this),e,t)},bringToFront:function(e,t){o("bring-window-to-front",getPayload.call(this),e,t)},close:function(...e){var t,n,i;"function"==typeof e[0]?[t,n,i]=[!1,...e]:[t,n,i]=e,o("close-window",getPayload.call(this,{force:t}),n,i)},disableFrame:function(e,t){o("disable-window-frame",getPayload.call(this),e,t)},enableFrame:function(e,t){o("enable-window-frame",getPayload.call(this),e,t)},executeJavaScript:function(e,t,n){o("execute-javascript-in-window",getPayload.call(this,{code:e}),t,n)},flash:function(...e){"object"!=typeof e[0]?o("flash-window",getPayload.call(this),e[0],e[1]):o("flash-window",getPayload.call(this),e[1],e[2])},stopFlashing:function(e,t){o("stop-flash-window",getPayload.call(this),e,t)},focus:function(e,t){o("focus-window",getPayload.call(this),e,t)},getAllFrames:function(e,t){o("get-all-frames",getPayload.call(this),e,t)},getBounds:function(e,t){o("get-window-bounds",getPayload.call(this),e,t)},getNativeId:function(e,t){o("get-window-native-id",getPayload.call(this),e,t)},getNativeWindow:function(){return this.contentWindow},getInfo:function(e,t){o("get-window-info",getPayload.call(this),e,t)},getOptions:function(e,t){o("get-window-options",getPayload.call(this),e,t)},getParentApplication:function(){return fin.desktop.Application.wrap(this.app_uuid)},getParentWindow:function(){return this.getParentApplication().getWindow()},getSnapshot:function(...e){"function"==typeof e[0]&&e.unshift(void 0),o("get-window-snapshot",getPayload.call(this,{area:e[0]}),e[1],e[2])},getState:function(e,t){o("get-window-state",getPayload.call(this),e,t)},hide:function(e,t){o("hide-window",getPayload.call(this),e,t)},isShowing:function(e,t){o("is-window-showing",getPayload.call(this),e,t)},maximize:function(e,t){o("maximize-window",getPayload.call(this),e,t)},minimize:function(e,t){o("minimize-window",getPayload.call(this),e,t)},moveBy:function(e,t,n,i){o("move-window-by",getPayload.call(this,{deltaTop:Math.floor(t),deltaLeft:Math.floor(e)}),n,i)},moveTo:function(e,t,n,i){o("move-window",getPayload.call(this,{top:Math.floor(t),left:Math.floor(e)}),n,i)},navigate:function(e,t,n){o("navigate-window",getPayload.call(this,{url:e}),t,n)},navigateBack:function(e,t){o("navigate-window-back",getPayload.call(this),e,t)},navigateForward:function(e,t){o("navigate-window-forward",getPayload.call(this),e,t)},redirect:function(e){if(console.warn("Function is deprecated."),void 0===this.contentWindow)throw new Error("Cannot redirect url of application");this.contentWindow!==window?this.contentWindow=window.open(e,this.name):this.contentWindow.location.href=e},reload:function(...e){var t,n,i;"function"==typeof e[0]?[t,n,i]=[!1,...e]:[t,n,i]=e,o("reload-window",getPayload.call(this,{ignoreCache:t}),n,i)},removeEventListener:function(e,t,i,o){n("../../legacy-api/src/desktop-messaging.js").removeDesktopEventCallback(getPayload.call(this,{topic:"window",type:e}),t,i,o)},resizeBy:function(e,t,n,i,r){o("resize-window-by",getPayload.call(this,{deltaWidth:Math.floor(e),deltaHeight:Math.floor(t),anchor:n}),i,r)},resizeTo:function(e,t,n,i,r){o("resize-window",getPayload.call(this,{width:Math.floor(e),height:Math.floor(t),anchor:n}),i,r)},restore:function(e,t){o("restore-window",getPayload.call(this),e,t)},setAsForeground:function(e,t){o("set-foreground-window",getPayload.call(this),e,t)},setBounds:function(e,t,n,i,r,s){o("set-window-bounds",getPayload.call(this,{left:e,top:t,width:n,height:i}),r,s)},show:function(...e){var t,n,i;"function"==typeof e[0]?[t,n,i]=[!1,...e]:[t,n,i]=e,o("show-window",getPayload.call(this,{force:t}),n,i)},showAt:function(e,t,n,i,r){o("show-at-window",getPayload.call(this,{top:Math.floor(t),left:Math.floor(e),force:n||!1}),i,r)},stopNavigation:function(e,t){o("stop-window-navigation",getPayload.call(this),e,t)},updateOptions:function(e,t,n){o("update-window-options",getPayload.call(this,{options:e}),t,n)},authenticate:function(e,t,n,i){o("window-authenticate",getPayload.call(this,{userName:e,password:t}),n,i)},getZoomLevel:function(e,t){o("get-zoom-level",getPayload.call(this),e,t)},setZoomLevel:function(e,t,n){o("set-zoom-level",getPayload.call(this,{level:e}),t,n)},defineDraggableArea:function(e,t,n,o){console.warn("defineDraggableArea is deprecated; set style '-webkit-app-region: drag' instead");var r,s,a=!1;t=t||i.noop,n=n||i.noop,o=o||i.noop;try{for(e.style["-webkit-app-region"]="drag",r=e.querySelectorAll("button, a, input, textarea"),s=0;s<r.length;s++)r[s].style["-webkit-app-region"]="no-drag";this.addEventListener("bounds-changing",(function(e){a||(t(e),a=!0)})),this.addEventListener("bounds-changed",(function(){n(),a=!1}));var c,d=this;this.addEventListener("maximized",(function(){c=e.style.webkitTransform,e.style["-webkit-app-region"]="no-drag",e.style.webkitTransform=c+" scale(1)",requestAnimationFrame((function(){e.style.webkitTransform=c}))})),e.addEventListener("dblclick",(function(){e.style["-webkit-app-region"]="drag",d.restore()})),c=e.style.webkitTransform,e.style.webkitTransform=c+" scale(1)",requestAnimationFrame((function(){e.style.webkitTransform=c}))}catch(e){throw o(e),e}}},e.exports.cleanWindows=function cleanWindows(e){e&&e.name&&"window-closed"===e.type&&delete a[e.name]}},"../platforms/out/common/bounds-observer.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observeBounds=t.isDomRectEqual=void 0;t.isDomRectEqual=(e,t)=>e.top===t.top&&e.left===t.left&&e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y;t.observeBounds=(e,n)=>{let i;const checkBounds=async()=>{const o=e.getBoundingClientRect();i&&(0,t.isDomRectEqual)(i,o)||(i=o,await n(e.getBoundingClientRect()))},o=new ResizeObserver((()=>checkBounds())),r=new MutationObserver((()=>checkBounds()));return o.observe(e,{box:"content-box"}),r.observe(e,{attributes:!0,attributeFilter:["style"]}),checkBounds(),()=>{o.disconnect(),r.disconnect()}}},"./src/api-decorator-utils.ts":(e,t,n)=>{"use strict";function isLicenseKeyValid(e){return!(!e||36!==e.length&&38!==e.length)}n.r(t),n.d(t,{DecorateHelpers:()=>DecorateHelpers,evalPreloadScripts:()=>evalPreloadScripts,handleInjection:()=>handleInjection,isLicenseKeyValid:()=>isLicenseKeyValid});class DecorateHelpers{constructor(e,t,n,i,o){this.ipc=e,this.makeFinObject=t,this.syncApiCall=n,this.asyncApiCall=i,this.geval=o}}const safeDeleteFin=e=>{"fin"in global&&delete global.fin,"fdc3"in global&&delete global.fdc3,"fin"in e&&delete e.fin,"fdc3"in e&&delete e.fdc3};function handleInjection(e,t,n,i,o,r){"none"!==t&&(global.fin=e.makeFinObject()),e.ipc.once(`post-api-injection-${i}`,(({targetUrl:i})=>{const{uuid:s,name:a}=n;evalPreloadScripts(e,s,a,t,i,r),"preloads"===t&&safeDeleteFin(o)}))}function evalPreloadScripts(e,t,n,i,o,r){const s="set-window-preload-state",a=[],c=a.some((e=>{let t=!0;return"boolean"==typeof e.mandatory?t=e.mandatory:"boolean"==typeof e.optional&&(t=!e.optional),!e._content&&t})),log=i=>{e.asyncApiCall("write-to-log",{level:"info",message:`[preloadScripts] [${t}]-[${n}]: ${i}`})};c?log("Aborted execution of preload scripts, because at least one required preload script failed to load"):a.forEach((t=>{const{url:n,_content:o}=t;if(o)try{"preloads"===i?e.geval(`(function(fin,fdc3){ ${o} })(window.fin,window.fdc3);`):e.geval(o),log(`Succeeded execution of preload script for URL [${n}]`),e.asyncApiCall(s,{url:n,state:"succeeded"})}catch(t){console.error(`${t.name}: ${t.message}\nPreload script: ${n}`),log(`Failed execution of preload script for URL [${n}]: ${t}`),e.asyncApiCall(s,{url:n,state:"failed"})}else log(`Skipped execution of preload script for URL [${n}], because the content is not available`)})),e.asyncApiCall(s,{allDone:!0})}},"./src/api-decorator.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>decorateApi});var i=n("./src/api-decorator-utils.ts");function decorateApi(e={},t){const o=global,r=process.versions.openfin,s=JSON.parse(JSON.stringify(process.versions)),a="boolean"==typeof process.isMainFrame?process.isMainFrame:o.isMainFrame,c=o.routingId,d=o.getFrameData(c);let l=new Map;const u=n("electron"),p=!(!u.webFrame||!u.webFrame.top)&&a,h=u.webFrame?u.webFrame.findFrameByRoutingId(c):{getZoomLevel:()=>1,setZoomLevel:()=>{}},f=u.ipcRenderer,{elIPCConfig:w,enableChromiumBuild:y,options:m,socketServerState:g,licenseKey:v,isPlatform:b,supportInformation:_,finInjectionType:j,entityInfo:C}=e,I=m.experimental.node?o.eval:o.process.eval,getOpenerSuccessCallbackCalled=()=>(d.openerSuccessCalled=d.openerSuccessCalled||!1,d.openerSuccessCalled);function asyncApiCall(e,t={}){f.send("of-window-message",JSON.parse(JSON.stringify({action:e,payload:t,isSync:!1,singleFrameOnly:!0})))}function syncApiCall(e,t,n=!0,i="of-window-message"){const o=JSON.parse(JSON.stringify({action:e,payload:t,isSync:!0,singleFrameOnly:n})),r=f.sendSync(i,o);let s;if(s=r?JSON.parse(r).payload:{error:new Error(`Undefined result for ${i}`)},s.success)return s.data;if(s.error){const e=new Error(s.error.message);throw e.origStack=s.error.stack,e}throw s.reason}function raiseEventAsync(e,t){return asyncApiCall("raise-event",{eventName:e,eventArgs:t})}function deferByTick(e){setTimeout((()=>{"function"==typeof e&&e.call(window)}),1)}const x=[];let E=!1;function isCrossOrigin(){let e=!1;try{window.opener?.name&&(e=!1)}catch(t){e=!0}return e}global.addEventListener("load",(function(){f.send("openfin-api-ready"),function wireUpMenu(e){y||e.addEventListener("contextmenu",(e=>{if(!e.defaultPrevented){e.preventDefault();const t="iframe"===C.entityType?C.parent:C;fin.desktop.Window.getCurrent().getOptions((n=>{n.contextMenuSettings.enable&&syncApiCall("show-menu",{uuid:t.uuid,name:t.name,editable:e.target.matches("input, textarea, [contenteditable]"),hasSelectedText:e.target.selectionStart!==e.target.selectionEnd,x:e.x,y:e.y},!1)}))}}))}(o),function wireUpMouseWheelZoomEvents(){document.addEventListener("mousewheel",(e=>{if(!e.ctrlKey||!m.accelerator.zoom)return;let t=Math.floor(h.getZoomLevel());h.setZoomLevel(e.wheelDelta>=0?++t:--t)}))}(),function raiseReadyEvents(e){const{uuid:t,name:n,parent:i,entityType:o}=e,r={uuid:t,name:n},s=i.name||n,a=[];a.push([`window/initialized/${t}-${n}`,r]),t===n&&a.push([`application/initialized/${t}`,{uuid:t}]),a.push([`window/dom-content-loaded/${t}-${n}`,r]),a.push([`window/connected/${t}-${n}`,r]),a.push([`window/frame-connected/${t}-${s}`,{frameName:n,entityType:o}]),a.push([`frame/connected/${t}-${n}`,r]),asyncApiCall("raise-many-events",[...a])}(C),E=!0,(getOpenerSuccessCallbackCalled()||null===window.opener||m.isRawWindowOpen||isCrossOrigin())&&deferByTick((()=>{x.forEach((e=>{const{userAppConfigArgs:t}=m;t?e(t):e()}))})),deferByTick((()=>{const e={name:m.name,uuid:m.uuid};raiseEventAsync(`window/performance-report/${m.uuid}-${m.name}`,Object.assign(e,performance.toJSON())),asyncApiCall("write-to-log",{level:"info",message:`[Performance] [${m.uuid} - ${m.name}]: ${JSON.stringify(performance)}`})}))})),(0,i.isLicenseKeyValid)(v)||(asyncApiCall("write-to-log",{level:"info",message:`[licenseKey] [${m.uuid} - ${m.name}]: invalid OpenFin license key`}),console.warn("WARNING : Application does not have a valid OpenFin license key implemented in application manifest. To obtain a valid license key or to begin your 30 days of free support, please contact support@openfin.co.")),_||console.warn("WARNING : Application does not have supportInformation declared in application manifest. Error reports will be sent to support@openfin.co by default.");const A=global.open;function createChildWindowTheElectronWay({options:e,entityType:t},n,i=(()=>null)){const{url:o,name:r}=e,s={name:C.name,uuid:C.uuid},{proceed:a,reason:c}=syncApiCall("request-new-content",{...s,senderEntityType:C.entityType,options:e,entityType:t});a?n({nativeWindow:A(o,r)}):i(new Error(c||"Window creation has been intercepted."))}function openerSuccessCBCalled(){d.openerSuccessCalled=!0,deferByTick((()=>{x.forEach((e=>{const{userAppConfigArgs:t}=m;e(t)}))}))}function mergeWebWindowMap(e){l=new Map([...l,...e])}function registerWebWindow(e,t){l.set(e,t);try{window.opener.fin.__internal_.registerWebWindow(e,t)}catch(e){}}function deregisterWebWindow(e){l.delete(e);try{window.opener.fin.__internal_.deregisterWebWindow(e)}catch(e){}}function getWebWindow(e){const t=l.get(e);if(t)return t;try{return window.opener.fin.__internal_.getWebWindow(e)}catch(e){}}global.chrome=global.chrome||{},global.chrome.desktop={getDetails:e=>{const t={},n=function getSocketServerStateSync(){return g}();t.port=n.port,t.ssl=n.isHttps,t.uuid=m.uuid,t.name=m.name,t.options=m,t.versions=s,e(t)}};const P=new i.DecorateHelpers(f,(function makeFinObject(){return{desktop:{main:e=>{"function"==typeof e&&function onContentReady(e,t){E&&(getOpenerSuccessCallbackCalled()||null===window.opener||m.isRawWindowOpen||isCrossOrigin())?deferByTick((()=>{const{userAppConfigArgs:e}=m;t(e)})):x.push(t)}(window,e)},getUuid:process.getGUID,getVersion:()=>r},__internal_:{ipc:f,routingId:c,ipcconfig:w,createChildWindow:(e,t,n)=>createChildWindowTheElectronWay({options:e,entityType:"window"},t,n),createChildContent:createChildWindowTheElectronWay,openerSuccessCBCalled,initialOptions:m,isPlatform:b,entityInfo:C,isMainFrame:a,registerWebWindow,getWebWindow,deregisterWebWindow,mergeWebWindowMap,raiseEventAsync,childViews:!!m.experimental?.childViews}}}),syncApiCall,asyncApiCall,I);(0,i.handleInjection)(P,j,m,c,t,p),f.on("zoom",((e,t)=>{try{"level"in t?h.setZoomLevel(t.level):"increment"in t&&h.setZoomLevel(t.increment?Math.floor(h.getZoomLevel())+t.increment:0),"id"in t&&f.send(`zoom-response-${t.id}`,{})}catch(e){"id"in t&&f.send(`zoom-response-${t.id}`,{error:e})}})),window.addEventListener("beforeunload",(()=>{try{deregisterWebWindow(m.name)}catch(e){console.error(e)}})),window.addEventListener("load",(()=>{if("global"===j&&a){fin.Application.getCurrentSync().on("window-closed",(({name:e})=>{deregisterWebWindow(e)}));try{const e=window.opener.fin.wire.me;fin.Window.wrapSync(e).on("initialized",(()=>{try{window.opener.fin.__internal_.mergeWebWindowMap(l)}catch(e){console.error(e)}}))}catch(e){}}})),registerWebWindow(m.name,window)}},"./src/block-print.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{blockPrint:()=>blockPrint});const blockPrint=()=>{window.print=()=>{},document.addEventListener("DOMContentLoaded",(()=>{const e=document.createElement("style");e.innerHTML="\n@media print {\n    body {\n        display: none !important;\n    }\n}\n",document.head.appendChild(e)}))}},"./src/drag-protection/drag-protection.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{registerDragProtection:()=>registerDragProtection});var i=n("./src/drag-protection/proxy-data-transfer.ts");function registerDragProtection(){const e=EventTarget.prototype.addEventListener,t=EventTarget.prototype.removeEventListener,n=new WeakMap;function getStore(e){let t=n.get(e);return t||(t={},n.set(e,t)),t}let o=null,r={mode:"protected"};e("dragstart",(function(e){if(!("dataTransfer"in e)||!e.dataTransfer)return o=null,void(r={mode:"protected"});const t=e;t.dataTransfer.types.map((e=>({type:e,data:t.dataTransfer.getData}))),r={mode:"read-write"},o=new i.ProxyDataTransfer(t.dataTransfer,r)}),{capture:!0}),e("dragend",(function(){o=null,r={mode:"protected"}})),EventTarget.prototype.addEventListener=function(t,n,i){if(!n||"function"!=typeof n||"drag"!==t&&"dragend"!==t&&"dragenter"!==t&&"dragexit"!==t&&"dragleave"!==t&&"dragover"!==t&&"dragstart"!==t&&"drop"!==t&&"dragenter"!==t)return e.call(this,t,n,i);const s=getStore(this);s[t]||(s[t]=new WeakMap);const wrappedListener=function(e){if(!("dataTransfer"in e))return n.call(this,e);const i=e;return r&&(r.mode="dragstart"===t?"read-write":"drop"===t?"read-only":"protected"),Object.defineProperty(i,"dataTransfer",{value:o??i.dataTransfer,writable:!0,configurable:!0,enumerable:!0}),n.call(this,i)};return s[t].set(n,wrappedListener),e.call(this,t,wrappedListener,i)},EventTarget.prototype.addEventListener.toString=e.toString.bind(e),EventTarget.prototype.removeEventListener=function(e,n,i){if(!this||!n||"function"!=typeof n)return t.call(this,e,n,i);const o=getStore(this);let r=n;return o[e]&&o[e].has(n)&&(r=o[e].get(n),o[e].delete(n)),t.call(this,e,r,i)},EventTarget.prototype.removeEventListener.toString=t.toString.bind(t)}},"./src/drag-protection/proxy-data-transfer.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{ProxyDataTransfer:()=>ProxyDataTransfer});var i,o,r,__classPrivateFieldSet=function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class ProxyDataTransfer extends DataTransfer{constructor(e,t){super(),i.set(this,new Map),o.set(this,void 0),r.set(this,void 0),__classPrivateFieldSet(this,o,e,"f"),__classPrivateFieldSet(this,r,t,"f");for(const e of __classPrivateFieldGet(this,o,"f").types)this.setData(e,__classPrivateFieldGet(this,o,"f").getData(e));e.clearData()}get types(){return Array.from(__classPrivateFieldGet(this,i,"f").keys())}get dropEffect(){return __classPrivateFieldGet(this,o,"f").dropEffect}set dropEffect(e){["none","copy","link","move"].includes(e)&&(__classPrivateFieldGet(this,o,"f").dropEffect=e)}get effectAllowed(){return __classPrivateFieldGet(this,o,"f").effectAllowed}set effectAllowed(e){["none","copy","copyLink","copyMove","link","linkMove","move","all"].includes(e)&&(__classPrivateFieldGet(this,o,"f").effectAllowed=e)}clearData(e){"read-write"===__classPrivateFieldGet(this,r,"f").mode&&(e?(e=convertFormat(e),__classPrivateFieldGet(this,i,"f").delete(e)):__classPrivateFieldGet(this,i,"f").clear())}getData(e){if("protected"===__classPrivateFieldGet(this,r,"f").mode)return"";const t="url"===e,n=__classPrivateFieldGet(this,i,"f").get(convertFormat(e))||"";return t?n.replace(/ /g,"%20"):n}setData(e,t){"read-write"===__classPrivateFieldGet(this,r,"f").mode&&(e=convertFormat(e),__classPrivateFieldGet(this,i,"f").set(e,t))}setDragImage(e,t,n){"read-write"===__classPrivateFieldGet(this,r,"f").mode&&__classPrivateFieldGet(this,o,"f").setDragImage(e,t,n)}}function convertFormat(e){return"text"===e?"text/plain":"url"===e?"text/uri-list":e.toLowerCase()}i=new WeakMap,o=new WeakMap,r=new WeakMap},"./src/elipc.transport.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ElIPCTransport});var i,o,r,s=n("events"),a=n("../../js-adapter/out/src/transport/transport-errors.js"),__classPrivateFieldSet=function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class ElIPCTransport extends s.EventEmitter{static createClosedConstructor(e,t){return class OverrideElIPCTransport extends ElIPCTransport{constructor(n){super(n,e,t)}}}constructor(e,t,n){super(),i.set(this,void 0),o.set(this,void 0),r.set(this,void 0),this.connectSync=()=>{__classPrivateFieldGet(this,i,"f").on(__classPrivateFieldGet(this,r,"f"),((e,t)=>{this.onmessage(JSON.parse(t))}))},this.connect=async()=>{throw new a.NotImplementedError("Not Implemented")},this.send=e=>(__classPrivateFieldGet(this,i,"f").send(__classPrivateFieldGet(this,o,"f"),JSON.parse(JSON.stringify(e))),Promise.resolve()),this.shutdown=()=>Promise.reject(new Error("Not Implemented")),__classPrivateFieldSet(this,i,t,"f");this.onmessage=e,__classPrivateFieldSet(this,o,"of-window-message","f"),__classPrivateFieldSet(this,r,n,"f")}getPort(){throw new a.NotImplementedError("Not Implemented")}}i=new WeakMap,o=new WeakMap,r=new WeakMap},"./src/frame-load-perf.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{registerFrameLoadPerf:()=>registerFrameLoadPerf});const i="of-internal-frame-load-timestamp";function registerFrameLoadPerf(e){function send(t,n){try{e(i,{rendererTime:t,isMainFrame:n})}catch(e){}}function run(){send(Date.now(),!0);const e=Array.from(document.getElementsByTagName("iframe")),t=e.length;if(0===t)return;const n=new Array(t);let i=0;function flushNextInOrder(){for(;i<t&&void 0!==n[i];)send(n[i],!1),i+=1}e.forEach(((e,t)=>{let i=!1;try{const t=e.contentWindow?.document;i=null!=t&&"complete"===t.readyState}catch{}i?(n[t]=Date.now(),flushNextInOrder()):e.addEventListener("load",(()=>{n[t]=Date.now(),flushNextInOrder()}),{once:!0})}))}"complete"===document.readyState?run():window.addEventListener("load",run,{once:!0})}},"./src/node-less-utils.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{getSourceURL:()=>getSourceURL});const getSourceURL=e=>{let t=e.location.href;return"about:blank"===t&&(e.self===e.top?e.opener&&(t=getSourceURL(e.opener)):t=getSourceURL(e.parent)),t}},"./src/node-less.js":(e,t,n)=>{"use strict";n.r(t);var i=n("./src/of-main.ts"),o=n("./src/drag-protection/drag-protection.ts"),r=n("../../legacy-api/src/main.js"),s=n("./src/api-decorator.js"),a=n("./src/standard-frame-writer.ts"),c=n("./src/node-less-utils.ts"),d=n("./src/block-print.ts"),l=n("./src/web-window-setup/initialize-web-window-overrides.ts"),u=n("./src/web-window-setup/web-window-override-factory.ts"),p=n("./src/frame-load-perf.ts");const h=n("electron"),f=h.webFrame,w="boolean"==typeof process.isMainFrame?process.isMainFrame:isMainFrame,y=!!f.top&&w,m="undefined"!=typeof window&&window.self===window.top,g=(0,c.getSourceURL)(window)||"",v=y&&m?h.ipcRenderer.sendSync("get-openfin-api",{isMainFrame:w,isChildMainFrame,isSameOriginIframe,isCrossOriginIframe,targetUrl:g,top:y}):'{"api":{},"initialOptions":null}',{api:b,initialOptions:_}=JSON.parse(v);(0,l.initializeWebWindowOverrides)(window,(0,u.getWebWindowOverrides)(h.ipcRenderer)),((e,t,n)=>{const c=[];c.push((()=>{h.ipcRendererInternal.removeAllListeners("RENDERER_WEB_FRAME_METHOD")}));try{if("chrome-devtools:"===window.location.protocol)return;if(!_)return;e.getFrameData=process.getFrameData,e.global=global,e.process=process,e.routingId=t||h.webFrame.routingId,e.isMainFrame=n;const{options:{fdc3Api:l,ignoreChildFrameName:u=!1}}=_;let f="";const{runApiDecorator:w,finInjectionType:y,printPermission:m,blockDrag:v,entityInfo:j}=b.windowOptionSet;if("block"===m&&(0,d.blockPrint)(),v&&(0,o.registerDragProtection)(),w&&(n&&!u&&(window.name=j.name),n&&(0,p.registerFrameLoadPerf)(((e,t)=>h.ipcRenderer.send(e,t))),(0,s.default)(b.windowOptionSet,e),"none"!==y)){if((0,r.default)(),_?.options?.experimental?.v2Api){const{fin:t,fdc3:n}=(0,i.default)(e.fin);e.fin=Object.assign(e.fin,t),n&&(e.fdc3=n)}if(e.fin.__internal_.isPlatform&&(e.fin.me.isView||e.fin.me.isWindow&&!e.fin.me.isMainWindow())){const t=_?.options?.interop;e.fin.me.interop=e.fin.Interop.connectSync(t?.providerId?t.providerId:e.fin.me.uuid,t)}l&&console.warn("The fdc3Api option has been removed. To get rid of this warning, please remove it from your app options."),e.fin.__internal_.ipc=null,e.fin?f=e.fin.__internal_.ipcconfig.channels.CORE_MESSAGE:console.warn("failed to load OpenFin api"),_?.options?.layout&&h.ipcRenderer.once("api-modules-evaluated",(()=>{(0,a.default)()}))}delete e.process,delete e.module,delete e.Buffer,delete e.routingId,delete e.isMainFrame,delete e.global,delete e.getFrameData,e=void 0,h.ipcRenderer.once("api-modules-evaluated",(()=>{try{h.ipcRenderer.emit("post-api-injection",t),h.ipcRenderer.emit(`post-api-injection-${t}`,{targetUrl:g})}catch(e){console.error(`Error notifying post-api-injection for ${t}`),console.error(e.stack)}finally{h.ipcRenderer.removeAllListeners(`post-api-injection-${t}`)}})),f.length&&c.push((()=>{try{h.ipcRenderer.emit("teardown-render-frame",t),h.ipcRenderer.emit(`teardown-render-frame-${t}`),h.ipcRenderer.removeAllListeners(f),h.ipcRenderer.removeAllListeners(`teardown-render-frame-${t}`),h.ipcRenderer.removeAllListeners("zoom")}catch(e){console.error(`Error cleaning up renderFrame ${t}`),console.error(e.stack)}}))}catch(e){console.error(e),console.error(e.stack),h.ipcRenderer.send("api-injection-failed",t)}finally{e&&(delete e.require,delete e.process,delete e.module,delete e.Buffer,delete e.routingId,delete e.isMainFrame,delete e.global,delete e.getFrameData,e=void 0)}((e,t=[])=>{process.once(`frame-exit-${e}`,(()=>{t.forEach((t=>{if("function"==typeof t)try{t()}catch(t){console.error(`Error cleaning up renderFrame ${e}`),console.error(t.stack)}}))}))})(t,c)})(window,routingId,w)},"./src/of-main.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>registerV2Api});var i=n("../../js-adapter/out/src/api/fin.js"),o=n("../../js-adapter/out/src/api/interop/fdc3/fdc3.js"),r=n("../../js-adapter/out/src/transport/transport.js"),s=n("./src/elipc.transport.ts"),a=n("./src/openfin-env.ts");function registerV2Api(e){const{ipc:t,ipcconfig:n,initialOptions:c,entityInfo:d,isMainFrame:l}=e.__internal_,{fdc3InteropApi:u}=c,{uuid:p,name:h}=l?c:d,f={uuid:p,name:h},w=new a.default(e),y=new r.Transport((e=>new(s.default.createClosedConstructor(t,n.channels.CORE_MESSAGE))(e)),w,f);y.connectSync();const m=new i.Fin(y);if(u){return{fin:m,fdc3:(0,o.getFdc3)(y,u)}}return{fin:m}}},"./src/openfin-env.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>OpenFinEnvironment});var i,o,r,s=n("../platforms/out/common/bounds-observer.js"),a=n("../../js-adapter/out/src/environment/browser.js"),c=n("../../js-adapter/out/src/transport/transport-errors.js"),d=n("../../js-adapter/out/src/util/lazy.js"),__classPrivateFieldSet=function(e,t,n,i,o){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?o.call(e,n):o?o.value=n:t.set(e,n),n},__classPrivateFieldGet=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class OpenFinEnvironment extends a.BrowserEnvironment{constructor(e){super(),this.type="openfin",i.set(this,void 0),o.set(this,new d.Lazy((()=>n.e("layout").then(n.bind(n,"../platforms/out/layout/init-platform-layout.js"))))),r.set(this,void 0),this.writeToken=(e,t)=>{throw new c.NotImplementedError("Not Implemented")},this.retrievePort=e=>{throw new c.NotImplementedError("Not Implemented")},this.getNextMessageId=()=>__classPrivateFieldGet(this,r,"f").desktop.getUuid(),this.createChildContent=async({options:e,entityType:t})=>{const n=this.normalizeOptions(e);return new Promise(((e,i)=>__classPrivateFieldGet(this,r,"f").__internal_.createChildContent({entityType:t,options:n},e,i)))},this.normalizeOptions=e=>{const{uuid:t}=__classPrivateFieldGet(this,r,"f").__internal_?.initialOptions??{},n=JSON.parse(JSON.stringify(e)),i="about:blank";return n.uuid=n.uuid||t,n.url=n.url||i,n.url!==i&&(n.url=this.resolveUrl(n.url)),n},this.getWebWindow=e=>__classPrivateFieldGet(this,r,"f").__internal_.getWebWindow(e.name),this.getCurrentEntityIdentity=()=>__classPrivateFieldGet(this,r,"f").__internal_.entityInfo,this.getCurrentEntityType=()=>this.getCurrentEntityIdentity().entityType||"unknown",this.raiseEvent=(e,t)=>{this.raiseEventAsync(e,t)},__classPrivateFieldSet(this,r,e,"f"),this.raiseEventAsync=__classPrivateFieldGet(this,r,"f").__internal_.raiseEventAsync,delete __classPrivateFieldGet(this,r,"f").__internal_.raiseEventAsync,this.childViews=__classPrivateFieldGet(this,r,"f").__internal_.childViews,__classPrivateFieldSet(this,i,new Promise((e=>{__classPrivateFieldGet(this,r,"f").desktop.main(e)})),"f")}getAdapterVersionSync(){return __classPrivateFieldGet(this,r,"f").desktop.getVersion()}getDefaultChannelOptions(){return{create:{},connect:{},...__classPrivateFieldGet(this,r,"f").__internal_?.initialOptions?.experimental?.defaultChannelOptions??{}}}layoutAllowedInContext(e){return e.me.isWindow}async initLayoutManager(e,t,n){const{initLayoutManager:i}=await __classPrivateFieldGet(this,o,"f").getValue();return i(e,t,n)}async applyLayoutSnapshot(e,t,n){const{applyLayoutSnapshot:i}=await __classPrivateFieldGet(this,o,"f").getValue();return i(e,t,n)}async createLayout(e,t){const{DefaultLayoutManager:n}=await __classPrivateFieldGet(this,o,"f").getValue();return n.createLayout(e,t)}async destroyLayout(e,t){const{DefaultLayoutManager:n}=await __classPrivateFieldGet(this,o,"f").getValue();return n.destroyLayout(e,t)}async resolveLayout(e,t){const{DefaultLayoutManager:n}=await __classPrivateFieldGet(this,o,"f").getValue();return n.resolveLayout(e,t)}async initPlatform(e,t){const{initPlatformProvider:i}=await n.e("provider").then(n.t.bind(n,"../platforms/out/provider/init-platform-provider.js",23));return i(this,e,t)}observeBounds(e,t){return(0,s.observeBounds)(e,t)}resolveUrl(e){return new URL(e,location.href).href}whenReady(){return __classPrivateFieldGet(this,i,"f")}}i=new WeakMap,o=new WeakMap,r=new WeakMap},"./src/standard-frame-writer.ts":(e,t,n)=>{"use strict";function writeStandardFrame(){if(window.location.href.includes("about:blank")&&window.location.search.includes("of-internal-inject-platform-frame")){const e=n("./assets/standard-frame.html");document.write(`${e.default}`),document.close(),fin&&fin.__internal_.openerSuccessCBCalled()}}n.r(t),n.d(t,{default:()=>writeStandardFrame})},"./src/web-window-setup/initialize-web-window-overrides.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{initializeWebWindowOverrides:()=>initializeWebWindowOverrides});const initializeWebWindowOverrides=(e,t)=>{Object.entries(t).forEach((([t,{value:n,descriptor:i}])=>{Object.defineProperty(e,`${t}`,{value:n,...i})}))}},"./src/web-window-setup/web-window-override-factory.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{getWebWindowOverrides:()=>getWebWindowOverrides});const getWebWindowOverrides=e=>({close:{value:()=>{if(window!==window.top)return;const t=!!window.opener,n=window.history.length<=1;(t||n)&&e.invoke("webWindow.close")},descriptor:{writable:!0,configurable:!0,enumerable:!0}}})},electron:e=>{"use strict";e.exports=require("electron")},events:e=>{"use strict";e.exports=require("events")}},r={};function __webpack_require__(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=o,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var o=Object.create(null);__webpack_require__.r(o);var r={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>r[e]=()=>n[e]));return r.default=()=>n,__webpack_require__.d(o,r),o},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>e+".js",__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},i="@openfin/renderer-injectables:",__webpack_require__.l=(e,t,o,r)=>{if(n[e])n[e].push(t);else{var s,a;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var l=c[d];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==i+o){s=l;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",i+o),s.src=e),n[e]=[t];var onScriptComplete=(t,i)=>{s.onerror=s.onload=null,clearTimeout(u);var o=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(i))),t)return t(i)},u=setTimeout(onScriptComplete.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=onScriptComplete.bind(null,s.onerror),s.onload=onScriptComplete.bind(null,s.onload),a&&document.head.appendChild(s)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="",(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={main:0};__webpack_require__.f.j=(t,n)=>{var i=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise(((n,o)=>i=e[t]=[n,o]));n.push(i[2]=o);var r=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(r,(n=>{if(__webpack_require__.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",s.name="ChunkLoadError",s.type=o,s.request=r,i[1](s)}}),"chunk-"+t,t)}};var webpackJsonpCallback=(t,n)=>{var i,o,[r,s,a]=n,c=0;if(r.some((t=>0!==e[t]))){for(i in s)__webpack_require__.o(s,i)&&(__webpack_require__.m[i]=s[i]);if(a)a(__webpack_require__)}for(t&&t(n);c<r.length;c++)o=r[c],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0},t=global.webpackChunk_openfin_renderer_injectables=global.webpackChunk_openfin_renderer_injectables||[];t.forEach(webpackJsonpCallback.bind(null,0)),t.push=webpackJsonpCallback.bind(null,t.push.bind(t))})(),__webpack_require__.nc=void 0;var s={};(()=>{"use strict";__webpack_require__.r(s);__webpack_require__("./src/node-less.js")})()})();